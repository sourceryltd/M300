/*! For license information please see main.75d20b8e.chunk.js.LICENSE.txt */
(this.webpackJsonpprinter=this.webpackJsonpprinter||[]).push([[0],{109:function(e){e.exports=JSON.parse('{"name":"printer","version":"2.3.5","private":true,"dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.31","@fortawesome/free-solid-svg-icons":"^5.15.0","@fortawesome/react-fontawesome":"^0.1.11","@material-ui/core":"^4.11.0","@material-ui/icons":"^4.11.2","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","install":"^0.13.0","moment":"^2.29.1","npm":"^6.14.8","react":"^16.13.1","react-dom":"^16.13.1","react-scripts":"3.4.3","react-simple-keyboard":"^2.5.81","react-use-websocket":"^2.2.0","three":"^0.125.2","three.interaction":"^v0.2.3"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","testdeploy":"cd devscripts/ && build-and-deploy.bat"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},127:function(e,t,a){e.exports=a(159)},132:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t){e.exports=function(e){var t=e.BoxGeometry,a=e.BufferGeometry,n=e.Color,o=e.CylinderGeometry,r=e.DoubleSide,i=e.Euler,s=e.Float32BufferAttribute,l=e.Line,c=e.LineBasicMaterial,u=e.Matrix4,p=e.Mesh,d=e.MeshBasicMaterial,m=e.Object3D,h=e.OctahedronGeometry,f=e.PlaneGeometry,b=e.Quaternion,g=e.Raycaster,y=e.SphereGeometry,E=e.TorusGeometry,v=e.Vector3,w=function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),m.call(this),this.visible=!1,this.domElement=t;var a=new x;this.add(a);var n=new S;this.add(n);var o=this;K("camera",e),K("object",void 0),K("enabled",!0),K("axis",null),K("mode","translate"),K("translationSnap",null),K("rotationSnap",null),K("scaleSnap",null),K("space","world"),K("size",1),K("dragging",!1),K("showX",!0),K("showY",!0),K("showZ",!0);var r={type:"change"},i={type:"mouseDown"},s={type:"mouseUp",mode:o.mode},l={type:"objectChange"},c=new g;function u(e,t,a){for(var n=t.intersectObject(e,!0),o=0;o<n.length;o++)if(n[o].object.visible||a)return n[o];return!1}var p=new v,d=new v,h=new b,f={X:new v(1,0,0),Y:new v(0,1,0),Z:new v(0,0,1)},y=new v,E=new v,w=new v,k=new v,T=new v,O=new v,j=0,C=new v,_=new b,A=new v,N=new v,z=new b,B=new b,M=new v,P=new v,R=new b,I=new v,F=new v,L=new b,D=new b,Y=new v,G=new v,Z=new v,X=new b,U=new v;function K(e,t){var i=t;Object.defineProperty(o,e,{get:function(){return void 0!==i?i:t},set:function(t){i!==t&&(i=t,n[e]=t,a[e]=t,o.dispatchEvent({type:e+"-changed",value:t}),o.dispatchEvent(r))}}),o[e]=t,n[e]=t,a[e]=t}function H(e){if(o.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var a=e.changedTouches?e.changedTouches[0]:e,n=t.getBoundingClientRect();return{x:(a.clientX-n.left)/n.width*2-1,y:-(a.clientY-n.top)/n.height*2+1,button:e.button}}function W(e){if(o.enabled)switch(e.pointerType){case"mouse":case"pen":o.pointerHover(H(e))}}function V(e){o.enabled&&(o.domElement.style.touchAction="none",o.domElement.ownerDocument.addEventListener("pointermove",q),o.pointerHover(H(e)),o.pointerDown(H(e)))}function q(e){o.enabled&&o.pointerMove(H(e))}function Q(e){o.enabled&&(o.domElement.style.touchAction="",o.domElement.ownerDocument.removeEventListener("pointermove",q),o.pointerUp(H(e)))}K("worldPosition",F),K("worldPositionStart",P),K("worldQuaternion",L),K("worldQuaternionStart",R),K("cameraPosition",C),K("cameraQuaternion",_),K("pointStart",y),K("pointEnd",E),K("rotationAxis",k),K("rotationAngle",j),K("eye",G),t.addEventListener("pointerdown",V),t.addEventListener("pointermove",W),o.domElement.ownerDocument.addEventListener("pointerup",Q),this.dispose=function(){t.removeEventListener("pointerdown",V),t.removeEventListener("pointermove",W),o.domElement.ownerDocument.removeEventListener("pointermove",q),o.domElement.ownerDocument.removeEventListener("pointerup",Q),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))},this.attach=function(e){return this.object=e,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(N,z,M),this.object.matrixWorld.decompose(F,L,Y),B.copy(z).invert(),D.copy(L).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(C,_,A),G.copy(C).sub(F).normalize(),m.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging){c.setFromCamera(e,this.camera);var t=u(a.picker[this.mode],c);this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){c.setFromCamera(e,this.camera);var t=u(n,c,!0);if(t){var a=this.space;if("scale"===this.mode?a="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(a="world"),"local"===a&&"rotate"===this.mode){var o=this.rotationSnap;"X"===this.axis&&o&&(this.object.rotation.x=Math.round(this.object.rotation.x/o)*o),"Y"===this.axis&&o&&(this.object.rotation.y=Math.round(this.object.rotation.y/o)*o),"Z"===this.axis&&o&&(this.object.rotation.z=Math.round(this.object.rotation.z/o)*o)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),Z.copy(this.object.position),X.copy(this.object.quaternion),U.copy(this.object.scale),this.object.matrixWorld.decompose(P,R,I),y.copy(t.point).sub(P)}this.dragging=!0,i.mode=this.mode,this.dispatchEvent(i)}},this.pointerMove=function(e){var t=this.axis,a=this.mode,o=this.object,i=this.space;if("scale"===a?i="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(i="world"),void 0!==o&&null!==t&&!1!==this.dragging&&-1===e.button){c.setFromCamera(e,this.camera);var s=u(n,c,!0);if(s){if(E.copy(s.point).sub(P),"translate"===a)w.copy(E).sub(y),"local"===i&&"XYZ"!==t&&w.applyQuaternion(D),-1===t.indexOf("X")&&(w.x=0),-1===t.indexOf("Y")&&(w.y=0),-1===t.indexOf("Z")&&(w.z=0),"local"===i&&"XYZ"!==t?w.applyQuaternion(X).divide(M):w.applyQuaternion(B).divide(M),o.position.copy(w).add(Z),this.translationSnap&&("local"===i&&(o.position.applyQuaternion(h.copy(X).invert()),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(X)),"world"===i&&(o.parent&&o.position.add(p.setFromMatrixPosition(o.parent.matrixWorld)),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(p.setFromMatrixPosition(o.parent.matrixWorld))));else if("scale"===a){if(-1!==t.search("XYZ")){var m=E.length()/y.length();E.dot(y)<0&&(m*=-1),d.set(m,m,m)}else p.copy(y),d.copy(E),p.applyQuaternion(D),d.applyQuaternion(D),d.divide(p),-1===t.search("X")&&(d.x=1),-1===t.search("Y")&&(d.y=1),-1===t.search("Z")&&(d.z=1);o.scale.copy(U).multiply(d),this.scaleSnap&&(-1!==t.search("X")&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===a){w.copy(E).sub(y);var b=20/F.distanceTo(p.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(k.copy(G),j=E.angleTo(y),T.copy(y).normalize(),O.copy(E).normalize(),j*=O.cross(T).dot(G)<0?1:-1):"XYZE"===t?(k.copy(w).cross(G).normalize(),j=w.dot(p.copy(k).cross(this.eye))*b):"X"!==t&&"Y"!==t&&"Z"!==t||(k.copy(f[t]),p.copy(f[t]),"local"===i&&p.applyQuaternion(L),j=w.dot(p.cross(G).normalize())*b),this.rotationSnap&&(j=Math.round(j/this.rotationSnap)*this.rotationSnap),this.rotationAngle=j,"local"===i&&"E"!==t&&"XYZE"!==t?(o.quaternion.copy(X),o.quaternion.multiply(h.setFromAxisAngle(k,j)).normalize()):(k.applyQuaternion(B),o.quaternion.copy(h.setFromAxisAngle(k,j)),o.quaternion.multiply(X).normalize())}this.dispatchEvent(r),this.dispatchEvent(l)}}},this.pointerUp=function(e){0===e.button&&(this.dragging&&null!==this.axis&&(s.mode=this.mode,this.dispatchEvent(s)),this.dragging=!1,this.axis=null)},this.getMode=function(){return o.mode},this.setMode=function(e){o.mode=e},this.setTranslationSnap=function(e){o.translationSnap=e},this.setRotationSnap=function(e){o.rotationSnap=e},this.setScaleSnap=function(e){o.scaleSnap=e},this.setSize=function(e){o.size=e},this.setSpace=function(e){o.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};w.prototype=Object.assign(Object.create(m.prototype),{constructor:w,isTransformControls:!0});var x=function(){"use strict";m.call(this),this.type="TransformControlsGizmo";var e=new d({depthTest:!1,depthWrite:!1,transparent:!0,side:r,fog:!1,toneMapped:!1}),g=new c({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),w=e.clone();w.opacity=.15;var x=e.clone();x.opacity=.33;var S=e.clone();S.color.set(16711680);var k=e.clone();k.color.set(65280);var T=e.clone();T.color.set(255);var O=e.clone();O.opacity=.25;var j=O.clone();j.color.set(16776960);var C=O.clone();C.color.set(65535);var _=O.clone();_.color.set(16711935),e.clone().color.set(16776960);var A=g.clone();A.color.set(16711680);var N=g.clone();N.color.set(65280);var z=g.clone();z.color.set(255);var B=g.clone();B.color.set(65535);var M=g.clone();M.color.set(16711935);var P=g.clone();P.color.set(16776960);var R=g.clone();R.color.set(7895160);var I=P.clone();I.opacity=.25;var F=new o(0,.05,.2,12,1,!1),L=new t(.125,.125,.125),D=new a;D.setAttribute("position",new s([0,0,0,1,0,0],3));var Y=function(e,t){for(var n=new a,o=[],r=0;r<=64*t;++r)o.push(0,Math.cos(r/32*Math.PI)*e,Math.sin(r/32*Math.PI)*e);return n.setAttribute("position",new s(o,3)),n},G={X:[[new p(F,S),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new p(F,S),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new l(D,A)]],Y:[[new p(F,k),[0,1,0],null,null,"fwd"],[new p(F,k),[0,1,0],[Math.PI,0,0],null,"bwd"],[new l(D,N),null,[0,0,Math.PI/2]]],Z:[[new p(F,T),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new p(F,T),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new l(D,z),null,[0,-Math.PI/2,0]]],XYZ:[[new p(new h(.1,0),O.clone()),[0,0,0],[0,0,0]]],XY:[[new p(new f(.295,.295),j.clone()),[.15,.15,0]],[new l(D,P),[.18,.3,0],null,[.125,1,1]],[new l(D,P),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new p(new f(.295,.295),C.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new l(D,B),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new l(D,B),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new p(new f(.295,.295),_.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new l(D,M),[.18,0,.3],null,[.125,1,1]],[new l(D,M),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},Z={X:[[new p(new o(.2,0,1,4,1,!1),w),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new p(new o(.2,0,1,4,1,!1),w),[0,.6,0]]],Z:[[new p(new o(.2,0,1,4,1,!1),w),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new p(new h(.2,0),w)]],XY:[[new p(new f(.4,.4),w),[.2,.2,0]]],YZ:[[new p(new f(.4,.4),w),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new p(new f(.4,.4),w),[.2,0,.2],[-Math.PI/2,0,0]]]},X={START:[[new p(new h(.01,2),x),null,null,null,"helper"]],END:[[new p(new h(.01,2),x),null,null,null,"helper"]],DELTA:[[new l(function(){var e=new a;return e.setAttribute("position",new s([0,0,0,1,1,1],3)),e}(),x),null,null,null,"helper"]],X:[[new l(D,x.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new l(D,x.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new l(D,x.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},U={X:[[new l(Y(1,.5),A)],[new p(new h(.04,0),S),[0,0,.99],null,[1,3,1]]],Y:[[new l(Y(1,.5),N),null,[0,0,-Math.PI/2]],[new p(new h(.04,0),k),[0,0,.99],null,[3,1,1]]],Z:[[new l(Y(1,.5),z),null,[0,Math.PI/2,0]],[new p(new h(.04,0),T),[.99,0,0],null,[1,3,1]]],E:[[new l(Y(1.25,1),I),null,[0,Math.PI/2,0]],[new p(new o(.03,0,.15,4,1,!1),I),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new p(new o(.03,0,.15,4,1,!1),I),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new p(new o(.03,0,.15,4,1,!1),I),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new p(new o(.03,0,.15,4,1,!1),I),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new l(Y(1,1),R),null,[0,Math.PI/2,0]]]},K={AXIS:[[new l(D,x.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},H={X:[[new p(new E(1,.1,4,24),w),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new p(new E(1,.1,4,24),w),[0,0,0],[Math.PI/2,0,0]]],Z:[[new p(new E(1,.1,4,24),w),[0,0,0],[0,0,-Math.PI/2]]],E:[[new p(new E(1.25,.1,2,24),w)]],XYZE:[[new p(new y(.7,10,8),w)]]},W={X:[[new p(L,S),[.8,0,0],[0,0,-Math.PI/2]],[new l(D,A),null,null,[.8,1,1]]],Y:[[new p(L,k),[0,.8,0]],[new l(D,N),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new p(L,T),[0,0,.8],[Math.PI/2,0,0]],[new l(D,z),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new p(L,j),[.85,.85,0],null,[2,2,.2]],[new l(D,P),[.855,.98,0],null,[.125,1,1]],[new l(D,P),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new p(L,C),[0,.85,.85],null,[.2,2,2]],[new l(D,B),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new l(D,B),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new p(L,_),[.85,0,.85],null,[2,.2,2]],[new l(D,M),[.855,0,.98],null,[.125,1,1]],[new l(D,M),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new p(new t(.125,.125,.125),O.clone()),[1.1,0,0]]],XYZY:[[new p(new t(.125,.125,.125),O.clone()),[0,1.1,0]]],XYZZ:[[new p(new t(.125,.125,.125),O.clone()),[0,0,1.1]]]},V={X:[[new p(new o(.2,0,.8,4,1,!1),w),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new p(new o(.2,0,.8,4,1,!1),w),[0,.5,0]]],Z:[[new p(new o(.2,0,.8,4,1,!1),w),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new p(L,w),[.85,.85,0],null,[3,3,.2]]],YZ:[[new p(L,w),[0,.85,.85],null,[.2,3,3]]],XZ:[[new p(L,w),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new p(new t(.2,.2,.2),w),[1.1,0,0]]],XYZY:[[new p(new t(.2,.2,.2),w),[0,1.1,0]]],XYZZ:[[new p(new t(.2,.2,.2),w),[0,0,1.1]]]},q={X:[[new l(D,x.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new l(D,x.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new l(D,x.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},Q=function(e){var t=new m;for(var a in e)for(var n=e[a].length;n--;){var o=e[a][n][0].clone(),r=e[a][n][1],i=e[a][n][2],s=e[a][n][3],l=e[a][n][4];o.name=a,o.tag=l,r&&o.position.set(r[0],r[1],r[2]),i&&o.rotation.set(i[0],i[1],i[2]),s&&o.scale.set(s[0],s[1],s[2]),o.updateMatrix();var c=o.geometry.clone();c.applyMatrix4(o.matrix),o.geometry=c,o.renderOrder=1/0,o.position.set(0,0,0),o.rotation.set(0,0,0),o.scale.set(1,1,1),t.add(o)}return t},$=new v(0,0,0),J=new i,ee=new v(0,1,0),te=new v(0,0,0),ae=new u,ne=new b,oe=new b,re=new b,ie=new v(1,0,0),se=new v(0,1,0),le=new v(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=Q(G)),this.add(this.gizmo.rotate=Q(U)),this.add(this.gizmo.scale=Q(W)),this.add(this.picker.translate=Q(Z)),this.add(this.picker.rotate=Q(H)),this.add(this.picker.scale=Q(V)),this.add(this.helper.translate=Q(X)),this.add(this.helper.rotate=Q(K)),this.add(this.helper.scale=Q(q)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:re;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var a=[];a=(a=(a=a.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var o=0;o<a.length;o++){var r,i=a[o];if(i.visible=!0,i.rotation.set(0,0,0),i.position.copy(this.worldPosition),r=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),i.scale.set(1,1,1).multiplyScalar(r*this.size/7),"helper"!==i.tag){if(i.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){"X"!==i.name&&"XYZX"!==i.name||Math.abs(ee.copy(ie).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Y"!==i.name&&"XYZY"!==i.name||Math.abs(ee.copy(se).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Z"!==i.name&&"XYZZ"!==i.name||Math.abs(ee.copy(le).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XY"===i.name&&Math.abs(ee.copy(le).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"YZ"===i.name&&Math.abs(ee.copy(ie).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XZ"===i.name&&Math.abs(ee.copy(se).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),-1!==i.name.search("X")&&(ee.copy(ie).applyQuaternion(t).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.x*=-1:"bwd"===i.tag&&(i.visible=!1)),-1!==i.name.search("Y")&&(ee.copy(se).applyQuaternion(t).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.y*=-1:"bwd"===i.tag&&(i.visible=!1)),-1!==i.name.search("Z")&&(ee.copy(le).applyQuaternion(t).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.z*=-1:"bwd"===i.tag&&(i.visible=!1))}else"rotate"===this.mode&&(oe.copy(t),ee.copy(this.eye).applyQuaternion(ne.copy(t).invert()),-1!==i.name.search("E")&&i.quaternion.setFromRotationMatrix(ae.lookAt(this.eye,te,se)),"X"===i.name&&(ne.setFromAxisAngle(ie,Math.atan2(-ee.y,ee.z)),ne.multiplyQuaternions(oe,ne),i.quaternion.copy(ne)),"Y"===i.name&&(ne.setFromAxisAngle(se,Math.atan2(ee.x,ee.z)),ne.multiplyQuaternions(oe,ne),i.quaternion.copy(ne)),"Z"===i.name&&(ne.setFromAxisAngle(le,Math.atan2(ee.y,ee.x)),ne.multiplyQuaternions(oe,ne),i.quaternion.copy(ne)));i.visible=i.visible&&(-1===i.name.indexOf("X")||this.showX),i.visible=i.visible&&(-1===i.name.indexOf("Y")||this.showY),i.visible=i.visible&&(-1===i.name.indexOf("Z")||this.showZ),i.visible=i.visible&&(-1===i.name.indexOf("E")||this.showX&&this.showY&&this.showZ),i.material._opacity=i.material._opacity||i.material.opacity,i.material._color=i.material._color||i.material.color.clone(),i.material.color.copy(i.material._color),i.material.opacity=i.material._opacity,this.enabled?this.axis&&(i.name===this.axis||this.axis.split("").some((function(e){return i.name===e}))?(i.material.opacity=1,i.material.color.lerp(new n(1,1,1),.5)):(i.material.opacity*=.25,i.material.color.lerp(new n(1,1,1),.5))):(i.material.opacity*=.5,i.material.color.lerp(new n(1,1,1),.5))}else i.visible=!1,"AXIS"===i.name?(i.position.copy(this.worldPositionStart),i.visible=!!this.axis,"X"===this.axis&&(ne.setFromEuler(J.set(0,0,0)),i.quaternion.copy(t).multiply(ne),Math.abs(ee.copy(ie).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"Y"===this.axis&&(ne.setFromEuler(J.set(0,0,Math.PI/2)),i.quaternion.copy(t).multiply(ne),Math.abs(ee.copy(se).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"Z"===this.axis&&(ne.setFromEuler(J.set(0,Math.PI/2,0)),i.quaternion.copy(t).multiply(ne),Math.abs(ee.copy(le).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"XYZE"===this.axis&&(ne.setFromEuler(J.set(0,Math.PI/2,0)),ee.copy(this.rotationAxis),i.quaternion.setFromRotationMatrix(ae.lookAt(te,ee,se)),i.quaternion.multiply(ne),i.visible=this.dragging),"E"===this.axis&&(i.visible=!1)):"START"===i.name?(i.position.copy(this.worldPositionStart),i.visible=this.dragging):"END"===i.name?(i.position.copy(this.worldPosition),i.visible=this.dragging):"DELTA"===i.name?(i.position.copy(this.worldPositionStart),i.quaternion.copy(this.worldQuaternionStart),$.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),$.applyQuaternion(this.worldQuaternionStart.clone().invert()),i.scale.copy($),i.visible=this.dragging):(i.quaternion.copy(t),this.dragging?i.position.copy(this.worldPositionStart):i.position.copy(this.worldPosition),this.axis&&(i.visible=-1!==this.axis.search(i.name)))}m.prototype.updateMatrixWorld.call(this)}};x.prototype=Object.assign(Object.create(m.prototype),{constructor:x,isTransformControlsGizmo:!0});var S=function(){"use strict";p.call(this,new f(1e5,1e5,2,2),new d({visible:!1,wireframe:!0,side:r,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane";var e=new v(1,0,0),t=new v(0,1,0),a=new v(0,0,1),n=new v,o=new v,i=new v,s=new u,l=new b;this.updateMatrixWorld=function(){var r=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(r="local"),e.set(1,0,0).applyQuaternion("local"===r?this.worldQuaternion:l),t.set(0,1,0).applyQuaternion("local"===r?this.worldQuaternion:l),a.set(0,0,1).applyQuaternion("local"===r?this.worldQuaternion:l),i.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":i.copy(this.eye).cross(e),o.copy(e).cross(i);break;case"Y":i.copy(this.eye).cross(t),o.copy(t).cross(i);break;case"Z":i.copy(this.eye).cross(a),o.copy(a).cross(i);break;case"XY":o.copy(a);break;case"YZ":o.copy(e);break;case"XZ":i.copy(a),o.copy(t);break;case"XYZ":case"E":o.set(0,0,0)}break;case"rotate":default:o.set(0,0,0)}0===o.length()?this.quaternion.copy(this.cameraQuaternion):(s.lookAt(n.set(0,0,0),o,i),this.quaternion.setFromRotationMatrix(s)),m.prototype.updateMatrixWorld.call(this)}};return S.prototype=Object.assign(Object.create(p.prototype),{constructor:S,isTransformControlsPlane:!0}),w}},142:function(e,t,a){},143:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(24),i=a.n(r),s=(a(132),a(11)),l=a.n(s),c=a(20),u=a(21),p=a(5),d=a(276),m=a(237),h=a(198),f=a(50),b=a(163),g=a(282),y=a(193),E=function(e){return Object(n.useEffect)(e,[])},v=a(195),w=a(196),x=a(197),S=Object(y.a)({card:{margin:"32px",border:"2px solid rgba(0, 0, 0, 0.12)",textAlign:"center"}}),k=function(e){var t=e.title,a=e.description,n=e.onClick,r=S();return o.a.createElement(v.a,{onClick:n,className:r.card},o.a.createElement(w.a,null,o.a.createElement(x.a,null,o.a.createElement(f.a,{variant:"h2"},t),o.a.createElement("p",null,a))))},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=1024,n=t<0?0:t,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,r)).toFixed(n))+" "+o[r]},O={},j=0,C=function(e){j=e},_=function(){return B().then((function(e){O=e}))},A=function(e,t){O[e]=t;var a=new FormData;a.append("json",JSON.stringify(O)),R(a)},N=function(e){return"undefined"!==typeof O[e]&&O[e]},z=function(){return function(){return P.apply(this,arguments)}()};function B(){return M.apply(this,arguments)}function M(){return(M=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.next=3,fetch("http://localhost:2127/api/v1/get/ui/settings",{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,B().then((function(e){console.log("before",e);var a,n;a=e,n="",Object.keys(a).forEach((function(e){return a[e]="network"==e||"printerName"==e?a[e]:n})),console.log("after",e);var o=new FormData;o.append("json",JSON.stringify(e)),R(o),t=e}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return I.apply(this,arguments)}function I(){return(I=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:2127/api/v1/set/ui/settings",{method:"POST",body:t});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=Object(y.a)({header:{textAlign:"center",fontSize:"32px"}}),L=function(e){var t=e.setStep,a=F(),n=function(e){A("printerProfile",e),t(3)};return E((function(){N("printerProfile")&&"none"!==N("printerProfile")&&t(3)})),(!N("printerProfile")||"none"==N("printerProfile"))&&o.a.createElement("div",null,o.a.createElement("h2",{className:a.header},"Where will this printer be used?"),o.a.createElement(k,{title:"Classroom",onClick:function(){return n("classroom")}}),o.a.createElement(k,{title:"Business",onClick:function(){return n("business")}}),o.a.createElement(k,{title:"Home",onClick:function(){return n("home")}}))},D=a(283),Y=a(164),G=a(205),Z=a(204),X=a(82),U=a.n(X),K=(a(89),Object(y.a)({backdrop:{zIndex:1e4,color:"#fff"},buttonContainer:{display:"flex",width:"100%",justifyContent:"space-around",marginTop:"56px"},connecting:{display:"flex",flexDirection:"column",alignItems:"center","& h4":{marginBottom:"24px"}},container:{display:"flex",flexDirection:"column"},header:{display:"flex",alignItems:"center"},item:{padding:function(e){return e.settingsScreen?"10px":"30px 15px"},fontSize:function(e){return e.settingsScreen?"18px":"24px"},display:"flex",justifyContent:"space-between"},keyboard:{position:"fixed",bottom:0,left:0,right:0,color:"#000"}})),H=function(e){var t=e.setStep,a=e.setShowSnack,r=e.setSnackMessage,i=e.settingsScreen,s=K(),u=Object(n.useState)(!1),d=Object(p.a)(u,2),m=d[0],g=d[1],y=Object(n.useState)("default"),v=Object(p.a)(y,2),w=v[0],x=v[1],S=Object(n.useState)(""),k=Object(p.a)(S,2),T=k[0],O=k[1],j=Object(n.useState)(!1),C=Object(p.a)(j,2),_=C[0],z=C[1],B=Object(n.useState)(!1),M=Object(p.a)(B,2),P=M[0],R=M[1],I=Object(n.useRef)(),F=Object(n.useState)("300x"),L=Object(p.a)(F,2),X=L[0],H=L[1];E((function(){H(N("printerName")),N("renamed")&&!i&&t(4)}));var W=function(){g(!1)},V=function(){var e=Object(c.a)(l.a.mark((function e(){var n,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A("renamed",!0),!T){e.next=27;break}if(n={hostname:T,action:"add"},o={hostname:null!==X?X:"300x",action:"remove"},s={ssid:T},z(!1),T===X){e.next=22;break}return e.next=9,fetch("http://localhost:8990/change/hostname",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 9:return e.sent.json().then((function(e){e.status.includes("add")?A("printerName",T):(r("Connection Failed. Try Again"),a((function(){return!0})),z(!1))})),e.next=13,fetch("http://localhost:8990/hotspot/change/ssid/name",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 13:if(e.sent.json().then((function(e){z(!1),e.status.includes("changed")?(A("ssid",T),r("Successfully Named!"),a((function(){return!0})),X||(R(!0),setTimeout((function(){fetch("http://localhost:8990/reboot",{method:"POST",headers:{"Content-Type":"application/json"}})}),3e3))):(r("Connection Failed. Try Again"),a((function(){return!0})))})),!X){e.next=20;break}return e.next=18,fetch("http://localhost:8990/change/hostname",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 18:e.sent.json().then((function(e){e.status.includes("remove")&&(R(!0),setTimeout((function(){fetch("http://localhost:8990/reboot",{method:"POST",headers:{"Content-Type":"application/json"}})}),3e3))}));case 20:e.next=25;break;case 22:r("Printer name is "+X),a((function(){return!0})),!i&&t(4);case 25:e.next=30;break;case 27:r("Printer name is "+X),a((function(){return!0})),!i&&t(4);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(P||_||!N("renamed"))&&o.a.createElement(h.a,{container:!0,item:!0,spacing:6,direction:"column",alignItems:"center",className:s.container},o.a.createElement("div",null,o.a.createElement(h.a,{container:!0,item:!0,spacing:6,direction:"column",alignItems:"center",style:{paddingTop:140}},o.a.createElement(f.a,{variant:"h4"},"Your Printer's Name Is:"),o.a.createElement(f.a,{variant:"h4",style:{textAlign:"center"}},X)),o.a.createElement(h.a,{container:!0,item:!0,spacing:6,direction:"column",alignItems:"center",style:{marginTop:200}},o.a.createElement(h.a,{container:!0,style:{flexDirection:"row",justifyContent:"flex-end"}},o.a.createElement(h.a,{item:!0,xs:9},o.a.createElement(D.a,{id:"input",label:"Change Printer Name",type:"text",color:"secondary",value:T,onFocus:function(){g(!0)},onChange:function(e){var t=e.target.value;O(t),I.current.setInput(t)},style:{width:"100%"}})),o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{color:"primary",variant:"contained",className:s.button,style:{marginTop:10},onClick:function(){W(),V()}},"Next"))),o.a.createElement(h.a,{container:!0,item:!0,spacing:6,direction:"column",alignItems:"center",style:{marginTop:10}},o.a.createElement(b.a,{"aria-label":"skip",endIcon:o.a.createElement(Z.a,null),onClick:function(){!i&&t(4),i&&t(0)}},"Skip"))),P&&o.a.createElement(Y.a,{className:s.backdrop,open:P},o.a.createElement("div",{className:s.connecting},o.a.createElement("h4",null,"Reboot Required. Rebooting..."),o.a.createElement(G.a,{color:"inherit"}))),_&&o.a.createElement(Y.a,{className:s.backdrop,open:_},o.a.createElement("div",{className:s.connecting},o.a.createElement("h4",null,"Renaming"),o.a.createElement(G.a,{color:"inherit"}))),m&&o.a.createElement("div",{className:s.keyboard},o.a.createElement(U.a,{keyboardRef:function(e){return I.current=e},layoutName:w,layout:{default:["{abc} {ABC} {+=#} {123}","a b c d e","f g h i j","k l m n o","p q r s t","u v w x y","z {space} {bksp}"],shift:["{abc} {ABC} {+=#} {123}","A B C D E","F G H I J","K L M N O","P Q R S T","U V W X Y","Z {space} {bksp}"],symbol:["{abc} {ABC} {+=#} {123}","! @ # $ %","^ & * ( )","~ ' _ - =","[ ] { } \\","| ; ' : ,",'" < > ? .'],number:["{abc} {ABC} {+=#} {123}","1 2 3","4 5 6","7 8 9","$ 0 .","{space}","# {bksp}"]},display:{"{bksp}":"Backspace","{enter}":"Enter","{shift}":"Shift","{space}":"Space","{123}":"123","{ABC}":"ABC","{abc}":"abc","{+=#}":"+ = #"},onChange:function(e){O(e),console.log("Input changed",e)},onKeyPress:function(e){"{ABC}"===e?x("shift"):"{abc}"===e?x("default"):"{+=#}"===e?x("symbol"):"{123}"===e&&x("number"),("{shift}"===e||"{lock}"===e)&&x("default"===w?"shift":"default")}}))))},W=(a(137),function(e){e.handleOnboarding;var t=e.setStep,a=e.settingsScreen;E((function(){N("didUserMode")&&!a&&t(5)}));var n=function(){var e=Object(c.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N("networkProfile"),A("userMode",a),A("onboarded",!0),A("didUserMode",!0),t(5);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!N("didUserMode")&&o.a.createElement("div",{className:"menu-container"},o.a.createElement("h3",null,"Please choose a mode"),o.a.createElement("div",{className:"menu-options-container"},o.a.createElement(k,{title:"Beginner",description:"For beginners. This mode has limited slicer settings.",onClick:function(){return n("beginner")}}),o.a.createElement(k,{title:"Advanced",description:"For users familiar with 3D printing. Additional settings unlocked.",onClick:function(){return n("advanced")}}),o.a.createElement(k,{title:"Expert",description:"For expert users. All slicer settings unlocked.",onClick:function(){return n("expert")}})))}),V=a(107),q=a.n(V),Q=a(235),$=a(113),J=a(240),ee=a(241),te=a(242),ae=a(243),ne=a(244),oe=a(245),re=a(230),ie=a(231),se=a(232),le=a(233),ce=a(234),ue=a(236),pe=a(238),de=a(239),me=a(246),he=a(247),fe=a(248),be=a(249),ge=a(250),ye=a(93),Ee=a(48),ve=a.n(Ee),we=a(8),xe=a(10),Se=a(13),ke=a(12),Te=a(166),Oe=a(226),je=a(287),Ce=a(281),_e=a(206),Ae=a(208),Ne=a(201),ze=a(284),Be=a(279),Me=a(229),Pe=a(222),Re=a(223),Ie=a(224),Fe=a(225),Le=a(227),De=a(228),Ye=a(207),Ge=(a(138),a(161)),Ze=a(203),Xe=a(165),Ue=a(209),Ke=a(280),He=a(210),We=o.a.createContext({camRotation:0,camZoom:0,camZ:0,showMagnet:!1,showBounds:!1,showGrid:!1,addRotation:function(e){},setZoom:function(e){},addZ:function(e){},setShowMagnet:function(e){},setShowBounds:function(e){},setShowGrid:function(e){}}),Ve=a(6),qe=function(e){Object(Se.a)(a,e);var t=Object(ke.a)(a);function a(e){return Object(we.a)(this,a),t.call(this,e)}return Object(xe.a)(a,[{key:"load",value:function(e,t,a,n){var o=this,r=new Ve.FileLoader(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(function(a){try{t(o.parse(a))}catch(r){n?n(r):console.error(r),o.manager.itemError(e)}}),a,n)}},{key:"parse",value:function(e){function t(e,t,a){for(var n=0,o=e.length;n<o;n++)if(e[n]!==t.getUint8(a+n,!1))return!1;return!0}var a,n=function(e){if("string"===typeof e){for(var t=new Uint8Array(e.length),a=0;a<e.length;a++)t[a]=255&e.charCodeAt(a);return t.buffer||t}return e}(e);return function(e){var a=new DataView(e);if(84+50*a.getUint32(80,!0)===a.byteLength)return!0;for(var n=[115,111,108,105,100],o=0;o<5;o++)if(t(n,a,o))return!1;return!0}(n)?function(e){for(var t,a,n,o,r,i,s,l,c=new DataView(e),u=c.getUint32(80,!0),p=!1,d=0;d<70;d++)1129270351==c.getUint32(d,!1)&&82==c.getUint8(d+4)&&61==c.getUint8(d+5)&&(p=!0,o=new Float32Array(3*u*3),r=c.getUint8(d+6)/255,i=c.getUint8(d+7)/255,s=c.getUint8(d+8)/255,l=c.getUint8(d+9)/255);for(var m=new Ve.BufferGeometry,h=new Float32Array(3*u*3),f=new Float32Array(3*u*3),b=0;b<u;b++){var g=84+50*b,y=c.getFloat32(g,!0),E=c.getFloat32(g+4,!0),v=c.getFloat32(g+8,!0);if(p){var w=c.getUint16(g+48,!0);0===(32768&w)?(t=(31&w)/31,a=(w>>5&31)/31,n=(w>>10&31)/31):(t=r,a=i,n=s)}for(var x=1;x<=3;x++){var S=g+12*x,k=3*b*3+3*(x-1);h[k]=c.getFloat32(S,!0),h[k+1]=c.getFloat32(S+4,!0),h[k+2]=c.getFloat32(S+8,!0),f[k]=y,f[k+1]=E,f[k+2]=v,p&&(o[k]=t,o[k+1]=a,o[k+2]=n)}}return m.setAttribute("position",new Ve.BufferAttribute(h,3)),m.setAttribute("normal",new Ve.BufferAttribute(f,3)),p&&(m.setAttribute("color",new Ve.BufferAttribute(o,3)),m.hasColors=!0,m.alpha=l),m}(n):function(e){for(var t,a=new Ve.BufferGeometry,n=/solid([\s\S]*?)endsolid/g,o=/facet([\s\S]*?)endfacet/g,r=0,i=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,s=new RegExp("vertex"+i+i+i,"g"),l=new RegExp("normal"+i+i+i,"g"),c=[],u=[],p=new Ve.Vector3,d=0,m=0,h=0;null!==(t=n.exec(e));){m=h;for(var f=t[0];null!==(t=o.exec(f));){for(var b=0,g=0,y=t[0];null!==(t=l.exec(y));)p.x=parseFloat(t[1]),p.y=parseFloat(t[2]),p.z=parseFloat(t[3]),g++;for(;null!==(t=s.exec(y));)c.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),u.push(p.x,p.y,p.z),b++,h++;1!==g&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+r),3!==b&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+r),r++}var E=m,v=h-m;a.addGroup(E,v,d),d++}return a.setAttribute("position",new Ve.Float32BufferAttribute(c,3)),a.setAttribute("normal",new Ve.Float32BufferAttribute(u,3)),a}("string"!==typeof(a=e)?Ve.LoaderUtils.decodeText(new Uint8Array(a)):a)}}]),a}(Ve.Loader);a(139);function Qe(){return(Qe=Object(c.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:9990/".concat(t));case 2:return a=e.sent,e.next=5,a.blob();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $e=function(){var e=Object(n.useContext)(We),t=null;e.stl&&(t="string"==typeof e.stl?e.stl:e.stl.name);var a=o.a.useState(!0),r=Object(p.a)(a,2),i=r[0],s=r[1],l=o.a.useState([]),c=Object(p.a)(l,2),u=c[0],d=c[1],m=Object(n.useState)(null),b=Object(p.a)(m,2);return b[0],b[1],E((function(){e.stl&&("string"==typeof e.stl?function(e){return Qe.apply(this,arguments)}(t).then((function(e){var a=new File([e],t);d([{name:t,file:a}])})):d([{name:t,file:e.stl}]))})),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"files-panel"},o.a.createElement(We.Consumer,null,(function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ce.a,{expanded:i,onChange:function(){return s(!i)}},o.a.createElement(_e.a,{expandIcon:o.a.createElement(Ye.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(f.a,null,"Object List")),o.a.createElement(Ae.a,{style:{justifyContent:"center"}},o.a.createElement(h.a,{container:!0,direction:"column",item:!0,xs:!0},u.length>0&&o.a.createElement(h.a,{item:!0,xs:!0},o.a.createElement(Ze.a,{"aria-label":"file-list",style:{width:"100%"}},u.length>0&&u.map((function(t,a){return o.a.createElement(Xe.a,{button:!0,selected:e.selectedFile===t.name,onClick:function(a){return function(t,a){e.setSelectedFile(a.name)}(0,t)},style:{backgroundColor:"#b7b7b7"},key:a},o.a.createElement(Ue.a,null,o.a.createElement(Ke.a,{checked:e.selectedFile===t.name,onChange:function(a){return function(t,a){for(var n in e.objRoot.children){var o=e.objRoot.children[n];o.name===a.name&&e.control.attach(o)}}(0,t)},color:"primary",inputProps:{"aria-label":"secondary checkbox"}})),o.a.createElement(He.a,{primary:t.name}))}))))))))}))))},Je=a(106),et=(a(140),function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new Ve.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ve.MOUSE.ROTATE,MIDDLE:Ve.MOUSE.DOLLY,RIGHT:Ve.MOUSE.PAN},this.touches={ONE:Ve.TOUCH.ROTATE,TWO:Ve.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.listenToKeyEvents=function(e){e.addEventListener("keydown",Z),this._domElementKeyEvents=e},this.saveState=function(){a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object.zoom},this.reset=function(){a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(n),a.update(),s=i.NONE},this.update=function(){var t=new Ve.Vector3,o=(new Ve.Quaternion).setFromUnitVectors(e.up,new Ve.Vector3(0,1,0)),r=o.clone().invert(),h=new Ve.Vector3,f=new Ve.Quaternion,b=2*Math.PI;return function(){var e=a.object.position;t.copy(e).sub(a.target),t.applyQuaternion(o),c.setFromVector3(t),a.autoRotate&&s===i.NONE&&k(2*Math.PI/60/60*a.autoRotateSpeed),a.enableDamping?(c.theta+=u.theta*a.dampingFactor,c.phi+=u.phi*a.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);var g=a.minAzimuthAngle,y=a.maxAzimuthAngle;return isFinite(g)&&isFinite(y)&&(g<-Math.PI?g+=b:g>Math.PI&&(g-=b),y<-Math.PI?y+=b:y>Math.PI&&(y-=b),c.theta=g<=y?Math.max(g,Math.min(y,c.theta)):c.theta>(g+y)/2?Math.max(g,c.theta):Math.min(y,c.theta)),c.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=p,c.radius=Math.max(a.minDistance,Math.min(a.maxDistance,c.radius)),!0===a.enableDamping?a.target.addScaledVector(d,a.dampingFactor):a.target.add(d),t.setFromSpherical(c),t.applyQuaternion(r),e.copy(a.target).add(t),a.object.lookAt(a.target),!0===a.enableDamping?(u.theta*=1-a.dampingFactor,u.phi*=1-a.dampingFactor,d.multiplyScalar(1-a.dampingFactor)):(u.set(0,0,0),d.set(0,0,0)),p=1,!!(m||h.distanceToSquared(a.object.position)>l||8*(1-f.dot(a.object.quaternion))>l)&&(a.dispatchEvent(n),h.copy(a.object.position),f.copy(a.object.quaternion),m=!1,!0)}}(),this.dispose=function(){a.domElement.removeEventListener("contextmenu",H),a.domElement.removeEventListener("pointerdown",L),a.domElement.removeEventListener("wheel",G),a.domElement.removeEventListener("touchstart",X),a.domElement.removeEventListener("touchend",K),a.domElement.removeEventListener("touchmove",U),a.domElement.ownerDocument.removeEventListener("pointermove",D),a.domElement.ownerDocument.removeEventListener("pointerup",Y),null!==a._domElementKeyEvents&&a._domElementKeyEvents.removeEventListener("keydown",Z)};var a=this,n={type:"change"},o={type:"start"},r={type:"end"},i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=i.NONE,l=1e-6,c=new Ve.Spherical,u=new Ve.Spherical,p=1,d=new Ve.Vector3,m=!1,h=new Ve.Vector2,f=new Ve.Vector2,b=new Ve.Vector2,g=new Ve.Vector2,y=new Ve.Vector2,E=new Ve.Vector2,v=new Ve.Vector2,w=new Ve.Vector2,x=new Ve.Vector2;function S(){return Math.pow(.95,a.zoomSpeed)}function k(e){u.theta-=e}function T(e){u.phi-=e}var O=function(){var e=new Ve.Vector3;return function(t,a){e.setFromMatrixColumn(a,0),e.multiplyScalar(-t),d.add(e)}}(),j=function(){var e=new Ve.Vector3;return function(t,n){!0===a.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(a.object.up,e)),e.multiplyScalar(t),d.add(e)}}(),C=function(){var e=new Ve.Vector3;return function(t,n){var o=a.domElement;if(a.object.isPerspectiveCamera){var r=a.object.position;e.copy(r).sub(a.target);var i=e.length();i*=Math.tan(a.object.fov/2*Math.PI/180),O(2*t*i/o.clientHeight,a.object.matrix),j(2*n*i/o.clientHeight,a.object.matrix)}else a.object.isOrthographicCamera?(O(t*(a.object.right-a.object.left)/a.object.zoom/o.clientWidth,a.object.matrix),j(n*(a.object.top-a.object.bottom)/a.object.zoom/o.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}}();function _(e){a.object.isPerspectiveCamera?p/=e:a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom*e)),a.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function A(e){a.object.isPerspectiveCamera?p*=e:a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/e)),a.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function N(e){h.set(e.clientX,e.clientY)}function z(e){g.set(e.clientX,e.clientY)}function B(e){if(1==e.touches.length)h.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);h.set(t,a)}}function M(e){if(1==e.touches.length)g.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);g.set(t,a)}}function P(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+a*a);v.set(0,n)}function R(e){if(1==e.touches.length)f.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);f.set(t,n)}b.subVectors(f,h).multiplyScalar(a.rotateSpeed);var o=a.domElement;k(2*Math.PI*b.x/o.clientHeight),T(2*Math.PI*b.y/o.clientHeight),h.copy(f)}function I(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,n)}E.subVectors(y,g).multiplyScalar(a.panSpeed),C(E.x,E.y),g.copy(y)}function F(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);w.set(0,o),x.set(0,Math.pow(w.y/v.y,a.zoomSpeed)),_(x.y),v.copy(w)}function L(e){if(!1!==a.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var t;switch(e.preventDefault(),a.domElement.focus?a.domElement.focus():window.focus(),e.button){case 0:t=a.mouseButtons.LEFT;break;case 1:t=a.mouseButtons.MIDDLE;break;case 2:t=a.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Ve.MOUSE.DOLLY:if(!1===a.enableZoom)return;!function(e){v.set(e.clientX,e.clientY)}(e),s=i.DOLLY;break;case Ve.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enablePan)return;z(e),s=i.PAN}else{if(!1===a.enableRotate)return;N(e),s=i.ROTATE}break;case Ve.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enableRotate)return;N(e),s=i.ROTATE}else{if(!1===a.enablePan)return;z(e),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&(a.domElement.ownerDocument.addEventListener("pointermove",D),a.domElement.ownerDocument.addEventListener("pointerup",Y),a.dispatchEvent(o))}(e)}}function D(e){if(!1!==a.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===a.enabled)return;switch(e.preventDefault(),s){case i.ROTATE:if(!1===a.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),b.subVectors(f,h).multiplyScalar(a.rotateSpeed);var t=a.domElement;k(2*Math.PI*b.x/t.clientHeight),T(2*Math.PI*b.y/t.clientHeight),h.copy(f),a.update()}(e);break;case i.DOLLY:if(!1===a.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),x.subVectors(w,v),x.y>0?_(S()):x.y<0&&A(S()),v.copy(w),a.update()}(e);break;case i.PAN:if(!1===a.enablePan)return;!function(e){y.set(e.clientX,e.clientY),E.subVectors(y,g).multiplyScalar(a.panSpeed),C(E.x,E.y),g.copy(y),a.update()}(e)}}(e)}}function Y(e){switch(e.pointerType){case"mouse":case"pen":!function(e){if(a.domElement.ownerDocument.removeEventListener("pointermove",D),a.domElement.ownerDocument.removeEventListener("pointerup",Y),!1===a.enabled)return;a.dispatchEvent(r),s=i.NONE}()}}function G(e){!1===a.enabled||!1===a.enableZoom||s!==i.NONE&&s!==i.ROTATE||(e.preventDefault(),a.dispatchEvent(o),function(e){e.deltaY<0?A(S()):e.deltaY>0&&_(S()),a.update()}(e),a.dispatchEvent(r))}function Z(e){!1!==a.enabled&&!1!==a.enablePan&&function(e){var t=!1;switch(e.code){case a.keys.UP:C(0,a.keyPanSpeed),t=!0;break;case a.keys.BOTTOM:C(0,-a.keyPanSpeed),t=!0;break;case a.keys.LEFT:C(a.keyPanSpeed,0),t=!0;break;case a.keys.RIGHT:C(-a.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),a.update())}(e)}function X(e){if(!1!==a.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(a.touches.ONE){case Ve.TOUCH.ROTATE:if(!1===a.enableRotate)return;B(e),s=i.TOUCH_ROTATE;break;case Ve.TOUCH.PAN:if(!1===a.enablePan)return;M(e),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(a.touches.TWO){case Ve.TOUCH.DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;!function(e){a.enableZoom&&P(e),a.enablePan&&M(e)}(e),s=i.TOUCH_DOLLY_PAN;break;case Ve.TOUCH.DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;!function(e){a.enableZoom&&P(e),a.enableRotate&&B(e)}(e),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&a.dispatchEvent(o)}}function U(e){if(!1!==a.enabled)switch(e.preventDefault(),s){case i.TOUCH_ROTATE:if(!1===a.enableRotate)return;R(e),a.update();break;case i.TOUCH_PAN:if(!1===a.enablePan)return;I(e),a.update();break;case i.TOUCH_DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;!function(e){a.enableZoom&&F(e),a.enablePan&&I(e)}(e),a.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;!function(e){a.enableZoom&&F(e),a.enableRotate&&R(e)}(e),a.update();break;default:s=i.NONE}}function K(e){!1!==a.enabled&&(a.dispatchEvent(r),s=i.NONE)}function H(e){!1!==a.enabled&&e.preventDefault()}a.domElement.addEventListener("contextmenu",H),a.domElement.addEventListener("pointerdown",L),a.domElement.addEventListener("wheel",G),a.domElement.addEventListener("touchstart",X),a.domElement.addEventListener("touchend",K),a.domElement.addEventListener("touchmove",U),this.update()});(et.prototype=Object.create(Ve.EventDispatcher.prototype)).constructor=et;var tt=function(e,t){et.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=Ve.MOUSE.PAN,this.mouseButtons.RIGHT=Ve.MOUSE.ROTATE,this.touches.ONE=Ve.TOUCH.PAN,this.touches.TWO=Ve.TOUCH.DOLLY_ROTATE};(tt.prototype=Object.create(Ve.EventDispatcher.prototype)).constructor=tt;var at=a(211),nt=a(212),ot=a(213),rt=a(214),it=a(141)(Ve);var st=function(e){Object(Se.a)(a,e);var t=Object(ke.a)(a);function a(e){var n;return Object(we.a)(this,a),(n=t.call(this,e)).posRotScale=function(e){switch(n.context.setTransformValue(e),e){case"position":n.control.enabled=!0,n.control.setMode("translate"),n.control.showX=!0,n.control.showY=!0,n.control.showZ=!0;break;case"rotation":n.control.enabled=!0,n.control.setMode("rotate"),n.control.showX=!0,n.control.showY=!0,n.control.showZ=!0;break;case"scale":n.control.enabled=!0,n.control.setMode("scale"),n.control.showX=!0,n.control.showY=!0,n.control.showZ=!0;break;case"none":n.control.enabled=!1,n.control.showX=!1,n.control.showY=!1,n.control.showZ=!1}},n.canvas=o.a.createRef(),n.canvasBg=null,n.rotationTarget=0,n.lastTime=null,n.renderer=null,n.scene=null,n.control=null,n.cameraHelper=null,n.cameraPivot=null,n.camera=null,n.zTarget=0,n.gridObj=null,n.magnetObj=null,n.planeObj=null,n.boundsObj=null,n.showMagnetBed=!1,n.showBounds=!1,n.showGrid=!1,n.viewControls=null,n}return Object(xe.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){console.log("test")}},{key:"componentDidMount",value:function(){this.assignCanvas()}},{key:"assignCanvas",value:function(){var e=this.canvas.current.parentElement;this.canvas.current.width=e.clientWidth,this.canvas.current.height=e.clientHeight,this.initCanvas(this.canvas.current,this.canvas.current.width,this.canvas.current.height)}},{key:"initCanvas",value:function(e,t,a){var n=this,o=new Ve.Scene,r=new Ve.PerspectiveCamera(75,t/a,.1,1e3),i=new Ve.WebGLRenderer({canvas:e});i.setSize(t,a),o.background=new Ve.Color(13750737);new Je.a(i,o,r);var s=new Ve.Mesh(new Ve.PlaneGeometry(800,800,1,1),new Ve.MeshBasicMaterial({color:13750737}));o.add(s),this.planeObj=s;var l=(new Ve.TextureLoader).load("./magnet.png"),c=new Ve.Mesh(new Ve.PlaneGeometry(341.3,341.3,1,1),new Ve.MeshBasicMaterial({map:l,transparent:!0}));c.position.y=-10,c.position.z=-1,o.add(c),this.magnetObj=c,this.magnetObj.visible=!1;var u=new Ve.Path;u.moveTo(-150,-150),u.lineTo(150,-150),u.lineTo(150,150),u.lineTo(-150,150),u.lineTo(-150,-150);var p=new Ve.Line((new Ve.BufferGeometry).setFromPoints(u.getPoints()),new Ve.LineBasicMaterial({color:16711680,linewidth:1}));p.position.z=.25,o.add(p),p.visible=!1,this.boundsObj=p;var d=new Ve.GridHelper(300,30,5592405,5592405);d.rotation.set(Math.PI/2,0,0),d.position.set(0,0,0),o.add(d),d.visible=!1,this.gridObj=d;this.zTarget,this.rotationTarget,this.context;var m=new Ve.BoxGeometry(300,300,400,10,10,10),h=new Ve.EdgesGeometry(m),f=new Ve.LineSegments(h,new Ve.LineBasicMaterial({color:5592405}));f.position.z=200,o.add(f),r.up=new Ve.Vector3(0,0,1);var b=new it(r,i.domElement);this.viewControls=new et(r,i.domElement);var g=this.viewControls;r.position.y=-400,r.position.z=200,g.update();var y=null,E=this.context;b.enabled=!1,b.showX=!1,b.showY=!1,b.showZ=!1,b.setSize(2),g.maxDistance=900;var v=new Ve.Group,w=new qe;if(this.context.stl)if("string"==typeof this.context.stl)this.context.setFileName(this.context.stl),w.load("http://localhost:9990/".concat(this.context.stl),(function(e){var t=new Ve.MeshPhongMaterial({color:16777215,specular:1118481,shininess:200});(y=new Ve.Mesh(e,t)).name=n.context.stl,y.position.set(0,0,0),y.geometry.center(),b.attach(y),y.position.z=.5*(new Ve.Box3).setFromObject(y).getSize().z,b.addEventListener("objectChange",(function(e){y.position.z=.5*(new Ve.Box3).setFromObject(y).getSize().z})),b.addEventListener("mouseDown",(function(){g.enabled=!1})),b.addEventListener("mouseUp",(function(){g.enabled=!0})),b.enabled=!1,b.showX=!1,b.showY=!1,b.showZ=!1,y.on("click",(function(e){console.log("clicked "+y.name+"!"),b.attach(y),b.enabled=!0,E.setSelectedFile(y.name),b.showX=!0,b.showY=!0,b.showZ=!0,"translate"==b.mode?E.setTransformValue("position"):"rotate"==b.mode?E.setTransformValue("rotation"):(console.log(b.mode),E.setTransformValue(b.mode))})),y.on("touchend",(function(e){console.log("touched "+y.name+"!"),b.attach(y),b.enabled=!0,E.setSelectedFile(y.name),b.showX=!0,b.showY=!0,b.showZ=!0,"translate"==b.mode?E.setTransformValue("position"):"rotate"==b.mode?E.setTransformValue("rotation"):(console.log(b.mode),E.setTransformValue(b.mode))})),v.add(y),n.context.setModifiedStl(y),o.add(b)}));else{var x=new FileReader,S=this.context;S.setFileName(this.context.stl.name),x.addEventListener("load",(function(e){var t=e.target.result,a=(new qe).parse(t);console.log(t),a.sourceType="stl",a.sourceFile=t;var n=new Ve.MeshPhongMaterial({color:16777215,specular:1118481,shininess:200});(y=new Ve.Mesh(a,n)).name=S.stl.name,y.position.set(0,1,0),y.rotation.set(0,0,0),y.scale.set(1,1,1),y.castShadow=!1,y.receiveShadow=!1,y.geometry.center(),b.attach(y),b.enabled=!0,y.position.z=.5*(new Ve.Box3).setFromObject(y).getSize().z,b.addEventListener("objectChange",(function(e){y.position.z=.5*(new Ve.Box3).setFromObject(y).getSize().z})),b.addEventListener("mouseDown",(function(){g.enabled=!1})),b.addEventListener("mouseUp",(function(){g.enabled=!0})),y.on("click",(function(e){console.log("clicked "+y.name+"!"),b.attach(y),b.enabled=!0,S.setSelectedFile(y.name),b.showX=!0,b.showY=!0,b.showZ=!0,"translate"==b.mode?S.setTransformValue("position"):"rotate"==b.mode?S.setTransformValue("rotation"):(console.log(b.mode),S.setTransformValue(b.mode))})),y.on("touchend",(function(e){console.log("touched "+y.name+"!"),b.attach(y),b.enabled=!0,S.setSelectedFile(y.name),b.showX=!0,b.showY=!0,b.showZ=!0,"translate"==b.mode?S.setTransformValue("position"):"rotate"==b.mode?S.setTransformValue("rotation"):(console.log(b.mode),S.setTransformValue(b.mode))})),v.add(y),S.setModifiedStl(y),o.add(b)}),!1),x.readAsBinaryString(this.context.stl)}else b.addEventListener("mouseDown",(function(){g.enabled=!1})),b.addEventListener("mouseUp",(function(){g.enabled=!0}));o.add(v),o.add(b),o.add(r),o.add(new Ve.HemisphereLight(16777215,1119539)),o.on("click",(function(e){console.log(e);var t=0;for(var a in e.intersects){var n=e.intersects[a].object;-1!==v.children.indexOf(n)&&t++}0==t&&(console.log("not a printable object!"),b.detach(),b.enabled=!1,E.setSelectedFile(null))})),o.on("touchend",(function(e){console.log(e);var t=0;for(var a in e.intersects){var n=e.intersects[a].object;-1!==v.children.indexOf(n)&&t++}0==t&&(console.log("not a printable object!"),b.detach(),b.enabled=!1,E.setSelectedFile(null))})),this.camera=r,this.renderer=i,this.scene=o,this.control=b,this.context.setControl(this.control),this.context.setScene(this.scene),this.context.setCamera(this.camera),this.context.setObjRoot(v),this.renderFrame()}},{key:"renderFrame",value:function(){requestAnimationFrame(this.renderFrame.bind(this)),this.viewControls.update(),this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var e=this,t=this.context;try{this.viewControls.update(),this.boundsObj.visible=t.showBounds,this.planeObj.visible=!t.showMagnet,this.magnetObj.visible=t.showMagnet,this.gridObj.visible=t.showGrid}catch(a){}return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"transform-panel"},o.a.createElement(at.a,{orientation:"vertical",color:"primary","aria-label":"vertical outlined primary button group"},o.a.createElement(b.a,{onClick:function(){return e.posRotScale("scale")},style:{backgroundColor:"scale"==this.context.transformValue?"#0071ce":"#fff",color:"scale"==this.context.transformValue?"#fff":"#5f6368",width:120,height:45}},o.a.createElement(nt.a,{style:{left:-10,position:"relative"}})," Scale"),o.a.createElement(b.a,{onClick:function(){return e.posRotScale("position")},style:{backgroundColor:"position"==this.context.transformValue?"#0071ce":"#fff",color:"position"==this.context.transformValue?"#fff":"#5f6368",width:120,height:45}},o.a.createElement(ot.a,{style:{left:-12,position:"relative"}})," Move"),o.a.createElement(b.a,{onClick:function(){return e.posRotScale("rotation")},style:{backgroundColor:"rotation"==this.context.transformValue?"#0071ce":"#fff",color:"rotation"==this.context.transformValue?"#fff":"#5f6368",width:120,height:45}},o.a.createElement(rt.a,{style:{left:-6,position:"relative"}})," Rotate"))),o.a.createElement("div",{className:"render-canvas-bg"},o.a.createElement("canvas",{id:"three-scene",className:"render-canvas",ref:this.canvas})))}}]),a}(n.Component);st.contextType=We;var lt=st,ct=a(95),ut=a(286),pt=(a(215),a(216),a(217),a(218),a(219)),dt=a(220);a(221),a(142);a(143);var mt=function(){var e=o.a.useState(!0),t=Object(p.a)(e,2),a=t[0],n=t[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"settingspanel"},o.a.createElement(We.Consumer,null,(function(e){var t=e.showBounds,r=e.setShowBounds,i=e.showMagnet,s=e.setShowMagnet,l=e.showGrid,c=e.setShowGrid;return o.a.createElement(Ce.a,{expanded:a,onChange:function(){return n(!a)}},o.a.createElement(_e.a,{expandIcon:o.a.createElement(Ye.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(f.a,null,"Display Settings")),o.a.createElement(Ae.a,null,o.a.createElement(Ne.a,{component:"fieldset"},o.a.createElement(Pe.a,null,o.a.createElement(Re.a,{control:o.a.createElement(Ie.a,{checked:i,onChange:function(e){s(e.target.checked)}}),label:"Magnetic Print Bed"}),o.a.createElement(Re.a,{control:o.a.createElement(Ie.a,{checked:t,onChange:function(e){r(e.target.checked)}}),label:"Show Printer Bounds"}),o.a.createElement(Re.a,{control:o.a.createElement(Ie.a,{checked:l,onChange:function(e){c(e.target.checked)}}),label:"Show Grid"})))))}))))};if("undefined"==typeof ht)var ht=a(6);var ft=function(){};ft.prototype={constructor:ft,parse:function(e,t){void 0===t&&(t={});var a,n=void 0!==t.binary&&t.binary,o=[],r=0;e.traverse((function(e){if(e.isMesh){var t=e.geometry;if(!0!==t.isBufferGeometry)throw new Error("THREE.STLExporter: Geometry is not of type THREE.BufferGeometry.");var a=t.index,n=t.getAttribute("position");r+=null!==a?a.count/3:n.count/3,o.push({object3d:e,geometry:t})}}));var i=80;if(!0===n){var s=new ArrayBuffer(2*r+3*r*4*4+80+4);(a=new DataView(s)).setUint32(i,r,!0),i+=4}else a="",a+="solid exported\n";for(var l=new ht.Vector3,c=new ht.Vector3,u=new ht.Vector3,p=new ht.Vector3,d=new ht.Vector3,m=new ht.Vector3,h=0,f=o.length;h<f;h++){var b=o[h].object3d,g=o[h].geometry,y=g.index,E=g.getAttribute("position");if(null!==y)for(var v=0;v<y.count;v+=3){w(y.getX(v+0),y.getX(v+1),y.getX(v+2),E,b)}else for(v=0;v<E.count;v+=3){w(v+0,v+1,v+2,E,b)}}return!1===n&&(a+="endsolid exported\n"),a;function w(e,t,o,r,s){l.fromBufferAttribute(r,e),c.fromBufferAttribute(r,t),u.fromBufferAttribute(r,o),!0===s.isSkinnedMesh&&(s.boneTransform(e,l),s.boneTransform(t,c),s.boneTransform(o,u)),l.applyMatrix4(s.matrixWorld),c.applyMatrix4(s.matrixWorld),u.applyMatrix4(s.matrixWorld),function(e,t,o){p.subVectors(o,t),d.subVectors(e,t),p.cross(d).normalize(),m.copy(p).normalize(),!0===n?(a.setFloat32(i,m.x,!0),i+=4,a.setFloat32(i,m.y,!0),i+=4,a.setFloat32(i,m.z,!0),i+=4):(a+="\tfacet normal "+m.x+" "+m.y+" "+m.z+"\n",a+="\t\touter loop\n")}(l,c,u),x(l),x(c),x(u),!0===n?(a.setUint16(i,0,!0),i+=2):(a+="\t\tendloop\n",a+="\tendfacet\n")}function x(e){!0===n?(a.setFloat32(i,e.x,!0),i+=4,a.setFloat32(i,e.y,!0),i+=4,a.setFloat32(i,e.z,!0),i+=4):a+="\t\t\tvertex "+e.x+" "+e.y+" "+e.z+"\n"}}};var bt=ft;function gt(e,t){switch(t){case"petg_good":return e.metadata.preferred_quality_type="fast",Ot(e.settings.resolution.children.layer_height,.32),Ot(e.settings.speed.children.speed_print,50),Ot(e.settings.speed.children.speed_print.children.speed_infill,50),Ot(e.settings.speed.children.speed_print.children.speed_wall,25),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_0,25),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_x,50),Ot(e.settings.travel.children.retraction_enable,!0),Ot(e.settings.material.children.default_material_print_temperature,245),Ot(e.settings.material.children.material_print_temperature,245),Ot(e.settings.material.children.material_print_temperature_layer_0,245),Ot(e.settings.material.children.material_initial_print_temperature,245),Ot(e.settings.material.children.material_final_print_temperature,245),Ot(e.settings.material.children.default_material_bed_temperature,70),Ot(e.settings.material.children.material_bed_temperature,70),e;case"tpu_good":return e.metadata.preferred_quality_type="fast",Ot(e.settings.resolution.children.layer_height,.32),Ot(e.settings.speed.children.speed_print,20),Ot(e.settings.speed.children.speed_print.children.speed_infill,20),Ot(e.settings.speed.children.speed_print.children.speed_wall,20),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_0,20),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_x,20),Ot(e.settings.travel.children.retraction_enable,!1),Ot(e.settings.material.children.default_material_print_temperature,230),Ot(e.settings.material.children.material_print_temperature,230),Ot(e.settings.material.children.material_print_temperature_layer_0,230),Ot(e.settings.material.children.material_initial_print_temperature,230),Ot(e.settings.material.children.material_final_print_temperature,230),Ot(e.settings.material.children.default_material_bed_temperature,60),Ot(e.settings.material.children.material_bed_temperature,60),e;case"pla_good":return e.metadata.preferred_quality_type="fast",Ot(e.settings.resolution.children.layer_height,.32),Ot(e.settings.speed.children.speed_print,60),Ot(e.settings.speed.children.speed_print.children.speed_infill,60),Ot(e.settings.speed.children.speed_print.children.speed_wall,60),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_0,60),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_x,60),Ot(e.settings.travel.children.retraction_enable,!0),Ot(e.settings.material.children.default_material_print_temperature,220),Ot(e.settings.material.children.material_print_temperature,220),Ot(e.settings.material.children.material_print_temperature_layer_0,220),Ot(e.settings.material.children.material_initial_print_temperature,220),Ot(e.settings.material.children.material_final_print_temperature,220),Ot(e.settings.material.children.default_material_bed_temperature,50),Ot(e.settings.material.children.material_bed_temperature,50),e;case"petg_better":return e.metadata.preferred_quality_type="normal",Ot(e.settings.resolution.children.layer_height,.16),Ot(e.settings.speed.children.speed_print,50),Ot(e.settings.speed.children.speed_print.children.speed_infill,50),Ot(e.settings.speed.children.speed_print.children.speed_wall,25),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_0,25),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_x,50),Ot(e.settings.travel.children.retraction_enable,!0),Ot(e.settings.material.children.default_material_print_temperature,245),Ot(e.settings.material.children.material_print_temperature,245),Ot(e.settings.material.children.material_print_temperature_layer_0,245),Ot(e.settings.material.children.material_initial_print_temperature,245),Ot(e.settings.material.children.material_final_print_temperature,245),Ot(e.settings.material.children.default_material_bed_temperature,70),Ot(e.settings.material.children.material_bed_temperature,70),e;case"tpu_better":return e.metadata.preferred_quality_type="normal",Ot(e.settings.resolution.children.layer_height,.16),Ot(e.settings.speed.children.speed_print,20),Ot(e.settings.speed.children.speed_print.children.speed_infill,20),Ot(e.settings.speed.children.speed_print.children.speed_wall,20),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_0,20),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_x,20),Ot(e.settings.travel.children.retraction_enable,!1),Ot(e.settings.material.children.default_material_print_temperature,230),Ot(e.settings.material.children.material_print_temperature,230),Ot(e.settings.material.children.material_print_temperature_layer_0,230),Ot(e.settings.material.children.material_initial_print_temperature,230),Ot(e.settings.material.children.material_final_print_temperature,230),Ot(e.settings.material.children.default_material_bed_temperature,60),Ot(e.settings.material.children.material_bed_temperature,60),e;case"pla_better":return e.metadata.preferred_quality_type="normal",Ot(e.settings.resolution.children.layer_height,.16),Ot(e.settings.speed.children.speed_print,50),Ot(e.settings.speed.children.speed_print.children.speed_infill,50),Ot(e.settings.speed.children.speed_print.children.speed_wall,25),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_0,25),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_x,50),Ot(e.settings.travel.children.retraction_enable,!0),Ot(e.settings.material.children.default_material_print_temperature,220),Ot(e.settings.material.children.material_print_temperature,220),Ot(e.settings.material.children.material_print_temperature_layer_0,220),Ot(e.settings.material.children.material_initial_print_temperature,220),Ot(e.settings.material.children.material_final_print_temperature,220),Ot(e.settings.material.children.default_material_bed_temperature,50),Ot(e.settings.material.children.material_bed_temperature,50),e;case"petg_best":return e.metadata.preferred_quality_type="best",Ot(e.settings.resolution.children.layer_height,.08),Ot(e.settings.speed.children.speed_print,50),Ot(e.settings.speed.children.speed_print.children.speed_infill,50),Ot(e.settings.speed.children.speed_print.children.speed_wall,25),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_0,25),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_x,50),Ot(e.settings.travel.children.retraction_enable,!0),Ot(e.settings.material.children.default_material_print_temperature,245),Ot(e.settings.material.children.material_print_temperature,245),Ot(e.settings.material.children.material_print_temperature_layer_0,245),Ot(e.settings.material.children.material_initial_print_temperature,245),Ot(e.settings.material.children.material_final_print_temperature,245),Ot(e.settings.material.children.default_material_bed_temperature,70),Ot(e.settings.material.children.material_bed_temperature,70),e;case"tpu_best":return e.metadata.preferred_quality_type="best",Ot(e.settings.resolution.children.layer_height,.08),Ot(e.settings.speed.children.speed_print,20),Ot(e.settings.speed.children.speed_print.children.speed_infill,20),Ot(e.settings.speed.children.speed_print.children.speed_wall,20),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_0,20),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_x,20),Ot(e.settings.travel.children.retraction_enable,!1),Ot(e.settings.material.children.default_material_print_temperature,230),Ot(e.settings.material.children.material_print_temperature,230),Ot(e.settings.material.children.material_print_temperature_layer_0,230),Ot(e.settings.material.children.material_initial_print_temperature,230),Ot(e.settings.material.children.material_final_print_temperature,230),Ot(e.settings.material.children.default_material_bed_temperature,60),Ot(e.settings.material.children.material_bed_temperature,60),e;case"pla_best":return e.metadata.preferred_quality_type="best",Ot(e.settings.resolution.children.layer_height,.08),Ot(e.settings.speed.children.speed_print,50),Ot(e.settings.speed.children.speed_print.children.speed_infill,50),Ot(e.settings.speed.children.speed_print.children.speed_wall,25),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_0,25),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_x,50),Ot(e.settings.travel.children.retraction_enable,!0),Ot(e.settings.material.children.default_material_print_temperature,220),Ot(e.settings.material.children.material_print_temperature,220),Ot(e.settings.material.children.material_print_temperature_layer_0,220),Ot(e.settings.material.children.material_initial_print_temperature,220),Ot(e.settings.material.children.material_final_print_temperature,220),Ot(e.settings.material.children.default_material_bed_temperature,50),Ot(e.settings.material.children.material_bed_temperature,50),e;default:return e}}function yt(e,t){return Ot(e.settings.material.children.default_material_print_temperature,t),Ot(e.settings.material.children.material_print_temperature,t),Ot(e.settings.material.children.material_print_temperature_layer_0,t),Ot(e.settings.material.children.material_initial_print_temperature,t),Ot(e.settings.material.children.material_final_print_temperature,t),e}function Et(e,t){return Ot(e.settings.material.children.default_material_bed_temperature,t),Ot(e.settings.material.children.material_bed_temperature,t),e}function vt(e,t){return Ot(e.settings.infill.children.infill_pattern,t),e.settings.infill.children.infill_pattern.value="\"'lines' if infill_sparse_density > 25 else '".concat(t,"'\""),e.settings.infill.children.infill_pattern.default_value=t,e}function wt(e,t){return Ot(e.settings.material.children.material_flow,t),e}function xt(e,t){return Ot(e.settings.platform_adhesion.children.adhesion_type,t),e}function St(e,t){return Ot(e.settings.speed.children.speed_print,t),Ot(e.settings.speed.children.speed_print.children.speed_infill,t),Ot(e.settings.speed.children.speed_print.children.speed_wall,t),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_0,t),Ot(e.settings.speed.children.speed_print.children.speed_wall.children.speed_wall_x,t),e}function kt(e,t){return Ot(e.settings.support.children.support_structure,t),e}function Tt(e,t){return Ot(e.settings.support.children.support_pattern,t),e}function Ot(e,t){e.value=t,e.default_value=t,function(e,t){if(e.hasOwnProperty("children"))for(var a in e.children)Ot(e.children[a],t)}(e,t)}function jt(e,t){if(0===t)e.settings.infill.children.infill_sparse_density.children.infill_line_distance.value=0,e.settings.infill.children.infill_sparse_density.children.infill_line_distance.default_value=0;else{var a=function(e){switch(e){case"triangles":case"trihexagon":case"cubic":case"cubicsubdiv":return 3;case"grid":case"tetrahedral":case"quarter_cubic":return 2;default:return 1}}(e.settings.infill.children.infill_pattern.default_value),n=100*e.settings.resolution.children.line_width.children.infill_line_width.default_value/t*a;e.settings.infill.children.infill_sparse_density.children.infill_line_distance.value=n,e.settings.infill.children.infill_sparse_density.children.infill_line_distance.default_value=n}return e}function Ct(e){var t="";for(var a in e){var n=e[a],o=/.+\.(stl)$/gi.exec(n.name);o&&(t+=o[0]+"-")}return t=t.slice(0,-1),t+=".stl"}var _t=function(e){Object(Se.a)(a,e);var t=Object(ke.a)(a);function a(e){var n;return Object(we.a)(this,a),(n=t.call(this,e)).state={shown:e.shown||!1,loading:!1,filament:"pla",quality:"good",infill:20,infill_type:"grid",flow:100,stick_type:"skirt",nozzle:220,bed:50,speed:50,supports:!1,vase:!1,structure:"normal",support_type:"grid",file:e.file,camZoom:0,camRotation:0,camZ:0,camera:null,control:null,scene:null,objRoot:null,showMagnet:!0,showBounds:!0,showGrid:!0,stl:e.file,modifiedStl:null,selectedFile:null,transformValue:"position",fileName:"file.stl",drawerOpen:!0,slicerOpen:!0,savedFile:!1,stlName:"",userMode:"beginner",fillMode:"normal",infill_patterns:{grid:"Grid"},stick_patterns:{skirt:"Skirt"},structures:{normal:"Normal"},support_types:{grid:"Grid"}},n.defaultSettings={},n}return Object(xe.a)(a,[{key:"componentDidMount",value:function(){this.getSettings(),this.setState({userMode:N("userMode")}),"beginner"==N("userMode")&&this.setState({filament:"pla"})}},{key:"handleFileSaveOpen",value:function(){this.setState({savedFile:!0})}},{key:"getSettings",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:2127/api/v1/settings",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:this.defaultSettings=e.sent,this.defaultSettings.hasOwnProperty("settings")&&this.defaultSettings.settings.hasOwnProperty("infill")&&this.defaultSettings.settings.infill.children.infill_pattern.hasOwnProperty("options")&&this.setState({infill_patterns:this.defaultSettings.settings.infill.children.infill_pattern.options}),this.defaultSettings.hasOwnProperty("settings")&&this.defaultSettings.settings.hasOwnProperty("platform_adhesion")&&this.defaultSettings.settings.platform_adhesion.children.adhesion_type.hasOwnProperty("options")&&this.setState({stick_patterns:this.defaultSettings.settings.platform_adhesion.children.adhesion_type.options}),this.defaultSettings.hasOwnProperty("settings")&&this.defaultSettings.settings.hasOwnProperty("support")&&this.defaultSettings.settings.support.children.support_pattern.hasOwnProperty("options")&&this.setState({support_types:this.defaultSettings.settings.support.children.support_pattern.options}),this.defaultSettings.hasOwnProperty("settings")&&this.defaultSettings.settings.hasOwnProperty("support")&&this.defaultSettings.settings.support.children.support_structure.hasOwnProperty("options")&&this.setState({structures:this.defaultSettings.settings.support.children.support_structure.options});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSliceAndStartPrint",value:function(){var e=Object(c.a)(l.a.mark((function e(t,a){var n,o,r,i,s,c,u,p,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),n=this.defaultSettings,o=this.state.filament+"_"+this.state.quality,"beginner"==N("userMode")&&(o="pla_"+this.state.quality,n=vt(n=Tt(n=kt(n=St(n=xt(n=wt(n=Et(n=yt(n,this.state.nozzle),this.state.bed),this.state.flow),this.state.stick_type),this.state.speed),this.state.structure),this.state.support_type),this.state.infill_type)),(n=jt(n=gt(n,o),this.state.infill)).settings.infill.children.infill_sparse_density.value=this.state.infill,n.settings.infill.children.infill_sparse_density.default_value=this.state.infill,n.settings.support.children.support_enable.value=this.state.supports,n.settings.support.children.support_enable.default_value=this.state.supports,n.settings.blackmagic.children.magic_spiralize.value=this.state.vase,n.settings.blackmagic.children.magic_spiralize.default_value=this.state.vase,"beginner"==N("userMode")?(n.settings.blackmagic.children.magic_spiralize.value=0,n.settings.blackmagic.children.magic_spiralize.default_value=0):n=vt(n,this.state.infill_type),"expert"==N("userMode")&&(n=Tt(n=kt(n=St(n=xt(n=wt(n=Et(n=yt(n,this.state.nozzle),this.state.bed),this.state.flow),this.state.stick_type),this.state.speed),this.state.structure),this.state.support_type)),r=new FormData,i=new bt,s=i.parse(this.state.modifiedStl),"application/vnd.ms-pki.stl",c=new Blob([s],{type:"application/vnd.ms-pki.stl"}),u=Ct(t),p=this.state.stlName?this.state.stlName+".stl":u,d=new File([c],p),r.append("file",d),r.append("json",JSON.stringify(n)),e.next=26,fetch("http://localhost:2127/api/v1/files/".concat(p),{method:"POST",body:r});case 26:if(200!==e.sent.status){e.next=37;break}if(!a){e.next=34;break}return e.next=31,fetch("http://localhost:2127/api/v1/job/".concat(p),{method:"POST",headers:{"Content-Type":"application/json"}});case 31:this.props.onClose(),e.next=35;break;case 34:this.handleFileSaveOpen();case 35:e.next=38;break;case 37:this.props.onFailure&&this.props.onFailure();case 38:this.setState({loading:!1});case 39:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,a=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Te.a,{open:this.state.shown,onClose:function(){e.props.onClose(),e.setState({shown:!1})},disableBackdropClick:!0},o.a.createElement("div",{className:"modal"},o.a.createElement(b.a,{onClick:function(){e.props.onClose(),e.setState({shown:!1})},color:"primary",className:t.settingsBack,autoFocus:!0},o.a.createElement(Fe.a,null),"Exit Viewer"),o.a.createElement(Oe.a,{color:"secondary",className:t.settingsDrawer,"aria-label":"print-settings",onClick:function(){return e.setState({drawerOpen:!e.state.drawerOpen})}},this.state.drawerOpen?o.a.createElement(Le.a,null):o.a.createElement(De.a,null)),o.a.createElement(h.a,{container:!0,className:t.mainContainer},o.a.createElement(h.a,{item:!0},o.a.createElement(We.Provider,{value:{camRotation:this.state.camRotation,camZoom:this.state.camZoom,camZ:this.state.camZ,camera:this.state.camera,showMagnet:this.state.showMagnet,showBounds:this.state.showBounds,showGrid:this.state.showGrid,stl:this.props.file,transformValue:this.state.transformValue,modifiedStl:this.state.modifiedStl,fileName:this.state.fileName,control:this.state.control,scene:this.state.scene,objRoot:this.state.objRoot,selectedFile:this.state.selectedFile,setModifiedStl:function(t){e.setState({modifiedStl:t})},setFileName:function(t){e.setState({fileName:t})},addRotation:function(e){!function(e){a.setState({camRotation:a.state.camRotation+e})}(e)},setZoom:function(e){!function(e){a.setState({camZoom:e})}(e)},addZ:function(e){!function(e){var t,n,o;a.setState({camZ:(t=a.state.camZ+e,n=0,o=200,t<n?n:t>o?o:t)})}(e)},setTransformValue:function(t){e.setState({transformValue:t})},setCamera:function(t){e.setState({camera:t})},setShowMagnet:function(t){e.setState({showMagnet:t})},setShowBounds:function(t){e.setState({showBounds:t})},setShowGrid:function(t){e.setState({showGrid:t})},setControl:function(t){e.setState({control:t})},setScene:function(t){e.setState({scene:t})},setObjRoot:function(t){e.setState({objRoot:t})},setSelectedFile:function(t){e.setState({selectedFile:t})}}},o.a.createElement(lt,null),o.a.createElement(je.a,{anchor:"right",open:this.state.drawerOpen,onClose:function(){return e.setState({drawerOpen:!1})},classes:{paper:t.drawerContainer},variant:"persistent"},o.a.createElement($e,null),o.a.createElement(Ce.a,{expanded:this.state.slicerOpen,onChange:function(){return e.setState({slicerOpen:!e.state.slicerOpen})}},o.a.createElement(_e.a,{expandIcon:o.a.createElement(Ye.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(f.a,null,"Slicer Settings")),o.a.createElement(Ae.a,null,o.a.createElement(h.a,{container:!0,alignItems:"center",justify:"center"},o.a.createElement(h.a,{item:!0,style:{zIndex:2}},"beginner"!==this.state.userMode&&o.a.createElement(h.a,{item:!0},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(ze.a,{id:"fil"},"Filament Type"),o.a.createElement(Be.a,{labelId:"fil",value:this.state.filament,onChange:function(t){e.setState({filament:t.target.value})}},o.a.createElement(Me.a,{value:"pla"},"PLA"),o.a.createElement(Me.a,{value:"petg"},"PETG"),o.a.createElement(Me.a,{value:"tpu"},"TPU")))),"beginner"===this.state.userMode?o.a.createElement(h.a,{item:!0},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(ze.a,{id:"str"},"Model Strength"),o.a.createElement(Be.a,{labelId:"str",value:this.state.fillMode,onChange:function(t){e.setState({fillMode:t.target.value}),"hollow"==t.target.value?e.setState({infill:0}):"normal"==t.target.value?e.setState({infill:20}):"solid"==t.target.value&&e.setState({infill:100})}},o.a.createElement(Me.a,{value:"hollow"},"Hollow"),o.a.createElement(Me.a,{value:"normal"},"Normal"),o.a.createElement(Me.a,{value:"solid"},"Solid")))):o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{item:!0,style:{marginTop:20}},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(D.a,{id:"standard-basic",value:this.state.infill,onChange:function(t){var a=t.target.value;e.setState({infill:a})},type:"number",label:"Infill Density",InputLabelProps:{shrink:!0},inputProps:{min:0,max:100,maxLength:3},error:this.state.infill<0||this.state.infill>100,helperText:this.state.infill<0||this.state.infill>100?"Value must be at or between 0 and 100.":""}),o.a.createElement(f.a,{display:"inline",style:{position:"relative",top:this.state.infill<0||this.state.infill>100?-50:-28,left:30,width:14}},"%"))),o.a.createElement(h.a,{item:!0},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(ze.a,{id:"filtype"},"Infill Type"),o.a.createElement(Be.a,{labelId:"filtype",value:this.state.infill_type,onChange:function(t){e.setState({infill_type:t.target.value})}},this.state.infill_patterns&&Object.entries(this.state.infill_patterns).map((function(e,t){return o.a.createElement(Me.a,{key:t,value:e[0]},e[1])})))))),o.a.createElement(h.a,{item:!0,style:{marginTop:20}},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(ze.a,{id:"qual"},"Quality"),o.a.createElement(Be.a,{labelId:"qual",value:this.state.quality,onChange:function(t){e.setState({quality:t.target.value})}},o.a.createElement(Me.a,{value:"good"},"Fastest Print"),o.a.createElement(Me.a,{value:"better"},"Normal Quality"),o.a.createElement(Me.a,{value:"best"},"Best Quality")))),"expert"===this.state.userMode&&o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{item:!0,style:{marginTop:20}},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(ze.a,{id:"stiktype"},"Adhesion Type"),o.a.createElement(Be.a,{labelId:"stiktype",value:this.state.stick_type,onChange:function(t){e.setState({stick_type:t.target.value})}},this.state.stick_patterns&&Object.entries(this.state.stick_patterns).map((function(e,t){return o.a.createElement(Me.a,{key:t,value:e[0]},e[1])}))))),o.a.createElement(h.a,{item:!0,style:{marginTop:20}},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(D.a,{id:"flow-rate",value:this.state.flow,onChange:function(t){var a=t.target.value;e.setState({flow:a})},type:"number",label:"Flow Rate",InputLabelProps:{shrink:!0},inputProps:{min:0,max:200,maxLength:3},error:this.state.flow<0||this.state.flow>200,helperText:this.state.infill<0||this.state.flow>200?"Value must be at or between 0 and 200.":""}),o.a.createElement(f.a,{display:"inline",style:{position:"relative",top:this.state.flow<0||this.state.flow>200?-50:-28,left:30,width:14}},"%"))),o.a.createElement(h.a,{item:!0},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(D.a,{id:"nozzle-temp",value:this.state.nozzle,onChange:function(t){var a=t.target.value;e.setState({nozzle:a})},type:"number",label:"Nozzle Temp",InputLabelProps:{shrink:!0},inputProps:{min:0,max:260,maxLength:3},error:this.state.nozzle<0||this.state.nozzle>260,helperText:this.state.nozzle<0||this.state.nozzle>260?"Value must be at or between 0 and 260.":""}),o.a.createElement(f.a,{display:"inline",style:{position:"relative",top:this.state.nozzle<0||this.state.nozzle>260?-50:-28,left:30,width:14}},"%"))),o.a.createElement(h.a,{item:!0},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(D.a,{id:"bed-temp",value:this.state.bed,onChange:function(t){var a=t.target.value;e.setState({bed:a})},type:"number",label:"Bed Temp",InputLabelProps:{shrink:!0},inputProps:{min:0,max:70,maxLength:3},error:this.state.bed<0||this.state.bed>70,helperText:this.state.bed<0||this.state.bed>70?"Value must be at or between 0 and 70.":""}),o.a.createElement(f.a,{display:"inline",style:{position:"relative",top:this.state.bed<0||this.state.bed>70?-50:-28,left:30,width:14}},"%"))),o.a.createElement(h.a,{item:!0},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(D.a,{id:"speed-rate",value:this.state.speed,onChange:function(t){var a=t.target.value;e.setState({speed:a})},type:"number",label:"Print Speed",InputLabelProps:{shrink:!0},inputProps:{min:0,max:150,maxLength:3},error:this.state.speed<0||this.state.speed>150,helperText:this.state.speed<0||this.state.speed>150?"Value must be at or between 0 and 200.":""}),o.a.createElement(f.a,{display:"inline",style:{position:"relative",top:this.state.speed<0||this.state.speed>150?-50:-28,left:30,width:14}},"%")))),o.a.createElement(h.a,{item:!0,style:{marginTop:20}},o.a.createElement(Pe.a,{row:!0},o.a.createElement(Re.a,{control:o.a.createElement(Ie.a,{checked:this.state.supports,onChange:function(t){e.setState({supports:t.target.checked})},name:"checkSupports"}),label:"Supports"}),"beginner"!==this.state.userMode&&o.a.createElement(Re.a,{control:o.a.createElement(Ie.a,{checked:this.state.vase,onChange:function(t){e.setState({vase:t.target.checked})},name:"checkVase"}),label:"Vase Mode"}))),"expert"===this.state.userMode&&this.state.supports&&o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{item:!0,style:{marginTop:20}},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(ze.a,{id:"struc"},"Support Structure"),o.a.createElement(Be.a,{labelId:"struc",value:this.state.structure,onChange:function(t){e.setState({structure:t.target.value})}},this.state.structures&&Object.entries(this.state.structures).map((function(e,t){return o.a.createElement(Me.a,{key:t,value:e[0]},e[1])}))))),o.a.createElement(h.a,{item:!0,style:{marginTop:20}},o.a.createElement(Ne.a,{className:t.formControl},o.a.createElement(ze.a,{id:"suptype"},"Support Type"),o.a.createElement(Be.a,{labelId:"suptype",value:this.state.support_type,onChange:function(t){e.setState({support_type:t.target.value})}},this.state.support_types&&Object.entries(this.state.support_types).map((function(e,t){return o.a.createElement(Me.a,{key:t,value:e[0]},e[1])})))))),o.a.createElement(h.a,{item:!0},o.a.createElement(Ne.a,{className:t.formControl,style:{display:"none"}},o.a.createElement(D.a,{id:"standard-basic",value:this.state.stlName,onChange:function(t){var a=t.target.value;e.setState({stlName:a}),console.log(e.state.stlName)},type:"text",label:"Set File Name"}))),o.a.createElement(h.a,{item:!0,container:!0,style:{marginTop:20,justifyContent:"center",flexDirection:"column"}},o.a.createElement(b.a,{variant:"contained",color:"primary",style:{marginBottom:5},onClick:Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({drawerOpen:!1}),t.next=3,e.setSliceAndStartPrint(e.state.objRoot.children,!1);case 3:case"end":return t.stop()}}),t)})))},"Slice & Save"),o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({drawerOpen:!1}),t.next=3,e.setSliceAndStartPrint(e.state.objRoot.children,!0);case 3:case"end":return t.stop()}}),t)})))},"Slice & Print")))))),o.a.createElement(mt,null))))),this.state.loading&&o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{alt:"print",src:ve.a,style:{width:200,height:200,zIndex:99999999,position:"absolute",left:"calc(50% - 100px)",top:"calc(50% + 100px)"}}),o.a.createElement("h4",{style:{width:200,zIndex:99999999,position:"absolute",left:"calc(50% - 100px)",top:"calc(50% + 270px)",textAlign:"center"}},"Preparing File")),o.a.createElement(re.a,{open:this.state.savedFile,onClose:function(){e.setState({savedFile:!1}),e.props.onClose()},disableBackdropClick:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ie.a,{id:"alert-dialog-title"},"Gcode File Saved"),o.a.createElement(se.a,null,o.a.createElement(le.a,{id:"alert-dialog-description"},"The generated gcode has been added to your printer storage.")),o.a.createElement(ce.a,null,o.a.createElement(b.a,{onClick:function(){e.setState({savedFile:!1}),e.props.onClose()},color:"primary",className:t.okButton,autoFocus:!0},"OK"))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{shown:e.shown}}}]),a}(n.Component),At=Object(Ge.a)((function(e){return{formControl:{minWidth:250,"& .MuiInputLabel-root.Mui-focused":{color:"#fff"},"& .MuiInputLabel-root":{color:"#fff"},"& .MuiSelect-select.MuiSelect-select":{color:"#fff"},"& .MuiFormLabel-root.MuiInputLabel-animated.MuiInputLabel-shrink.MuiFormLabel-filled":{color:"#fff",minWidth:236},"& .MuiInput-input":{color:"#fff"},"& #standard-basic-helper-text":{color:"red"}},mainContainer:{marginTop:20,width:"100%"},slider:{width:215},drawerContainer:{width:"70vw"},header:{display:"flex",alignItems:"center"},settingsDrawer:{position:"fixed",bottom:20,left:"60px",zIndex:9999},settingsBack:{position:"fixed",top:5,left:5,zIndex:100,backgroundColor:"#424242",color:"white",paddingRight:"10px","&:hover":{backgroundColor:"#42424280"}},okButton:{backgroundColor:"#0072CE",color:"white",marginRight:10,marginBottom:10}}}))(_t),Nt=Object(y.a)((function(e){return{header:{display:"flex",alignItems:"center"},item:{height:"100px",padding:"0 22px"},modal:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"75%"},modalContainer:{padding:"25px",width:300,"& h2":{fontSize:"2.5rem",marginTop:"10px"}},printButton:{width:"200px",height:"40px",alignSelf:"center",marginTop:"20px",marginBottom:"50px"},sliceDropdown:{border:"1px solid #ced4da",borderRadius:4,width:"175px",padding:"0 10px"},slider:{maxWidth:"60px",marginLeft:"20px","& input":{padding:"8px",textAlign:"center"}},summary:{height:"56px",cursor:"pointer","&$selected, &$selected:hover":{backgroundColor:e.palette.secondary.main}},selected:{},hover:{},text:{fontSize:"1.5em",fontWeight:"bold"},fileContainer:{maxHeight:"700px",overflow:"auto",width:"auto"},fileLocation:{overflow:"scroll",height:"400px"},icon:{width:"40px"},failOkButton:{backgroundColor:"#0072CE",color:"white",marginRight:10,marginBottom:10}}}));function zt(e){var t=[".g",".gcode",".G",".GCODE",".stl",".STL",".3mf",".3MF",".zip",".ZIP"];for(var a in t)if(e.endsWith(t[a]))return!1;return!0}function Bt(e,t,a){if(e===t)return a;var n,o;for(o in e)if(e.hasOwnProperty(o)&&"object"===typeof e[o]&&zt(o)&&(a.push(o),n=Bt(e[o],t,a)))return n;return a}var Mt=function(e){var t=e.drawerOpen,a=e.setDrawerOpen,r=e.fileLocation,i=e.manage,s=e.update,u=(e.showZip,e.setShowZip),d=e.showSnack,y=e.setShowSnack,E=e.snackMessage,v=e.setSnackMessage,w=e.handleSnackClose,x=e.setCheckDisabled,S=e.setText,k=(e.setRebootText,e.machineName),O=Nt(),j=Object(n.useState)(""),C=Object(p.a)(j,2),_=C[0],z=C[1],B=Object(n.useState)(!0),M=Object(p.a)(B,2),P=M[0],R=M[1],I=Object(n.useState)([]),F=Object(p.a)(I,2),L=F[0],D=F[1],G=Object(n.useState)([]),X=Object(p.a)(G,2),U=X[0],K=X[1],H=Object(n.useState)(0),W=Object(p.a)(H,2),V=W[0],q=W[1],Ee=Object(n.useState)(0),we=Object(p.a)(Ee,2),xe=we[0],Se=we[1],ke=Object(n.useState)(0),Te=Object(p.a)(ke,2),Oe=Te[0],je=Te[1],Ce=Object(n.useState)({}),_e=Object(p.a)(Ce,2),Ae=_e[0],Ne=_e[1],ze=Object(n.useState)(""),Be=Object(p.a)(ze,2),Me=Be[0],Pe=Be[1],Re=Object(n.useState)(!1),Ie=Object(p.a)(Re,2),Fe=Ie[0],Le=Ie[1],De=Object(n.useState)(!1),Ye=Object(p.a)(De,2),Ge=(Ye[0],Ye[1]),Ze=o.a.useState(!1),Xe=Object(p.a)(Ze,2),Ue=Xe[0],Ke=Xe[1],He=Object(n.useState)(0),We=Object(p.a)(He,2),Ve=We[0],qe=We[1],Qe=function(){Ke(!1),window.location.reload()};Object(n.useEffect)((function(){if(t){var e=function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,"local"!==r){e.next=7;break}return e.next=4,fetch("http://localhost:2127/api/v1/files",{method:"GET"});case 4:t=e.sent,e.next=12;break;case 7:return e.next=9,fetch("http://localhost:2127/api/v1/usb/refresh",{method:"POST"});case 9:return e.next=11,fetch("http://localhost:2127/api/v1/usb/files",{method:"GET"});case 11:t=e.sent;case 12:return e.abrupt("return",t.json());case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();R(!0),e().then((function(e){if("local"===r)D(e.files),Se(e.free),je(e.total),q(e.total-e.free);else{var t=function(e){var t={};if(e instanceof Array===!1)throw new Error("Expected an Array of file paths, but saw "+e);return e.forEach((function(e){var a=e.display.split("/");if(1===a.length)return t[a[0]]=e;a.reduce((function(t,a,n,o){return n===o.length-1&&(t[a]=e),t.hasOwnProperty(a)||(t[a]={}),t[a]}),t)})),t}(e.files);D(t),K(t)}R(!1)}))}}),[t,r]);var $e=function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:2127/api/v1/usb/copy/".concat(_),{method:"POST",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log(_),R(!0),a(!1),u(!1),x(!0),function(){return e.apply(this,arguments)}().then((function(e){console.log(e),R(!1),e.updated?(A("updated","yes"),v("Software Updated. Rebooting..."),y(!0),setTimeout((function(){!function e(){fetch("http://localhost:8990/reboot",{method:"POST",headers:{"Content-Type":"application/json"}}).catch((function(t){Ve<5?setTimeout((function(){qe(Ve+1),e()}),500):(S("This update requires a second run. Please try to install the update again."),x(!1))}))}()}),3e3)):(Ke(!0),x(!0),v("Software Update Failed. Reverted to previous version."),y(!0))}))},Je=function(e){Me&&(Ae[Me]=e,Ne(Ae)),D(e)};return o.a.createElement("div",null,!i&&!s&&o.a.createElement(Q.a,{position:"sticky"},o.a.createElement(f.a,{variant:"h6",style:{textAlign:"center"}},"Printer Name: ",k)),o.a.createElement("div",{className:O.header},!i&&!s&&o.a.createElement("h2",{style:{marginLeft:10}},"USB"===r.toUpperCase()?"USB Media":"Printer Storage"),!i&&!s&&o.a.createElement($.a,{"aria-label":"back",onClick:function(){return D([]),void a(!1)},style:{position:"absolute",right:0}},o.a.createElement(ue.a,null))),"usb"===r&&o.a.createElement(m.a,{className:O.fileContainer},o.a.createElement(h.a,{container:!0,direction:"row",style:{background:"#525252"}},o.a.createElement(h.a,{item:!0,style:{alignSelf:"center"},onClick:function(){return Je(U)}},o.a.createElement(f.a,{variant:"h6"},o.a.createElement($.a,{"aria-label":"back",className:O.icon},o.a.createElement(pe.a,null)))),function(e,t){var a=[],n=[".g",".gcode",".G",".GCODE",".stl",".STL",".3mf",".3MF",".zip",".ZIP"],o=Object.keys(t);for(var r in o)for(var i in n){if(o[r].endsWith(n[i])){if(t[o[r]].hasOwnProperty("display"))return(a=t[o[r]].display.split("/")).pop(),a}else a=Bt(e,t,[])}return a}(U,L).map((function(e,t,a){var n=a.length;return zt(e)?o.a.createElement(h.a,{item:!0,style:{alignSelf:"center"},onClick:function(){return Je(Ae[e])},key:e},o.a.createElement(f.a,{variant:"h6"},o.a.createElement($.a,{"aria-label":"back",className:O.icon},o.a.createElement(Z.a,null)),t+1===n&&o.a.createElement($.a,{"aria-label":"back",className:O.icon},o.a.createElement(de.a,null)),e)):o.a.createElement(o.a.Fragment,null)})))),P?o.a.createElement(Y.a,{className:O.backdrop,open:!0},o.a.createElement("img",{alt:"print",src:ve.a,style:{width:200,height:200,zIndex:99999999}})):o.a.createElement(m.a,{className:O.fileContainer},o.a.createElement(J.a,{className:O.fileList},o.a.createElement(ee.a,{stickyHeader:!0},o.a.createElement(te.a,null,o.a.createElement(ae.a,null,o.a.createElement(ne.a,null,"Name"),o.a.createElement(ne.a,null,"Size"))),o.a.createElement(oe.a,null,"local"===r?L&&L.map((function(e,t){if(!i||i&&!function(e){for(var t in ye)if(ye[t].name==e)return!0;return!1}(e.name))return o.a.createElement(ae.a,{key:e.display,onClick:function(){return z(e.display)},selected:_===e.display,className:O.summary,classes:{selected:O.selected,hover:O.hover}},o.a.createElement(ne.a,null,o.a.createElement($.a,{"aria-label":"back"},i?o.a.createElement(me.a,null):o.a.createElement(he.a,null)),e.display),o.a.createElement(ne.a,null,T(e.size)))})):L&&Object.keys(L).map((function(e,t){if(zt(e))return o.a.createElement(ae.a,{key:e,onClick:function(){return t=L[e],Pe(e),void z(t);var t},selected:_===L[e],className:O.summary,classes:{selected:O.selected,hover:O.hover}},o.a.createElement(ne.a,{style:{width:s?"400px":"100%"}},o.a.createElement($.a,{"aria-label":"back",className:O.icon},o.a.createElement(fe.a,null)),e),o.a.createElement(ne.a,null,T(function e(t){var a=0;return Object.keys(t).forEach((function(n,o){t[n].hasOwnProperty("size")?a+=t[n].size:"object"==typeof t[n]&&(a+=e(t[n]))})),a}(L[e]))));if((L[e].display.includes(".zip")||L[e].display.includes(".ZIP"))&&(/^300x-(\d+).(\d+).(\d+).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)\((\d+)\).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+) \((\d+)\).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)\((\d+)\).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+) \((\d+)\).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-Beta.(\d+).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-Beta.(\d+).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-Beta.(\d+)\((\d+)\).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-Beta.(\d+) \((\d+)\).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-Beta.(\d+)\((\d+)\).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-Beta.(\d+) \((\d+)\).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-Alpha.(\d+).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-Alpha.(\d+).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-Alpha.(\d+)\((\d+)\).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-Alpha.(\d+) \((\d+)\).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-Alpha.(\d+)\((\d+)\).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-Alpha.(\d+) \((\d+)\).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-beta.(\d+).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-beta.(\d+).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-beta.(\d+)\((\d+)\).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-beta.(\d+) \((\d+)\).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-beta.(\d+)\((\d+)\).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-beta.(\d+) \((\d+)\).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-alpha.(\d+).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-alpha.(\d+).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-alpha.(\d+)\((\d+)\).zip$/.test(e)||/^300x-(\d+).(\d+).(\d+)-alpha.(\d+) \((\d+)\).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-alpha.(\d+)\((\d+)\).zip$/.test(e)||/^(.+)300x-(\d+).(\d+).(\d+)-alpha.(\d+) \((\d+)\).zip$/.test(e))){if(s&&((e.includes("alpha")||e.includes("Alpha")||e.includes("Beta")||e.includes("beta"))&&N("allowPrerelease")||!e.includes("alpha")&&!e.includes("Alpha")&&!e.includes("Beta")&&!e.includes("beta")))return o.a.createElement(ae.a,{key:e,onClick:function(){return z(L[e].display)},selected:_===L[e].display,className:O.summary,classes:{selected:O.selected,hover:O.hover}},o.a.createElement(ne.a,{style:{width:"400px"}},o.a.createElement($.a,{"aria-label":"back",className:O.icon},o.a.createElement(be.a,null)),e),o.a.createElement(ne.a,null,T(L[e].size)))}else if(!s&&!L[e].display.includes(".zip")&&!L[e].display.includes(".ZIP"))return o.a.createElement(ae.a,{key:e,onClick:function(){return z(L[e].display)},selected:_===L[e].display,className:O.summary,classes:{selected:O.selected,hover:O.hover}},o.a.createElement(ne.a,null,e.endsWith(".g")||e.endsWith(".gcode")||e.endsWith(".G")||e.endsWith(".GCODE")?o.a.createElement($.a,{"aria-label":"back",className:O.icon},o.a.createElement(he.a,null)):o.a.createElement($.a,{"aria-label":"back",className:O.icon},o.a.createElement(ge.a,null)),e),o.a.createElement(ne.a,null,T(L[e].size)))})))))),o.a.createElement(h.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center"},i?o.a.createElement(h.a,{container:!0,justify:"center",alignItems:"center"},o.a.createElement(b.a,{variant:"contained",disabled:_.length<=0,onClick:function(){return R(!0),void fetch("http://localhost:2127/api/v1/files/local/".concat(_),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){fetch("http://localhost:2127/api/v1/files",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){R(!1),D(e.files),Se(e.free),je(e.total),q(e.total-e.free)}))}))},className:O.printButton},"Delete"),o.a.createElement(f.a,{variant:"h6"},T(V)," used of ",T(Oe)," total, leaving ",T(xe)," available")):"object"!==typeof _&&(_.endsWith(".g")||_.endsWith(".gcode")||_.endsWith(".G")||_.endsWith(".GCODE"))?o.a.createElement(b.a,{variant:"contained",disabled:_.length<=0,onClick:function(){return function(){if(console.log(_),R(!0),"local"===r){var e=_.split("\\").pop().split("/").pop();fetch("http://localhost:2127/api/v1/job/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){R(!1),a((function(){return!1})),z(""),Ge(!1),Le(!1)}))}else fetch("http://localhost:2127/api/v1/usb/copy/".concat(_),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){var t=_.split("\\").pop().split("/").pop();fetch("http://localhost:2127/api/v1/job/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){R(!1),a((function(){return!1})),z(""),Ge(!1),Le(!1)}))}))}()},className:O.printButton},"Print"):"object"===typeof _?o.a.createElement(b.a,{variant:"contained",disabled:_.length<=0,onClick:function(){return Je(_)},className:O.printButton},"Open Folder"):s&&(_.endsWith(".zip")||_.endsWith(".ZIP"))&&(/^(.+)300x-([\s\S]*).zip$/.test(_)||/^300x-([\s\S]*).zip$/.test(_))?o.a.createElement(b.a,{variant:"contained",disabled:_.length<=0,onClick:function(){return $e()},className:O.printButton},"Update from ZIP"):o.a.createElement(b.a,{variant:"contained",disabled:_.length<=0,onClick:function(){R(!0),Le(!0)},className:O.printButton},"Slice")),o.a.createElement(re.a,{open:Ue,onClose:Qe,disableBackdropClick:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ie.a,{id:"alert-dialog-title"},"An Error Occured Installing Update"),o.a.createElement(se.a,null,o.a.createElement(le.a,{id:"alert-dialog-description"},"The update you chose did not install correctly. The previous software version has been re-applied. Please try installing again. If the update continues to fail, please download the latest update from \xa0",o.a.createElement("b",null,"https://github.com/makermadecnc/300x-releases/releases")," and try again.")),o.a.createElement(ce.a,null,o.a.createElement(b.a,{onClick:Qe,color:"primary",className:O.failOkButton,autoFocus:!0},"OK"))),o.a.createElement(At,{file:_,shown:Fe,onClose:function(){R(!1),Le(!1)}}),o.a.createElement(g.a,{open:d,autoHideDuration:6e3,message:E,onClose:w}))},Pt=Object(y.a)({checker:{flex:2},updateButton:{width:"300px",height:"50px",fontSize:"14px",margin:"10px"},updateContainer:{flex:3,"& h3":{fontSize:"28px",textAlign:"center"}},zipContainer:{flex:"initial"}}),Rt=function(e){var t=e.autoCheck,a=(e.handleOnboarding,e.firstBoot),r=e.setStep,i=e.fastTrackUpdate,s=e.setFastTrackUpdate,u=Pt(),d=Object(n.useState)(!1),m=Object(p.a)(d,2),y=m[0],v=m[1],w=Object(n.useState)("Update device"),x=Object(p.a)(w,2),S=x[0],k=x[1],T=Object(n.useState)(!1),O=Object(p.a)(T,2),_=O[0],z=O[1],B=Object(n.useState)(!1),M=Object(p.a)(B,2),P=M[0],R=M[1],I=Object(n.useState)(!1),F=Object(p.a)(I,2),L=F[0],D=F[1],Y=Object(n.useState)(!1),X=Object(p.a)(Y,2),U=X[0],K=X[1],H=Object(n.useState)(!1),W=Object(p.a)(H,2),V=W[0],Q=W[1],$=Object(n.useState)(!0),J=Object(p.a)($,2),ee=J[0],te=J[1],ae=Object(n.useState)(!1),ne=Object(p.a)(ae,2),oe=ne[0],re=ne[1],ie=Object(n.useState)(!0),se=Object(p.a)(ie,2),le=se[0],ce=se[1],ue=Object(n.useState)(!1),pe=Object(p.a)(ue,2),de=pe[0],me=pe[1],he=Object(n.useState)(""),fe=Object(p.a)(he,2),be=fe[0],ge=fe[1],ye=Object(n.useState)("DO NOT TURN OFF PRINTER UNTIL AFTER IT REBOOTS!"),Ee=Object(p.a)(ye,2),ve=Ee[0],we=Ee[1],xe=function(){me((function(){return!1})),ge("")};E((function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:2127/api/v1/check/internet/connection",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&Se(),"yes"==N("updated")&&a&&r(2),function(){return e.apply(this,arguments)}().then((function(e){e.online?te(!1):te(!0)})),i&&(v(!1),K(!0),D(!0),s(!1))}));var Se=function(){if(a&&L)A("updated","yes"),r(2);else{var e=function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:2127/api/v1/update/software/check",{method:"POST",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();k("Checking for updates..."),v(!0),e().then((function(e){console.log(e),e.update?(v(!1),k(e.message),z(e.releaseNotes),K(!0),D(!0)):(v(!1),k(e.message),D(!0))}))}};return o.a.createElement(h.a,{container:!0,direction:"column",alignItems:"center",style:{height:"100%"}},!V&&a&&o.a.createElement(b.a,{style:{alignSelf:"flex-end",marginTop:"15px"},"aria-label":"skip",endIcon:o.a.createElement(Z.a,null),onClick:function(){r(2)}},"Skip"),o.a.createElement(h.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:oe?u.zipContainer:u.updateContainer},(y||!le)&&o.a.createElement(G.a,{color:"secondary"}),o.a.createElement(q.a,{style:{fontSize:100,width:"100%",textAlign:"center",marginBottom:20}}),S.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{variant:"h3",style:{textAlign:"center",marginBottom:oe?20:0}},S),_&&o.a.createElement(f.a,{variant:"h5",style:{textAlign:"left",marginTop:5,marginBottom:oe?20:0},dangerouslySetInnerHTML:{__html:_.replace(/(?:\r\n|\r|\n)/g,"<br>").replace(/(?:-)/g,"<b>&#9900;</b>")}})),(P||!le)&&o.a.createElement("div",null,o.a.createElement(f.a,{variant:"h3",style:{marginTop:60,textAlign:"center"}},"Your printer should reboot after applying the update, this will take approximately 2 minutes."),o.a.createElement(f.a,{variant:"h3",style:{marginTop:60,textAlign:"center"}},ve)),U&&o.a.createElement(b.a,{variant:"contained",color:"secondary",disabled:ee,onClick:function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:2127/api/v1/update/software",{method:"POST",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}v(!0),k("Downloading, please wait..."),K(!1),function(){return e.apply(this,arguments)}().then((function(e){console.log(e),e.updated?(v(!1),a&&A("initialUpdate",1),k(e.message),R(!0),Q(!0),A("updated","yes"),setTimeout((function(){C(0),function e(){fetch("http://localhost:8990/reboot",{method:"POST",headers:{"Content-Type":"application/json"}}).catch((function(t){j<5?setTimeout((function(){C(j+1),e()}),500):(k("This update requires a second run. Please try to install the update again."),K(!0),v(!1),Q(!1))}))}()}),3e3)):(console.log("handleDownload state error of 6; Entry point"),k(e.message),K(!0),Q(!1))})).catch((function(e){k("The update failed to run. Please try again."),K(!0),Q(!1)}))},style:{marginTop:"24px"},className:u.updateButton},"Download Update")),o.a.createElement(h.a,{container:!0,justify:"center",alignItems:"center",className:oe?u.zipContainer:u.checker,style:{display:V||oe?"none":"inherit"}},!U&&!y&&!oe&&o.a.createElement(b.a,{variant:"contained",color:"secondary",disabled:y||V||ee,onClick:Se,className:u.updateButton},a&&L?"Next":"Check Online for Updates"),!U&&!y&&!oe&&o.a.createElement(b.a,{variant:"contained",color:"secondary",disabled:y||V,onClick:function(){re(!0)},className:u.updateButton},"Update via Zip File")),o.a.createElement(h.a,{container:!0,justify:"center",alignItems:"center",style:{display:oe?"inherit":"none"}},o.a.createElement(Mt,{fileLocation:"usb",drawerOpen:le,setDrawerOpen:ce,manage:!1,update:!0,showZip:oe,setShowZip:re,showSnack:de,setShowSnack:me,snackMessage:be,setSnackMessage:ge,handleSnackClose:xe,setCheckDisabled:Q,setRebootText:we,setText:k})),o.a.createElement(g.a,{open:de,autoHideDuration:6e3,message:be,onClose:xe}))},It=a(84),Ft=a(4),Lt={ButtonSingle:"single-button",AxisManipulation:"axis-manipulation",ButtonMulti:"multi-button",ThermalGate:"thermal-gate",DualThermalGate:"dual-thermal-gate"},Dt={firstRun:{userVisable:!1,name:"Initial Setup",description:"",exitActions:[{type:"nozzletemp",params:[0]},{type:"bedtemp",params:[0]}],steps:[{layout:Lt.ButtonSingle,buttonText:"Start",buttonActions:[{type:"continue",params:[]},{type:"zoffsetstart",params:[]}],text:'Before you get started printing, the BLTouch sensor needs to be calibrated. Make sure the print bed is clear and then tap "Start" to begin.'},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]}],text:"The BLTouch will move to the middle of the plate, the probe will trigger, and then it will move up off of the surface by a small amount.%BREAK%Grab a piece of printer paper and place it between the printer's nozzle and the build surface."},{layout:Lt.AxisManipulation,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"savezoffset",params:[]}],axisX:!1,axisY:!1,axisZ:!0,text:'Using the controls below, adjust the nozzle\'s Z position so that it makes contact with the paper.%BREAK%First use the "-1.0mm" (down) and "+1.0mm" (up) buttons to move the nozzle close to the paper.%BREAK%Then use the "-0.1mm" (down) and "+0.1mm" (up) buttons until the nozzle touches the paper.%BREAK% %BREAK%Dragging the paper back and forth, you should feel a lot of resistance on the paper, possibly leaving scratch marks.'},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,270]}],text:"The nozzle will now move to each corner twice.%BREAK%Each time, adjust the corresponding knob under each position until the paper moves with about the same resistance as it did in the center.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,270]}],text:"Adjust the front left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,30]}],text:"Adjust the front right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,30]}],text:"Adjust the back left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,270]}],text:"Adjust the back right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,270]}],text:"Adjust the front left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,30]}],text:"Adjust the front right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,30]}],text:"Adjust the back left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]}],text:"Adjust the back right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonMulti,buttons:[{id:"bYes",buttonText:"Yes",buttonActions:[{type:"continue",params:[]}]},{id:"bNo",buttonText:"No",buttonActions:[{type:"jumpto",params:[3]}]}],text:"Are all corners leveled to the same height?"},{layout:Lt.ButtonSingle,buttonText:"Start",buttonActions:[{type:"continue",params:[]}],text:"To print, you have to have a material loaded into the 3D printer's extruder. The material is called filament, and the extruder is the portion of the machine that moves and melts the filament used to print.%BREAK%The type of filament that came with your printer is PLA, a plant-based plastic that's safe and easy to print with!%BREAK%Press \"Start\" to begin."},{layout:Lt.ButtonSingle,buttonText:"Preheat",buttonActions:[{type:"continue",params:[]},{type:"nozzletemp",params:[220]}],text:"Your printer's nozzle has to be at the proper temperature to melt the filament when you load it. Press \"Preheat\" to heat up your printer's nozzle. Once it reaches 220 \xb0C, it will be ready to load.%BREAK%Remember, it will be hot, so don't touch it!"},{layout:Lt.ThermalGate,minimumTemp:220,buttonText:"Next",buttonActions:[{type:"continue",params:[]}],text:"Please wait for the printer's nozzle to reach 220 \xb0C",gateText:'The nozzle has reached a temperature of 220 \xb0C.%BREAK%Press "Next" to continue.'},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]}],text:"You are now ready to load the filament!%BREAK%Take your roll and pull out the end from the storage slot in the side. Cut the bent end of the filament off at a 90 degree angle to make it easier to load.%BREAK%Hang the filament on the spool holder."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]}],text:"To load the filament, squeeze the silver lever next to the gears and push the cut end of the filament by hand into the tube.%BREAK%Push the filament all the way to the end of the tube until you see melted filament coming out of the nozzle."},{layout:Lt.ButtonSingle,buttonText:"Preheat",buttonActions:[{type:"continue",params:[]},{type:"nozzletemp",params:[220]},{type:"bedtemp",params:[50]}],text:'To ensure that the printer is setup correctly, this process will initiate a quick test print.%BREAK%Ensure that there is filament loaded into the machine and then press "Preheat" to begin'},{layout:Lt.DualThermalGate,minimumExtruderTemp:220,minimumBedTemp:50,buttonText:"Print",buttonActions:[{type:"continue",params:[]},{type:"printtest",params:[]}],text:"Please wait for the printer's nozzle to reach 220 \xb0C and for the bed to reach 60 \xb0C.",gateText:'Preheat complete.%BREAK%Press "Print" to continue.'},{layout:Lt.ButtonMulti,buttons:[{id:"bYes",buttonText:"Yes",buttonActions:[{type:"jumpto",params:[22]}]},{id:"bNo",buttonText:"No",buttonActions:[{type:"continue",params:[]},{type:"nozzletemp",params:[0]},{type:"bedtemp",params:[0]}]}],text:"Please wait for the print to complete.%BREAK%Did the print pop off or curl up off of the bed while printing?"},{layout:Lt.ButtonSingle,buttonText:"Exit",buttonActions:[{type:"exit",params:[]}],text:"Congratulations, your printer is now properly setup for use!"},{layout:Lt.ButtonMulti,buttons:[{id:"bCalibrate",buttonText:"Recalibrate",buttonActions:[{type:"continue",params:[]},{type:"nozzletemp",params:[0]},{type:"bedtemp",params:[0]}]},{id:"bExit",buttonText:"Exit",buttonActions:[{type:"exit",params:[""]},{type:"nozzletemp",params:[0]},{type:"bedtemp",params:[0]}]}],text:"Do you want to repeat the calibration process, or skip calibration and exit for now?"},{layout:Lt.ButtonSingle,buttonText:"Start",buttonActions:[{type:"continue",params:[]},{type:"zoffsetstart",params:[]}],text:'Before you get started printing, the BLTouch sensor needs to be calibrated. Make sure the print bed is clear and then tap "Start" to begin.'},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]}],text:"The BLTouch will move to the middle of the plate, the probe will trigger, and then it will move up off of the surface by a small amount.%BREAK%Grab a piece of printer paper and place it between the printer's nozzle and the build surface."},{layout:Lt.AxisManipulation,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"savezoffset",params:[]}],axisX:!1,axisY:!1,axisZ:!0,text:'Using the controls below, adjust the nozzle\'s Z position so that it makes contact with the paper.%BREAK%First use the "-1.0mm" (down) and "+1.0mm" (up) buttons to move the nozzle close to the paper.%BREAK%Then use the "-0.1mm" (down) and "+0.1mm" (up) buttons until the nozzle touches the paper.%BREAK% %BREAK%Dragging the paper back and forth, you should feel a lot of resistance on the paper, possibly leaving scratch marks.'},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,270]}],text:"The nozzle will now move to each corner twice.%BREAK%Each time, adjust the corresponding knob under each position until the paper moves with about the same resistance as it did in the center.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,270]}],text:"Adjust the front left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,30]}],text:"Adjust the front right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,30]}],text:"Adjust the back left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,270]}],text:"Adjust the back right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,270]}],text:"Adjust the front left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,30]}],text:"Adjust the front right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,30]}],text:"Adjust the back left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]}],text:"Adjust the back right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonMulti,buttons:[{id:"bYes",buttonText:"Yes",buttonActions:[{type:"jumpto",params:[18]}]},{id:"bNo",buttonText:"No",buttonActions:[{type:"jumpto",params:[23]}]}],text:"Are all corners leveled to the same height?"}]},blTouchCalibration:{userVisable:!0,name:"Calibrate BLTouch Sensor",description:"Calibrate the z-offset with the BLTouch sensor.",exitActions:[],steps:[{layout:Lt.ButtonSingle,buttonText:"Start",buttonActions:[{type:"continue",params:[]},{type:"zoffsetstart",params:[]}],text:'Make sure the print bed is clear and then tap "Start" to begin.',image:"1-sensor-hot-end.jpeg"},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]}],text:"The BLTouch will move to the middle of the plate, the probe will trigger, and then it will move up off of the surface by a small amount.%BREAK%Wait until the sensor clicks twice for a reading and the nozzle moves to the center.%BREAK%Then, grab a piece of printer paper and place it between the printer's nozzle and the build surface.",image:"2-paper-under-nozzle.jpeg"},{layout:Lt.AxisManipulation,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"savezoffset",params:[]}],axisX:!1,axisY:!1,axisZ:!0,text:'Using the controls below, adjust the nozzle\'s Z position so that it makes contact with the paper.%BREAK%First use the "-1.0mm" (down) and "+1.0mm" (up) buttons to move the nozzle close to the paper.%BREAK%Then use the "-0.1mm" (down) and "+0.1mm" (up) buttons until the nozzle touches the paper.%BREAK% %BREAK%Dragging the paper back and forth, you should feel a lot of resistance on the paper, possibly leaving scratch marks.'},{layout:Lt.ButtonSingle,buttonText:"Exit",buttonActions:[{type:"exit",params:[]}],text:'Calibration complete. Press "Exit" to finish this tutorial.'}]},bedLevelCornerCalibration:{userVisable:!0,name:"Level the printing bed corners",description:"Level the printing bed corners sequentially.",exitActions:[],steps:[{layout:Lt.ButtonSingle,buttonText:"Start",buttonActions:[{type:"continue",params:[]},{type:"home",params:[]},{type:"movexy",params:[150,150]}],text:'Place a sheet of printer paper on the center of the print bed. Ensure the bed is clear of anything else and then press "Start". The nozzle will move to the center of the print bed.'},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,270]}],text:"The nozzle will now move to each corner twice.%BREAK%Each time, adjust the corresponding knob under each position until the paper moves with about the same resistance as it does in the center.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,270]}],text:"Adjust the back left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,30]}],text:"Adjust the back right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,30]}],text:"Adjust the front left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,270]}],text:"Adjust the front right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,270]}],text:"Adjust the back left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[30,30]}],text:"Adjust the back right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]},{type:"movexy",params:[270,30]}],text:"Adjust the front left knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonSingle,buttonText:"Next",buttonActions:[{type:"continue",params:[]}],text:"Adjust the front right knob to move the print bed up and down. Move it so that the paper moves with about the same resistance as it did in the center of the print bed.%BREAK%Turn the knob clockwise to lower the bed and counter-clockwise to raise it."},{layout:Lt.ButtonMulti,buttons:[{id:"bNo",buttonText:"No",buttonActions:[{type:"jumpto",params:[1]}]},{id:"bYes",buttonText:"Yes",buttonActions:[{type:"bl_level",params:[]},{type:"continue",params:[]}]}],text:"Are all corners leveled to the same height?"},{layout:Lt.ButtonSingle,buttonText:"Exit",buttonActions:[{type:"exit",params:[]}],text:"The leveling process is complete."}]},loadFilament:{userVisable:!0,name:"Load Filament",description:"The steps required to load a new filament into the printer",exitActions:[{type:"nozzletemp",params:[0]}],steps:[{layout:Lt.ButtonSingle,buttonText:"Start",buttonActions:[{type:"continue",params:[]}],text:"To print, you have to have a material loaded into the 3D printer's extruder. The material is called filament, and the extruder is the portion of the machine that moves and melts the filament used to print.%BREAK%The type of filament that came with your printer is PLA, a plant-based plastic that's safe and easy to print with!%BREAK%Press \"Start\" to begin.",image:"3-filament.jpeg"},{layout:Lt.ButtonSingle,buttonText:"Preheat",buttonActions:[{type:"continue",params:[]},{type:"nozzletemp",params:[220]}],text:"Your printer's nozzle has to be at the proper temperature to melt the filament when you load it. Press \"Preheat\" to heat up your printer's nozzle. Once it reaches 220 \xb0C, it will be ready to load.%BREAK%Remember, it will be hot, so don't touch it!",image:"4-nozzle.jpeg"},{layout:Lt.ThermalGate,minimumTemp:210,buttonText:"Next",buttonActions:[{type:"continue",params:[]}],text:"Please wait for the printer's nozzle to reach 220 \xb0C",gateText:'The nozzle has reached an appropriate temperature.%BREAK%Press "Next" to continue.'},{layout:Lt.ButtonMulti,minimumExtruderTemp:205,buttons:[{id:"bLoad",buttonText:"Load Filament",buttonActions:[{type:"load",params:[100]},{type:"load",params:[100]},{type:"load",params:[100]},{type:"load",params:[100]},{type:"load",params:[100]},{type:"load",params:[100]},{type:"load",params:[100]}]},{id:"bNext",buttonText:"Filament Loaded",buttonActions:[{type:"continue",params:[]}]}],text:"You are now ready to load the filament!%BREAK%Hang the filament on the spool holder and pull out the end from the storage slot on its side.%BREAK%Cut any bent parts off at a 45 degree angle, so it is easier to load into the printer.%BREAK%Squeeze the silver lever next to the gears and push the cut end of the filament into the small hole in the lever until it stops.%BREAK%To manually load the filament, push it all the way into the tube until you see your filament color melting out of the end of the nozzle. Then press Filament Loaded.%BREAK%To automatically load the filament, tap Load Filament. The gear will pull the filament all the way through the tube until you see your color melting out the end. Then press Filament Loaded.",image:"5-extruder-lever.jpeg"},{layout:Lt.ButtonMulti,buttons:[{id:"bCooldown",buttonText:"Cooldown and Exit",buttonActions:[{type:"continue",params:[]},{type:"nozzletemp",params:[0]},{type:"exit",params:[]}]},{id:"bExit",buttonText:"Test Print",buttonActions:[{type:"exit",params:["test_print"]}]}],text:"Your filament is now loaded!%BREAK%Press Test Print to test your printer and ensure that the proper height is set for your BLTouch Calibration Sensor.%BREAK%If you are not ready to print now, press Cooldown and Exit."},{layout:Lt.ButtonSingle,buttonText:"Exit",buttonActions:[{type:"exit",params:[]}],text:'The printer\'s extruder is now set to cool down. Press the "Exit" button to exit this tutorial.'}]},unloadFilament:{userVisable:!0,name:"Unload Filament",description:"The steps required to remove a previously loaded filament from the printer",exitActions:[{type:"nozzletemp",params:[0]}],steps:[{layout:Lt.ButtonSingle,buttonText:"Preheat",buttonActions:[{type:"continue",params:[]},{type:"nozzletemp",params:[220]}],text:'To unload filament from the printer, the nozzle must be preheated because the filament is solid at room temperature and is consequently stuck inside the extruder.%BREAK%Press "Preheat" to start preheating the extruder to 220 \xb0C.%BREAK%Remember that it will be hot, so don\'t touch it!'},{layout:Lt.ThermalGate,minimumTemp:220,buttonText:"Next",buttonActions:[{type:"continue",params:[]}],text:"Please wait for the printer's nozzle to reach 220 \xb0C",gateText:'The nozzle has reached a temperature of 220 \xb0C.%BREAK%Press "Next" to continue.'},{layout:Lt.ButtonMulti,minimumExtruderTemp:205,buttons:[{id:"bUnload",buttonText:"UnLoad Filament",buttonActions:[{type:"load",params:[10]},{type:"load",params:[-100]},{type:"load",params:[-100]},{type:"load",params:[-100]},{type:"load",params:[-100]},{type:"load",params:[-100]},{type:"load",params:[-100]},{type:"load",params:[-100]}]},{id:"bNext",buttonText:"Next",buttonActions:[{type:"continue",params:[]}]}],text:"To unload the filament, squeeze the silver lever next to the gears and push the filament until you see it coming out of the end of the nozzle. Then, pull the filament out of the tube in one fluid motion. This enures that the end is fully melted and will make it easier to remove from the Bowden tube."},{layout:Lt.ButtonMulti,buttons:[{id:"bCooldown",buttonText:"Cooldown",buttonActions:[{type:"continue",params:[]},{type:"nozzletemp",params:[0]}]},{id:"bExit",buttonText:"Exit",buttonActions:[{type:"exit",params:[]}]}],text:'Your filament is now unloaded! Rewrap the filament around the roll and put the end into the storage slot on the side.%BREAK%If you are not going to load a new filament into the machine, press the "Cooldown" button so the extruder does not stay hot.%BREAK%If you are going to load another filament into the machine, pressing "Exit" will exit this tutorial while leaving the extruder preheated.'},{layout:Lt.ButtonSingle,buttonText:"Exit",buttonActions:[{type:"exit",params:[]}],text:'The printer\'s extruder is now set to cool down. Press the "Exit" button to exit this tutorial.'}]},printTestCube:{userVisable:!0,name:"Test Print",description:"Print a small object to test the functionality of your printer",exitActions:[{type:"nozzletemp",params:[0]},{type:"bedtemp",params:[0]}],steps:[{layout:Lt.ButtonSingle,buttonText:"Preheat",buttonActions:[{type:"continue",params:[]},{type:"nozzletemp",params:[220]},{type:"bedtemp",params:[50]}],text:"Let\u2019s run a square test print to ensure your printer is set up correctly!%BREAK%Ensure filament is loaded into the machine and press Preheat to begin.%BREAK%This is what your print should look like when finished!%BREAK%Notice the 90\xb0 angle of the square and the consistent layer lines.",image:"6-test-print.jpeg"},{layout:Lt.DualThermalGate,minimumExtruderTemp:210,minimumBedTemp:45,buttonText:"Print",buttonActions:[{type:"continue",params:[]},{type:"printtest",params:[]}],text:"Please wait for the printer's nozzle to reach 220 \xb0C and for the bed to reach 50 \xb0C.",gateText:'Preheat complete.%BREAK%Press "Print" to continue.'},{layout:Lt.ButtonMulti,buttons:[{id:"bYes",buttonText:"Troubleshoot",buttonActions:[{type:"jumpto",params:[4]}]},{id:"bNo",buttonText:"Finish and Exit",buttonActions:[{type:"continue",params:[]},{type:"nozzletemp",params:[0]},{type:"bedtemp",params:[0]}]}],text:"Please wait for the print to complete.%BREAK%When finished, does your print look like this? Notice the 90\xb0 angle of the square and the consistent layer lines.%BREAK%If your print looks like this, press Finish and Exit.%BREAK%If your print looks smashed, came loose from the build plate, or something else happened, press Troubleshoot.",image:"6-test-print.jpeg"},{layout:Lt.ButtonSingle,buttonText:"Exit",buttonActions:[{type:"exit",params:[]}],text:"Congratulations, your printer is now properly setup for use!"},{layout:Lt.ButtonMulti,buttons:[{id:"bCalibrate",buttonText:"Recalibrate BLTouch Sensor",buttonActions:[{type:"exit",params:["request-calibration"]},{type:"nozzletemp",params:[0]},{type:"bedtemp",params:[0]}]},{id:"bExit",buttonText:"Looks Different / Something Else",buttonActions:[{type:"continue",params:[]}]}],text:"If the nozzle is not close enough, the layers will not stack correctly.%BREAK%Here is an example print from a nozzle that is too far away.%BREAK%If the model comes loose while printing, the BLTouch calibration should be lowered by a tiny bit.",image:"7-test-print-high.jpeg"},{layout:Lt.ButtonMulti,buttons:[{id:"bCalibrate",buttonText:"Recalibrate BLTouch Sensor",buttonActions:[{type:"exit",params:["request-calibration"]},{type:"nozzletemp",params:[0]},{type:"bedtemp",params:[0]}]},{id:"bExit",buttonText:"Looks Different / Something Else",buttonActions:[{type:"continue",params:[]}]}],text:"If the nozzle is too close, your print will look smashed like this example.%BREAK%The nozzle can also be so close that it drags into the build plate and filament doesn\u2019t have enough room to extrude into lines.%BREAK%In this case, the BLTouch calibration should be raised by a tiny bit.",image:"8-test-print-low.jpeg"},{layout:Lt.ButtonMulti,buttons:[{id:"bCalibrate",buttonText:"Load Filament",buttonActions:[{type:"exit",params:["load-filament"]}]},{id:"bExit",buttonText:"Exit",buttonActions:[{type:"exit",params:[]}]}],text:"If no filament came out, the filament may not be loaded all the way to the nozzle.%BREAK%If the machine made any loud sounds or it didn\u2019t print in a square, refer to the Quick Start Guide to check that all of the motor and limit switch connections are fully connected into their proper places.%BREAK%If none of these solutions worked for you, exit and contact support@makermade.com and we will get you printing!",image:"9-connections.jpeg"}]}},Yt=a(278),Gt=a(252),Zt=a(251);a(145);var Xt=function(e){return o.a.createElement("div",{className:"big-thermometer"},o.a.createElement("div",{className:"big-thermometer-container"},o.a.createElement("div",{className:"big-thermometer-bulb-container"}),o.a.createElement("div",{className:"big-thermometer-indicator-container"},o.a.createElement("div",{className:"big-thermometer-indicator",style:{height:"".concat(15+(e.value-e.min)/(e.max-e.min)*85,"%")}}),o.a.createElement("div",{className:"big-thermometer-bulb"},o.a.createElement("span",null,e.value)))))},Ut=function(){function e(){Object(we.a)(this,e),this._actions=[]}return Object(xe.a)(e,[{key:"build",value:function(){for(var e="",t=0;t<this._actions.length;t++)e+=this._actions[t]+"\n";return e}},{key:"addCommand",value:function(e){this._actions.push(e)}}]),e}();function Kt(e){return"M851 Z".concat(e)}function Ht(e,t,a){return e&&t&&a?"G28":"G28".concat(e?"X ":"").concat(t?"Y ":"").concat(e?"Z ":"")}function Wt(e){return e?"M211 S1":"M211 S0"}function Vt(e,t,a,n,o,r){return e||t||a?"G1".concat(e?" X".concat(n):"").concat(t?" Y".concat(o):"").concat(a?" Z".concat(r):""):""}var qt=o.a.createContext({bedTarget:0,nozzleTarget:0,bed:0,nozzle:0,zOffset:0,setBedTarget:function(e){},setNozzleTarget:function(e){},setBed:function(e){},setNozzle:function(e){},steppersEnabled:!0,setSteppersEnabled:function(e){},setZOffset:function(e){}}),Qt=function(e){Object(Se.a)(a,e);var t=Object(ke.a)(a);function a(e){var n;return Object(we.a)(this,a),(n=t.call(this,e)).evTutorialClose=e.onTutorialClose||function(){console.log("Unhandled tutorial close event")},n.state={tutorialId:n.props.tutorialName||null,tutorialReady:!1,currentStep:0,exitWarning:!1,showSnack:!1,snackMessage:"Your printer is reheating. Wait a moment and try the load/unload button again.",unit:.1,offset:-1.55,delay:!1},n.tutorial=null,n.offsetRequested=!1,n}return Object(xe.a)(a,[{key:"componentDidMount",value:function(){"blTouchCalibration"==this.props.tutorialName&&(this.attemptGetZOffset(),this.offsetRequested=!0),this.props.firstBoot&&("bedLevelCornerCalibration"==this.props.tutorialName&&N("leveled")&&this.props.setStep(6),"loadFilament"==this.props.tutorialName&&N("loaded")&&this.props.onTutorialClose(N("userMode"))),this.state.tutorialId&&Dt[this.state.tutorialId]?(this.tutorial=Dt[this.state.tutorialId],this.setState({tutorialReady:!0,currentStep:0})):(console.log('Unknown tutorial id "'.concat(this.state.tutorialId,'", closing tutorial')),this.evTutorialClose())}},{key:"componentDidUpdate",value:function(e){this.tutorial&&this.tutorial.steps[this.state.currentStep].layout;this.context.zOffset&&this.offsetRequested&&(console.log("offset: ",this.context.zOffset),this.setState({offset:this.context.zOffset}),this.offsetRequested=!1)}},{key:"attemptExitActions",value:function(){this.processButtonActions(this.tutorial.exitActions)}},{key:"attemptCloseTutorial",value:function(e){0===this.state.currentStep||this.currentStep===this.tutorial.steps.length-1?(this.evTutorialClose(e),A("onboarded",!0)):this.setState({exitWarning:!0}),"bedLevelCornerCalibration"==this.props.tutorialName&&A("leveled",!0),"loadFilament"==this.props.tutorialName&&A("loaded",!0)}},{key:"attemptAxisMove",value:function(e,t){if(console.log("Attempting to move on the ".concat(e," axis by ").concat(t,"mm")),"z"===e.toLowerCase()){var a=parseFloat(this.state.offset)+parseFloat(t);a=a.toFixed(4),console.log(a),this.setState({offset:a});var n=new Ut;n.addCommand("G91"),n.addCommand(Vt(!1,!1,!0,null,null,t)),this.sendGcode(n.build())}}},{key:"attemptHome",value:function(){console.log("Attempting to home");var e=new Ut;e.addCommand("G28"),this.sendGcode(e.build())}},{key:"attemptAbsolute",value:function(){console.log("Attempting to G90");var e=new Ut;e.addCommand("G90"),this.sendGcode(e.build())}},{key:"attemptBlLevel",value:function(){console.log("Attempting to BL Level");var e=new Ut;e.addCommand("G29 T"),this.sendGcode(e.build())}},{key:"attemptXYMoveTo",value:function(e,t){console.log("Attempting to move print head to x:".concat(e,", y: ").concat(t));var a=new Ut;a.addCommand("G90"),a.addCommand(Vt(!0,!0,!0,150,150,30)),a.addCommand(Vt(!0,!0,!0,e,t,0)),this.sendGcode(a.build())}},{key:"attemptZOffsetStart",value:function(){console.log("Attempting to start z offset process");var e=new Ut;e.addCommand(Kt(this.state.offset)),e.addCommand("M500"),e.addCommand("M501"),e.addCommand(Ht(!0,!0,!0)),e.addCommand("G90"),e.addCommand(Wt(!1)),e.addCommand(Vt(!0,!0,!0,150,150,0)),this.sendGcode(e.build())}},{key:"attemptGetZOffset",value:function(){var e=new Ut;e.addCommand("M851"),this.sendGcode(e.build())}},{key:"attemptSaveZOffset",value:function(){console.log("Attempting to save z offset");var e=new Ut;e.addCommand("G90"),e.addCommand(Kt(this.state.offset)),e.addCommand(Wt(!0)),e.addCommand("M500"),e.addCommand("M501"),e.addCommand(Ht(!0,!0,!0)),this.sendGcode(e.build())}},{key:"attemptSetBedTemp",value:function(e){console.log("Attempting to set bed temperature to ".concat(e," \xb0C")),this.context.setBedTarget(e);var t=new Ut;t.addCommand(function(e){return"M140 S".concat(e)}(e)),this.sendGcode(t.build())}},{key:"attemptSetExtruderTemp",value:function(e){console.log("Attempting to set extruder temperature to ".concat(e," \xb0C")),this.context.setNozzleTarget(e);var t=new Ut;t.addCommand(function(e){return"M104 S".concat(e)}(e)),this.sendGcode(t.build())}},{key:"attemptTestPrint",value:function(){this.attemptAbsolute(),fetch("http://localhost:2127/api/v1/job/BLTouchCalibrationTest.gcode",{method:"POST",headers:{"Content-Type":"application/json"}})}},{key:"loadFilament",value:function(e){var t=this.tutorial.steps[this.state.currentStep],a=new Ut;this.context.nozzle>=t.minimumExtruderTemp?(a.addCommand(function(e,t){return t>219?"G91\nG1 E".concat(e," F300\nM114"):""}(e,this.context.nozzle)),this.sendGcode(a.build()),this.setState({showSnack:!1})):(this.setState({showSnack:!0}),console.log("current:"+this.context.nozzle+" min:"+t.minimumExtruderTemp))}},{key:"unloadFilament",value:function(e){this.loadFilament(e)}},{key:"tutorialButtonPressed",value:function(e){var t=this.tutorial.steps[this.state.currentStep];t.layout===Lt.ButtonSingle||t.layout===Lt.AxisManipulation||t.layout===Lt.ThermalGate||t.layout===Lt.DualThermalGate?this.processButtonActions(t.buttonActions):t.layout===Lt.ButtonMulti&&this.processButtonActions(t.buttons.find((function(t){return t.id===e})).buttonActions)}},{key:"sendGcode",value:function(e){fetch("http://localhost:2127/api/v1/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gcode:e})})}},{key:"processButtonActions",value:function(e){var t,a=this,n=Object(It.a)(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;switch(o.type){case"continue":this.actionContinue();break;case"home":this.attemptHome();break;case"bl_level":this.attemptBlLevel();break;case"movexy":this.attemptXYMoveTo(o.params[0],o.params[1]);break;case"jumpto":this.actionJumpTo(o.params[0]);break;case"load":this.loadFilament(o.params[0]),this.setState({delay:!0}),setTimeout((function(){a.setState({delay:!1})}),3e3);break;case"unload":this.unloadFilament(o.params[0]),this.setState({delay:!0}),setTimeout((function(){a.setState({delay:!1})}),3e3);break;case"exit":A("onboarded",!0),this.evTutorialClose(o.params.length>0?o.params[0]:"");break;case"savezoffset":this.attemptSaveZOffset();break;case"nozzletemp":this.attemptSetExtruderTemp(o.params[0]);break;case"bedtemp":this.attemptSetBedTemp(o.params[0]);break;case"printtest":this.attemptTestPrint();break;case"zoffsetstart":this.attemptZOffsetStart();break;default:console.log('Warning! Unhandled tutorial action type: "'.concat(o.type,'"'))}}}catch(r){n.e(r)}finally{n.f()}}},{key:"actionContinue",value:function(){this.state.currentStep<this.tutorial.steps.length-1&&this.setState({currentStep:this.state.currentStep+1})}},{key:"actionJumpTo",value:function(e){this.setState({currentStep:e})}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:t.tutorialWindow},o.a.createElement(Q.a,{position:"sticky"},o.a.createElement(f.a,{variant:"h6",style:{textAlign:"center"}},"Printer Name: ",this.props.machineName)),this.state.tutorialReady&&o.a.createElement(m.a,{className:t.tutorialContainer},o.a.createElement(h.a,{container:!0},o.a.createElement(h.a,{item:!0,xs:10},o.a.createElement(f.a,{variant:"h5",className:t.tutorialHeading},this.tutorial.name)),o.a.createElement(h.a,{item:!0,xs:2},o.a.createElement($.a,{className:t.tutorialCloseButton,onClick:function(){e.attemptCloseTutorial(e.props.firstBoot?"skip":null)}},o.a.createElement(Zt.a,null)))),this.renderTutorialPage(t)),o.a.createElement(re.a,{open:this.state.exitWarning},o.a.createElement(ie.a,null,"Exit Tutorial"),o.a.createElement(se.a,null,o.a.createElement(le.a,null,"Are you sure you want to exit this tutorial?"),o.a.createElement(ce.a,null,o.a.createElement(b.a,{onClick:function(){"bedLevelCornerCalibration"==e.props.tutorialName&&A("leveled",!0),"loadFilament"==e.props.tutorialName&&A("loaded",!0),e.attemptExitActions(),e.evTutorialClose()}},"Yes"),o.a.createElement(b.a,{autoFocus:!0,onClick:function(){e.setState({exitWarning:!1})}},"No")))),o.a.createElement(g.a,{open:this.state.showSnack,autoHideDuration:6e3,message:this.state.snackMessage,onClose:this.handleSnackClose}))}},{key:"renderTutorialPage",value:function(e){var t=this,a=this.tutorial.steps[this.state.currentStep];return a.layout===Lt.ButtonSingle?o.a.createElement(h.a,{container:!0,direction:"column",alignItems:"stretch",alignContent:"stretch",justify:"space-between",className:e.layoutSingleGrid},o.a.createElement(h.a,{item:!0,container:!0,justify:"center",alignItems:"center",className:e.layoutSingleGridText},a.text.split("%BREAK%").map((function(t){return o.a.createElement(f.a,{variant:"body1",className:e.tutorialText},t)}))),o.a.createElement(h.a,{item:!0,container:!0,justify:"center",alignItems:"center",className:e.layoutSingleGridText},a.image&&o.a.createElement("img",{alt:a.image,src:a.image,style:{width:"80vw",height:"auto",marginTop:20,marginBottom:20}})),o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridButton},o.a.createElement(b.a,{color:"primary",variant:"contained",className:e.tutorialButton,onClick:function(){t.tutorialButtonPressed()}},a.buttonText))):a.layout===Lt.AxisManipulation?o.a.createElement(h.a,{container:!0,direction:"column",alignItems:"stretch",alignContent:"stretch",justify:"space-between",className:e.layoutSingleGrid},o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridText},a.text.split("%BREAK%").map((function(t){return o.a.createElement(f.a,{variant:"body1",className:e.tutorialText},t)}))),o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridAxisControl},o.a.createElement(h.a,{container:!0,justify:"center"},a.axisX&&this.renderAxisControl("X",e),a.axisY&&this.renderAxisControl("Y",e),a.axisZ&&this.renderAxisControl("Z",e))),o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridButton},o.a.createElement(b.a,{color:"primary",variant:"contained",className:e.tutorialButton,onClick:function(){t.tutorialButtonPressed()}},a.buttonText))):a.layout===Lt.ButtonMulti?o.a.createElement(h.a,{container:!0,direction:"column",alignItems:"stretch",alignContent:"stretch",justify:"space-between",className:e.layoutSingleGrid},o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridText},a.text.split("%BREAK%").map((function(t){return o.a.createElement(f.a,{variant:"body1",className:e.tutorialText},t)}))),o.a.createElement(h.a,{item:!0,container:!0,justify:"center",alignItems:"center",className:e.layoutSingleGridText},a.image&&o.a.createElement("img",{alt:a.image,src:a.image,style:{width:"80vw",height:"auto",marginTop:20,marginBottom:20}})),o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridButton},o.a.createElement(h.a,{container:!0,justify:"space-around"},a.buttons.map((function(a){return o.a.createElement(h.a,{item:!0,xs:6},o.a.createElement(b.a,{color:"primary",variant:"contained",className:e.tutorialButton,style:{margin:"Recalibrate BLTouch Sensor"==a.buttonText||"Looks Different / Something Else"==a.buttonText?10:"inherit"},disabled:t.state.delay,onClick:function(){t.tutorialButtonPressed(a.id)},id:a.id},a.buttonText))}))))):a.layout===Lt.ThermalGate?o.a.createElement(h.a,{container:!0,direction:"column",alignItems:"stretch",alignContent:"stretch",justify:"space-between",className:e.layoutSingleGrid},o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridText},this.context.nozzle>=a.minimumTemp?a.gateText.split("%BREAK%").map((function(t){return o.a.createElement(f.a,{variant:"body1",className:e.tutorialText},t)})):a.text.split("%BREAK%").map((function(t){return o.a.createElement(f.a,{variant:"body1",className:e.tutorialText},t)}))),o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridThermalControl},o.a.createElement(h.a,{container:!0,justify:"center"},o.a.createElement(Xt,{min:0,max:400,value:this.context.nozzle}))),o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridButton},o.a.createElement(b.a,{color:"primary",variant:"contained",disabled:!(this.context.nozzle>=a.minimumTemp),className:e.tutorialButton,onClick:function(){t.tutorialButtonPressed()}},a.buttonText))):a.layout===Lt.DualThermalGate?o.a.createElement(h.a,{container:!0,direction:"column",alignItems:"stretch",alignContent:"stretch",justify:"space-between",className:e.layoutSingleGrid},o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridText},this.context.nozzle>=a.minimumExtruderTemp&&this.context.bed>=a.minimumBedTemp?a.gateText.split("%BREAK%").map((function(t){return o.a.createElement(f.a,{variant:"body1",className:e.tutorialText},t)})):a.text.split("%BREAK%").map((function(t){return o.a.createElement(f.a,{variant:"body1",className:e.tutorialText},t)}))),o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridThermalControl},o.a.createElement(h.a,{container:!0,justify:"center"},o.a.createElement(h.a,{item:!0},o.a.createElement(Xt,{min:0,max:400,value:this.context.bed}),o.a.createElement(f.a,{variant:"body1",className:e.thermoLabel},"Bed")),o.a.createElement(h.a,{item:!0},o.a.createElement(Xt,{min:0,max:400,value:this.context.nozzle}),o.a.createElement(f.a,{variant:"body1",className:e.thermoLabel},"Extruder")))),o.a.createElement(h.a,{item:!0,className:e.layoutSingleGridButton},o.a.createElement(b.a,{color:"primary",variant:"contained",disabled:!(this.context.nozzle>=a.minimumExtruderTemp&&this.context.bed>=a.minimumBedTemp),className:e.tutorialButton,onClick:function(){t.tutorialButtonPressed()}},a.buttonText))):void 0}},{key:"renderAxisControl",value:function(e,t){var a=this;return o.a.createElement(h.a,{container:!0,justify:"center",className:t.btnContainer,spacing:0,direction:"row"},o.a.createElement(h.a,{item:!0,xs:12},o.a.createElement(ct.a,null,o.a.createElement(Yt.a,{value:this.state.unit,className:t.tabs,onChange:function(e,t){return a.setState({unit:t})}},[.01,.05,.1,1].map((function(e){return o.a.createElement(Gt.a,{label:"".concat(e,"mm"),key:e,value:e,style:{minWidth:"138px"}})}))))),o.a.createElement(h.a,{item:!0,container:!0,xs:12,style:{marginTop:40}},o.a.createElement(h.a,{container:!0,item:!0,xs:!0,direction:"column",alignItems:"center",spacing:0,style:{height:220}},o.a.createElement(h.a,{item:!0},o.a.createElement(f.a,{variant:"body1"},"Z")),o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{color:"secondary",size:"large",variant:"contained",onClick:function(){return a.attemptAxisMove(e,a.state.unit)},style:{margin:7,width:85,height:50}},o.a.createElement(pt.a,null))),o.a.createElement(h.a,{item:!0}),o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{color:"secondary",size:"large",variant:"contained",onClick:function(){return a.attemptAxisMove(e,-a.state.unit)},style:{margin:7,width:85,height:50}},o.a.createElement(dt.a,null))))))}}]),a}(o.a.Component);Qt.contextType=qt;var $t=Object(Ft.a)((function(e){return{tutorialWindow:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1250,backgroundColor:"#303030"},tutorialButton:{fontSize:"20px"},tutorialCloseButton:{float:"right",marginRight:-8},tutorialText:{fontSize:"20px",marginBottom:5},tutorialContainer:{padding:"8px",height:"calc(100% - 48px)"},tutorialHeading:{paddingTop:"8px"},layoutSingleGrid:{paddingLeft:"16px",paddingRight:"16px"},layoutSingleGridText:{flexGrow:1},layoutSingleGridButton:{height:"80px",textAlign:"center"},layoutSingleGridTop:{height:"50px"},layoutSingleGridAxisControl:{height:"550px"},layoutSingleGridThermalControl:{height:"550px"},axisButton:{marginTop:"2px",marginBottom:"2px",fontSize:"20px",textTransform:"none",width:"120px"},thermoLabel:{textAlign:"center",fontSize:"26px"},btnContainer:{marginTop:"40px",marginBottom:"28px",textAlign:"center"},centerBtns:{"& button":{margin:"0 12px"}},tabs:{"& button":{textTransform:"none"}}}}))(Qt),Jt=Object(y.a)({buttonContainer:{display:"flex",width:"100%",justifyContent:"space-around",marginTop:"56px"},container:{padding:"32px",textAlign:"center","& p":{fontSize:"2.125rem"}}}),ea=function(e){var t=e.setStep,a=e.setConnectWifi,r=e.machineName,i=Jt(),s=Object(n.useState)({}),l=Object(p.a)(s,2),c=(l[0],l[1]);return E((function(){c(N("network"))})),o.a.createElement(h.a,{container:!0,item:!0,spacing:6,direction:"column",alignItems:"center",className:i.container},o.a.createElement("h2",null,"Your SSID is",o.a.createElement(f.a,{color:"secondary",variant:"body1"},r)),o.a.createElement("h2",null,"Your password is",o.a.createElement(f.a,{color:"secondary",variant:"body1"},"makermade")),o.a.createElement(h.a,{item:!0,className:i.buttonContainer},o.a.createElement(b.a,{color:"secondary",variant:"contained",onClick:function(){return a(null)}},"Back"),o.a.createElement(b.a,{color:"primary",variant:"contained",onClick:function(){return t(1)}},"Next")))},ta=a(253),aa=a(66),na=a.n(aa),oa=a(108),ra=a.n(oa),ia=Object(y.a)({accordion:{display:"flex",justifyContent:"center"},backdrop:{zIndex:1e4,color:"#fff"},button:{alignSelf:"flex-end",height:"36px",marginLeft:"25px"},connecting:{display:"flex",flexDirection:"column",alignItems:"center","& h4":{marginBottom:"24px"}},container:{display:"flex",flexDirection:"column"},header:{display:"flex",alignItems:"center",marginTop:"-40px"},item:{padding:function(e){return e.settingsScreen?"10px":"30px 15px"},fontSize:function(e){return e.settingsScreen?"18px":"24px"},display:"flex",justifyContent:"space-between"},keyboard:{position:"fixed",bottom:0,left:0,right:0,color:"#000"},wifiList:{height:"600px",overflow:"scroll",border:"1px solid #fff",borderRadius:"5px"}}),sa=function(e){var t=e.setStep,a=e.setShowSnack,r=e.setSnackMessage,i=(e.handleSnackClose,e.setConnectWifi),s=e.settingsScreen,u=(e.setStage,e.onGoBack),d=ia({settingsScreen:s}),m=Object(n.useState)(!1),h=Object(p.a)(m,2),f=h[0],y=h[1],v=Object(n.useState)("default"),w=Object(p.a)(v,2),x=w[0],S=w[1],k=Object(n.useState)(""),T=Object(p.a)(k,2),O=T[0],_=T[1],z=Object(n.useState)([]),B=Object(p.a)(z,2),M=B[0],P=B[1],R=Object(n.useState)(!1),I=Object(p.a)(R,2),F=I[0],L=I[1],Z=Object(n.useRef)(),X=Object(n.useState)(!1),K=Object(p.a)(X,2),H=K[0],W=K[1],V=Object(n.useState)(!0),q=Object(p.a)(V,2),Q=q[0],J=q[1],ee=Object(n.useState)(!1),te=Object(p.a)(ee,2),ae=te[0],ne=te[1],oe=Object(n.useState)(""),ue=Object(p.a)(oe,2),pe=ue[0],de=ue[1],me=Object(n.useState)(!1),he=Object(p.a)(me,2),fe=he[0],be=he[1],ge=Object(n.useState)(!1),ye=Object(p.a)(ge,2),Ee=ye[0],we=ye[1];E((function(){W(!0),function e(){function t(){return(t=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8990/networks/scan");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().then((function(e){var t=e.networks.filter((function(e,t,a){return a.map((function(e){return e.ssid})).indexOf(e.ssid)===t&&null!=e.ssid}));P(t),W(!1)})).catch((function(t){setTimeout((function(){e()}),500)}))}()}));var xe=function(){var e=Object(c.a)(l.a.mark((function e(){var n,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=function(){return(i=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8990/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},o=function(e){return i.apply(this,arguments)},n={ssid:f,password:O},y(!1),L(!0),_(""),o(n).then((function(e){if(L(!1),"connected!"===e.status){r("Successfully Connected"),a((function(){return!0}));var o=N("network");o||(o={}),o.ssid=n.ssid,A("network",o),!s&&t(1)}else L(!1),de("Connection Failed. Try Again"),ne((function(){return!0})),console.log("wifi connect failed");N("hotSpotToWifi")&&(A("hotSpotToWifi",!1),be(!0))})).catch((function(e){de("Connection Failed. Try Again"),ne((function(){return!0})),L(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){J(!Q)},ke=function(e){var t=e.target.value;_(t),Z.current.setInput(t)};return o.a.createElement("div",{className:d.container},!s&&o.a.createElement("div",{className:d.header},o.a.createElement($.a,{"aria-label":"back",onClick:function(){i((function(){return null})),u&&u()}},o.a.createElement(na.a,null)),o.a.createElement("h2",null,"Wi-Fi")),H&&o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{alt:"print",src:ve.a,style:{width:200,height:200,zIndex:99999999,position:"absolute",left:"calc(50% - 100px)",top:"calc(50% - 100px)"}}),o.a.createElement("h4",{style:{width:200,zIndex:99999999,position:"absolute",left:"calc(50% - 100px)",top:"calc(50% + 120px)",textAlign:"center"}},"Gathering Networks")),o.a.createElement(Ze.a,{className:d.wifiList},M.map((function(e){return o.a.createElement(Ce.a,{expanded:f===e.ssid,key:"".concat(e.ssid,"-list-item")},o.a.createElement(_e.a,{classes:{content:"accordion-style"}},o.a.createElement(Xe.a,{className:d.item},e.ssid,o.a.createElement(b.a,{color:f===e.ssid?"secondary":"primary",variant:"contained",onClick:function(){var t;f===e.ssid?(y((function(){return!1})),_("")):(t=e.ssid,y(t))}},f===e.ssid?"Close":"Join"))),o.a.createElement(Ae.a,{className:d.accordion},o.a.createElement(D.a,{id:"standard-password-input",label:"Password",type:Q?"password":"text",color:"secondary",value:O,onChange:ke,InputProps:{endAdornment:o.a.createElement(ta.a,{position:"end"},o.a.createElement(ra.a,{onClick:Se}))}}),o.a.createElement(b.a,{color:"primary",variant:"contained",className:d.button,onClick:function(){O.length>0?xe():(r("Password required"),a(!0))}},"Connect")))}))),o.a.createElement(re.a,{open:fe,disableBackdropClick:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ie.a,{id:"alert-dialog-title"},"Must Reboot When Disabling Hotspot"),o.a.createElement(se.a,null,o.a.createElement(le.a,{id:"alert-dialog-description"},"The printer must reboot to connect to wifi after disabling hotspot.")),o.a.createElement(ce.a,null,o.a.createElement(b.a,{onClick:function(){!function e(){function t(){return(t=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8990/reboot",{method:"POST",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().then((function(e){console.log("rebooting")})).catch((function(t){setTimeout((function(){j<5?(console.log(j),C(j+1),e()):(be(!1),we(!0))}),1e3)}))}()},color:"primary",autoFocus:!0,style:{backgroundColor:"#0072CE",color:"white",marginRight:10,marginBottom:10}},"OK"))),o.a.createElement(re.a,{open:Ee,disableBackdropClick:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ie.a,{id:"alert-dialog-title"},"Reboot Failed"),o.a.createElement(se.a,null,o.a.createElement(le.a,{id:"alert-dialog-description"},"The printer reboot process has failed. Turn off your printer and turn it back on, then try again."))),F&&o.a.createElement(Y.a,{className:d.backdrop,open:F},o.a.createElement("div",{className:d.connecting},o.a.createElement("h4",null,"Connecting"),o.a.createElement(G.a,{color:"inherit"}))),f&&o.a.createElement("div",{className:d.keyboard},o.a.createElement(U.a,{keyboardRef:function(e){return Z.current=e},layoutName:x,layout:{default:["{abc} {ABC} {+=#} {123}","a b c d e","f g h i j","k l m n o","p q r s t","u v w x y","z {space} {bksp}"],shift:["{abc} {ABC} {+=#} {123}","A B C D E","F G H I J","K L M N O","P Q R S T","U V W X Y","Z {space} {bksp}"],symbol:["{abc} {ABC} {+=#} {123}","! @ # $ %","^ & * ( )","~ ' _ - =","[ ] { } \\","| ; ' : ,",'" < > ? .'],number:["{abc} {ABC} {+=#} {123}","1 2 3","4 5 6","7 8 9","$ 0 .","{space}","# {bksp}"]},display:{"{bksp}":"Backspace","{enter}":"Enter","{shift}":"Shift","{space}":"Space","{123}":"123","{ABC}":"ABC","{abc}":"abc","{+=#}":"+ = #"},onChange:function(e){_(e),console.log("Input changed",e)},onKeyPress:function(e){"{ABC}"===e?S("shift"):"{abc}"===e?S("default"):"{+=#}"===e?S("symbol"):"{123}"===e&&S("number"),("{shift}"===e||"{lock}"===e)&&S("default"===x?"shift":"default")}})),o.a.createElement(g.a,{open:ae,autoHideDuration:6e3,message:pe,onClose:function(){ne((function(){return!1})),de("")}}))},la=a(254),ca=a(255),ua=a(256),pa=function(e){Object(Se.a)(a,e);var t=Object(ke.a)(a);function a(e){var n;return Object(we.a)(this,a),(n=t.call(this,e)).state={stage:"internet-enable",enableInternet:!1,selectedInterface:null,enableHotspot:!1,connecting:!1},n}return Object(xe.a)(a,[{key:"componentDidMount",value:function(){1===N("initialUpdate")&&(A("initialUpdate",2),this.props.setStep(2)),N("networkProfile")&&"none"!==N("networkProfile")&&N("internet")&&!this.props.settingsScreen&&this.props.setStep(1)}},{key:"complete",value:function(){A("hotspot",this.state.enableHotspot),A("internet",this.state.enableInternet),A("networkProfile",this.state.selectedInterface),this.props.setNewType?(this.props.setNewType(this.state.selectedInterface),this.props.setStep(0)):this.state.enableInternet?this.props.setStep(1):this.props.setStep(2)}},{key:"render",value:function(){var e=this;function t(e,t){return a.apply(this,arguments)}function a(){return(a=Object(c.a)(l.a.mark((function e(a,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){n()})).catch((function(e){setTimeout((function(){t(a,n)}),1e3)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return"internet-enable"===this.state.stage?o.a.createElement(o.a.Fragment,null,this.renderHeader(),o.a.createElement(la.a,{style:{fontSize:100,width:"100%",textAlign:"center",marginBottom:20}}),o.a.createElement(f.a,{variant:"h5"},"Would you like to connect this printer to the internet?"),o.a.createElement(f.a,{variant:"h6"},"Connecting to the internet enables updates."),o.a.createElement(k,{title:"Yes",onClick:function(){e.setState({enableInternet:!0,stage:"internet-select"})}}),o.a.createElement(k,{title:"No",onClick:function(){e.setState({enableInternet:!1,stage:"hotspot-enable",selectedInterface:"none"})}})):"internet-select"===this.state.stage?o.a.createElement(o.a.Fragment,null,this.renderHeader(),o.a.createElement(la.a,{style:{fontSize:100,width:"100%",textAlign:"center",marginBottom:20}}),o.a.createElement(f.a,{variant:"h5"},"How would you like to connect this printer?"),o.a.createElement(k,{title:"Wi-Fi",onClick:function(){N("hotspot")?(A("hotSpotToWifi",!0),e.setState({selectedInterface:"wifi",enableHotspot:!1,enableInternet:!0,stage:"wifi-select"}),t("http://localhost:8990/hotspot/disconnect",(function(){console.log("hotspot disconnected")}))):e.setState({selectedInterface:"wifi",stage:"wifi-select"})}}),o.a.createElement(k,{title:"Ethernet",onClick:function(){e.setState({selectedInterface:"ethernet",stage:"ethernet-check"})}})):"ethernet-check"===this.state.stage?o.a.createElement(o.a.Fragment,null,this.renderHeader(),o.a.createElement(ca.a,{style:{fontSize:100,width:"100%",textAlign:"center",marginBottom:20}}),o.a.createElement(f.a,{variant:"h5"},"Please verify that the ethernet cable is properly connected to your device."),o.a.createElement(k,{title:"Done",onClick:function(){e.setState({stage:"hotspot-enable"})}})):"wifi-select"===this.state.stage?o.a.createElement(o.a.Fragment,null,this.renderHeader(),o.a.createElement(sa,{setStep:function(t){e.setState({connecting:!0});var a=e;setTimeout((function(){a.setState({connecting:!1}),_().then((function(){a.props.setNetworkData(N("network")),a.complete()}))}),15e3)},setShowSnack:this.props.setShowSnack,setSnackMessage:this.props.setSnackMessage,handleSnackClose:this.props.handleSnackClose,setConnectWifi:function(){},onGoBack:function(){e.setState({stage:"internet-select"})}}),this.state.connecting&&o.a.createElement(Y.a,{style:{zIndex:9e4,color:"#fff"},open:this.state.connecting},o.a.createElement("div",{style:{display:"flex",zIndex:99e3,flexDirection:"column",alignItems:"center","& h4":{marginBottom:"24px"}}},o.a.createElement("h4",null,"Please Wait"),o.a.createElement(G.a,{color:"inherit"})))):"hotspot-enable"===this.state.stage?o.a.createElement(o.a.Fragment,null,this.renderHeader(),o.a.createElement(ua.a,{style:{fontSize:100,width:"100%",textAlign:"center",marginBottom:20}}),o.a.createElement(f.a,{variant:"h5"},"Would you like to enable the printer's wireless hotspot?"),o.a.createElement(f.a,{variant:"h6"},"This allows you to remotely connect/control your printer."),o.a.createElement(k,{title:"Yes",onClick:function(){e.setState({enableHotspot:!0,stage:"config-hotspot",selectedInterface:"hotspot"}),t("http://localhost:8990/hotspot/connect",(function(){console.log("hotspot connected")})),A("networkProfile","hotspot");var a=N("network");a||(a={}),a.ssid="",a.ip="192.168.50.5",a.hostName="http://"+N("printerName")+".local",A("network",a)}}),o.a.createElement(k,{title:"No",onClick:function(){e.complete()}})):"config-hotspot"===this.state.stage?o.a.createElement(o.a.Fragment,null,o.a.createElement(ea,{setStep:function(){e.setState({connecting:!0}),setTimeout((function(){e.setState({connecting:!1}),e.complete()}),1e4)},setConnectWifi:function(){},machineName:this.props.machineName}),this.state.connecting&&o.a.createElement(Y.a,{style:{zIndex:9e4,color:"#fff"},open:this.state.connecting},o.a.createElement("div",{style:{display:"flex",zIndex:99e3,flexDirection:"column",alignItems:"center","& h4":{marginBottom:"24px"}}},o.a.createElement("h4",null,"Please Wait"),o.a.createElement(G.a,{color:"inherit"})))):void 0}},{key:"renderHeader",value:function(){var e=this;return o.a.createElement(h.a,{container:!0,justify:"space-between",alignItems:"center",style:{display:"flex",marginBottom:20}},o.a.createElement("h2",{style:{fontSize:28}},"Network"),o.a.createElement(b.a,{"aria-label":"skip",endIcon:o.a.createElement(Z.a,null),onClick:function(){e.setState({enableInternet:!!N("internet")&&N("internet"),stage:"hotspot-enable",selectedInterface:N("networkProfile")?N("networkProfile"):"none"},(function(){e.complete()}))}},"Skip"))}}]),a}(o.a.Component),da=Object(y.a)({container:{flex:1,display:"flex",flexDirection:"column"},welcome:{textAlign:"center",height:"100%","& h2":{fontSize:"92px"},"& h3":{fontSize:"32px",marginTop:"16px"}}}),ma=function(e){var t=e.handleOnboarding,a=e.machineName,r=da(),i=Object(n.useState)(null),s=Object(p.a)(i,2),l=s[0],c=s[1],u=Object(n.useState)(!1),d=Object(p.a)(u,2),y=d[0],E=d[1],v=Object(n.useState)(""),w=Object(p.a)(v,2),x=w[0],S=w[1],k=function(){E((function(){return!1})),S("")};return o.a.createElement(m.a,{className:r.container},null===l&&o.a.createElement(h.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center",spacing:3,className:r.welcome},o.a.createElement(h.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center",style:{flex:1}},o.a.createElement(f.a,{variant:"h2"},"Welcome"),o.a.createElement(f.a,{variant:"h3"},"Let's get you set up")),o.a.createElement(h.a,{item:!0,container:!0,alignItems:"flex-start",justify:"center",style:{flex:1}},o.a.createElement(b.a,{variant:"contained",size:"large",color:"secondary",style:{width:"190px",height:"65px",fontSize:"18px"},onClick:function(){return c(0)}},"Get Started"))),0===l&&o.a.createElement(pa,{setStep:c,setShowSnack:E,setSnackMessage:S,handleSnackClose:k,machineName:a}),1===l&&o.a.createElement(Rt,{autoCheck:!1,handleOnboarding:t,firstBoot:!0,setStep:c}),2===l&&o.a.createElement(L,{setStep:c}),3===l&&o.a.createElement(H,{setStep:c,setShowSnack:E,setSnackMessage:S,handleSnackClose:k,setNewType:function(){}}),4===l&&o.a.createElement(W,{handleOnboarding:t,setStep:c}),5===l&&o.a.createElement($t,{tutorialName:"blTouchCalibration",handleOnboarding:t,firstBoot:!0,setStep:c,onTutorialClose:function(e){c(6)},machineName:a}),6===l&&o.a.createElement($t,{tutorialName:"loadFilament",handleOnboarding:t,firstBoot:!0,setStep:c,onTutorialClose:function(e){"test_print"==e?c(7):t(N("userMode"))},machineName:a}),7===l&&o.a.createElement($t,{tutorialName:"printTestCube",handleOnboarding:t,firstBoot:!0,setStep:c,onTutorialClose:function(e){"request-calibration"==e?c(5):"load-filament"==e?c(6):t(N("userMode"))},machineName:a}),o.a.createElement(g.a,{open:y,autoHideDuration:6e3,message:x,onClose:k}))},ha=(a(146),function(e){var t=e.tabList,a=e.handleTabClick,n=e.activeTab,r=e.disabledNav;return o.a.createElement(Yt.a,{value:n,onChange:a,centered:!0},t.map((function(e){return o.a.createElement(Gt.a,{style:{height:"70px",fontSize:"20px",minWidth:"140px"},label:e,key:"tab - ".concat(e),disabled:r})})))}),fa=a(260),ba=a(257),ga=a(258),ya=a(259),Ea=function(e){if(e){var t=parseInt(e,10);return[Math.floor(t/3600),Math.floor(t/60)%60,t%60].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":")}return"calculating..."},va=Object(Ft.a)((function(e){return{root:{height:14,borderRadius:7},colorPrimary:{backgroundColor:"#606060"},bar:{borderRadius:7,backgroundColor:"#ACC12F"}}}))(fa.a),wa=function(e){e.lastMessage;var t=e.progressState,a=(e.setDisabledNav,e.state),r=e.statusText,i=e.fileName,s=Object(n.useState)(!1),l=Object(p.a)(s,2),c=l[0],u=l[1],d=Object(n.useState)(0),g=Object(p.a)(d,2),y=g[0],E=g[1],v=Object(n.useState)(""),w=Object(p.a)(v,2),x=w[0],S=w[1],k=Object(n.useState)(""),T=Object(p.a)(k,2),O=T[0],j=T[1],C=Object(n.useState)(!1),_=Object(p.a)(C,2),A=_[0],N=_[1];return Object(n.useEffect)((function(){t.completion!==y&&(E(t.completion),S(Ea(t.printTime)),j(Ea(t.printTimeLeft)))}),[t,y]),Object(n.useEffect)((function(){a&&a.flags.paused!=c&&(u(a.flags.paused),N(!1))}),[a]),o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement(f.a,{variant:"h5",style:{marginTop:35,width:"100%",textAlign:"center"}},r,": ",i),o.a.createElement("div",{className:"print-status-bar",style:{marginTop:25}},o.a.createElement(va,{variant:"determinate",value:y}),o.a.createElement(h.a,{container:!0,spacing:3,alignItems:"center"},o.a.createElement(h.a,{item:!0,xs:4,style:{textAlign:"left"}},o.a.createElement(f.a,{variant:"h6",component:"span",style:{width:"100%"}},x)),o.a.createElement(h.a,{item:!0,xs:4,style:{textAlign:"center"}},o.a.createElement(f.a,{variant:"h6",component:"span",style:{width:"100%"}},y?y.toFixed(1):"0","%")),o.a.createElement(h.a,{item:!0,xs:4,style:{textAlign:"right"}},o.a.createElement(f.a,{variant:"h6",component:"span",style:{width:"100%"}},O)))),o.a.createElement("div",{style:{marginTop:50}},o.a.createElement(qt.Consumer,null,(function(e){var t=e.bed,a=e.nozzle,n=e.bedTarget,r=e.nozzleTarget;return o.a.createElement(h.a,{container:!0},o.a.createElement(h.a,{item:!0,container:!0,xs:6,direction:"column"},o.a.createElement(h.a,{item:!0,style:{marginBottom:-100}},o.a.createElement("div",{style:{transform:"scale(.6)"}},o.a.createElement(Xt,{min:0,max:120,value:t}))),o.a.createElement(h.a,{item:!0,style:{textAlign:"center"}},o.a.createElement(f.a,{variant:"h6"},"Target: ",n),o.a.createElement(f.a,{variant:"h6"},"Bed"),o.a.createElement("div",{className:"print-btn-container"},o.a.createElement(b.a,{color:"primary",variant:"contained",disabled:A,onClick:function(){N(!0),fetch("http://localhost:2127/api/v1/job",{method:"PATCH",headers:{"Content-Type":"application/json"}})},startIcon:c?o.a.createElement(ga.a,null):o.a.createElement(ba.a,null)},c?"Resume":"Pause")))),o.a.createElement(h.a,{item:!0,container:!0,xs:6,direction:"column"},o.a.createElement(h.a,{item:!0,style:{marginBottom:-100}},o.a.createElement("div",{style:{transform:"scale(.6)"}},o.a.createElement(Xt,{min:0,max:300,value:a}))),o.a.createElement(h.a,{item:!0,style:{textAlign:"center"}},o.a.createElement(f.a,{variant:"h6"},"Target: ",r),o.a.createElement(f.a,{variant:"h6"},"Nozzle"),o.a.createElement("div",{className:"print-btn-container"},o.a.createElement(b.a,{color:"secondary",variant:"contained",disabled:!c,onClick:function(){fetch("http://localhost:2127/api/v1/job",{method:"DELETE",headers:{"Content-Type":"application/json"}})},startIcon:o.a.createElement(ya.a,null)},"Cancel")))))})))))},xa=(a(147),Object(y.a)({drawerContainer:{width:"100%"},buttonContainer:{display:"flex",justifyContent:"center",marginTop:"10px"},textCenter:{textAlign:"center",marginTop:"10px"},card:{margin:"32px",border:"2px solid rgba(0, 0, 0, 0.12)",textAlign:"center"},cardContent:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},okButton:{backgroundColor:"#0072CE",color:"white",marginRight:10,marginBottom:10}})),Sa=function(e){var t=e.lastMessage,a=e.setDisabledNav,r=e.machineName,i=xa(),s=Object(n.useState)({extruder:0,bed:0,connected:!1,feed:"1",file:-1,files:[],printing:!1,progress:0,paused:!1}),l=Object(p.a)(s,2),c=(l[0],l[1],Object(n.useState)(null)),u=Object(p.a)(c,2),d=u[0],m=u[1],g=Object(n.useState)(null),y=Object(p.a)(g,2),E=y[0],S=y[1],k=Object(n.useState)(null),T=Object(p.a)(k,2),O=T[0],j=T[1],C=Object(n.useState)(!1),_=Object(p.a)(C,2),A=_[0],N=_[1],z=Object(n.useState)(""),B=Object(p.a)(z,2),M=B[0],P=B[1],R=Object(n.useState)(!1),I=Object(p.a)(R,2),F=(I[0],I[1],Object(n.useState)(null)),L=Object(p.a)(F,2),D=L[0],Y=L[1],G=Object(n.useState)(null),Z=Object(p.a)(G,2),X=(Z[0],Z[1],function(e){P(e),N(!0)});return o.a.useEffect((function(){if("undefined"!==typeof t&&t&&"undefined"!==typeof t.data&&t.data.length>1){var e=JSON.parse(t.data.substring(1));e[0].hasOwnProperty("current")&&e[0].current.state&&m(e[0].current.state),e[0].hasOwnProperty("current")&&e[0].current.job&&S(e[0].current.job),e[0].hasOwnProperty("current")&&e[0].current.progress&&j(e[0].current.progress),e[0].hasOwnProperty("plugin")&&"empty"===e[0].plugin.data.filamentStatus&&Y(!0)}}),[t]),o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,null,O&&E&&E.file.name&&O.completion<100&&d&&"Operational"!==d.text?o.a.createElement(wa,{lastMessage:t,progressState:O,setDisabledNav:a,statusText:d.text,fileName:E.file.display,state:d}):o.a.createElement(h.a,null,o.a.createElement(v.a,{className:i.card,onClick:function(){return X("local")}},o.a.createElement(w.a,null,o.a.createElement(x.a,{className:i.cardContent},o.a.createElement(f.a,{variant:"h4"},"Printer Storage")))),o.a.createElement(v.a,{className:i.card,onClick:function(){return X("usb")}},o.a.createElement(w.a,null,o.a.createElement(x.a,{className:i.cardContent},o.a.createElement(f.a,{variant:"h4"},"USB Media")))),o.a.createElement(je.a,{anchor:"left",open:A,onClose:function(){return N(!1)},classes:{paper:i.drawerContainer}},o.a.createElement(Mt,{setDrawerOpen:N,drawerOpen:A,fileLocation:M,machineName:r}))),o.a.createElement("div",null,o.a.createElement(h.a,null,d&&E&&(E.file&&"undefined"!==typeof E.file.display?o.a.createElement("div",null,o.a.createElement("div",{className:i.buttonContainer},O&&(null===O.completion||100===O.completion)&&E&&E.file.display&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:i.textCenter})))):o.a.createElement("span",null))))),o.a.createElement(re.a,{open:D,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ie.a,{id:"alert-dialog-title",style:{textAlign:"center"}},"Action Required"),o.a.createElement(se.a,{style:{textAlign:"left"}},o.a.createElement(le.a,{id:"alert-dialog-description"},o.a.createElement("b",null,"You ran out of filament. Replace the reel and continue."))),o.a.createElement(ce.a,null,o.a.createElement(b.a,{onClick:function(){Y(!1)},color:"primary",className:i.okButton,autoFocus:!0},"I Replaced My Filament"))))},ka=a(277),Ta=(a(148),Object(y.a)({btnContainer:{marginTop:"14px",marginBottom:"28px",textAlign:"center"},centerBtns:{"& button":{margin:"0 12px"}},tabs:{"& button":{textTransform:"none"}}})),Oa=[.1,1,10,20],ja=function(e){e.position;var t=e.nozzleTemp,a=Ta(),r=Object(n.useState)(1),i=Object(p.a)(r,2),s=i[0],l=i[1],c=Object(n.useState)(!1),u=Object(p.a)(c,2),d=u[0],m=u[1],g=Object(n.useState)(!1),y=Object(p.a)(g,2),E=y[0],v=y[1],w=function(e){fetch("http://localhost:2127/api/v1/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gcode:e})})},x=function(e){fetch("http://localhost:2127/api/v1/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gcode:"G28 ".concat(e,"\nM114\n")})})},S=function(e,a){var n="".concat(e).concat(a?-Oa[s]:Oa[s]),o="M220 S200\nG91\nG0 ".concat(n,"\nM220 S100\nM114\n");if("E"==e){if(t<200)return void m(!0);v(!0),setTimeout((function(){v(!1)}),3e3),o="M220 S200\nG91\nG1 ".concat(n," F300\nM220 S100\nM114\n")}fetch("http://localhost:2127/api/v1/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gcode:o})})};return o.a.createElement(ka.a,{style:{textAlign:"center"}},o.a.createElement(f.a,{variant:"h4",style:{marginTop:15}},"Movement"),o.a.createElement(h.a,{container:!0,justify:"center",style:{marginTop:10}},o.a.createElement(h.a,{item:!0,justifyContent:"center",alignItems:"center"},o.a.createElement(b.a,{color:"primary",variant:"contained",onClick:function(){w("G28\nM240 S1\nM114\n")},style:{width:130,height:50}},"Home All"))),o.a.createElement(h.a,{container:!0,justify:"center",className:a.btnContainer,spacing:0,direction:"row"},o.a.createElement(h.a,{item:!0,xs:12},o.a.createElement(ct.a,null,o.a.createElement(Yt.a,{value:s,className:a.tabs,onChange:function(e,t){return l(t)}},Oa.map((function(e){return o.a.createElement(Gt.a,{label:"".concat(e,"mm"),key:e,style:{minWidth:"150px"}})}))))),o.a.createElement(h.a,{item:!0,container:!0,xs:12,style:{marginTop:20,marginLeft:20}},o.a.createElement(h.a,{container:!0,item:!0,xs:6,justify:"center",alignItems:"flex-start",spacing:0},o.a.createElement(h.a,{item:!0,xs:12,alignItems:"flex-start"},o.a.createElement(f.a,{variant:"body1"},"X")),o.a.createElement(h.a,{item:!0,xs:4},o.a.createElement(b.a,{item:!0,color:"secondary",size:"large",variant:"contained",onClick:function(){return S("X",!0)},style:{margin:7,width:85,height:50}},o.a.createElement(Fe.a,null))),o.a.createElement(h.a,{item:!0,xs:4},o.a.createElement(b.a,{color:"secondary",size:"large",variant:"contained",onClick:function(){return x("X")},style:{margin:7,width:85,height:50}},o.a.createElement(pe.a,null))),o.a.createElement(h.a,{item:!0,xs:4},o.a.createElement(b.a,{color:"secondary",size:"large",variant:"contained",onClick:function(){return S("X",!1)},style:{margin:7,width:85,height:50}},o.a.createElement(Z.a,null))),o.a.createElement(h.a,{item:!0,xs:12,style:{margin:20}}),o.a.createElement(h.a,{item:!0,xs:12,alignItems:"flex-start"},o.a.createElement(f.a,{variant:"body1"},"E")),o.a.createElement(h.a,{item:!0,xs:4},o.a.createElement(b.a,{item:!0,color:"secondary",size:"large",variant:"contained",disabled:E,onClick:function(){return S("E",!0)},style:{margin:7,width:85,height:50}},o.a.createElement(Fe.a,null))),o.a.createElement(h.a,{item:!0,xs:4},o.a.createElement(b.a,{color:"secondary",size:"large",variant:"contained",disabled:E,onClick:function(){return S("E",!1)},style:{margin:7,width:85,height:50}},o.a.createElement(Z.a,null)))),o.a.createElement(h.a,{container:!0,item:!0,xs:!0,direction:"column",alignItems:"center",spacing:0},o.a.createElement(h.a,{item:!0},o.a.createElement(f.a,{variant:"body1"},"Y")),o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{color:"secondary",size:"large",variant:"contained",onClick:function(){return S("Y",!0)},style:{margin:7,width:85,height:50}},o.a.createElement(pt.a,null))),o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{color:"secondary",size:"large",variant:"contained",onClick:function(){return x("Y")},style:{margin:7,width:85,height:50}},o.a.createElement(pe.a,null))),o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{color:"secondary",size:"large",variant:"contained",onClick:function(){return S("Y",!1)},style:{margin:7,width:85,height:50}},o.a.createElement(dt.a,null)))),o.a.createElement(h.a,{container:!0,item:!0,xs:!0,direction:"column",alignItems:"center",spacing:0,style:{height:220}},o.a.createElement(h.a,{item:!0},o.a.createElement(f.a,{variant:"body1"},"Z")),o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{color:"secondary",size:"large",variant:"contained",onClick:function(){return S("Z",!1)},style:{margin:7,width:85,height:50}},o.a.createElement(pt.a,null))),o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{color:"secondary",size:"large",variant:"contained",onClick:function(){return x("Z")},style:{margin:7,width:85,height:50}},o.a.createElement(pe.a,null))),o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{color:"secondary",size:"large",variant:"contained",onClick:function(){return S("Z",!0)},style:{margin:7,width:85,height:50}},o.a.createElement(dt.a,null)))))),o.a.createElement(re.a,{open:d,disableBackdropClick:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ie.a,{id:"alert-dialog-title"},"Hotend Must Be Hot to Move Filament"),o.a.createElement(se.a,null,o.a.createElement(le.a,{id:"alert-dialog-description"},"You must preheat the hotend before extruding filament.")),o.a.createElement(ce.a,null,o.a.createElement(b.a,{onClick:function(){m(!1)},color:"primary",autoFocus:!0,style:{backgroundColor:"#0072CE",color:"white",marginRight:10,marginBottom:10}},"Cancel"),o.a.createElement(b.a,{onClick:function(){w("M104 S220"),m(!1)},color:"primary",autoFocus:!0,style:{backgroundColor:"#0072CE",color:"white",marginRight:10,marginBottom:10}},"OK"))))},Ca=(a(149),Object(y.a)((function(e){return{drawerContainer:{width:"100%"},header:{display:"flex",alignItems:"center"},item:{height:"100px",padding:"0 22px"},modal:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"75%",height:"60%"},modalContainer:{height:"100%",padding:"25px","& h2":{fontSize:"2.5rem",marginTop:"10px"}},printButton:{width:"120px",height:"40px",alignSelf:"center",marginTop:"auto",marginBottom:"100px"},sliceDropdown:{border:"1px solid #ced4da",borderRadius:4,width:"150px",padding:"0 10px"},slider:{maxWidth:"60px",marginLeft:"20px","& input":{padding:"8px",textAlign:"center"}},summary:{height:"56px",cursor:"pointer","&$selected, &$selected:hover":{backgroundColor:e.palette.secondary.main}},selected:{},hover:{},text:{fontSize:"1.5em",fontWeight:"bold"},gauges:{display:"flex"},nozzleSlider:{display:"flex",flexDirection:"row",width:250},tempOutputs:{display:"flex",flexDirection:"column"}}}))),_a=function(){var e=function(e){fetch("http://localhost:2127/api/v1/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gcode:e})})},t=Ca();return o.a.createElement(ka.a,{style:{textAlign:"center",marginTop:40}},o.a.createElement(f.a,{variant:"h4"},"Heating"),o.a.createElement(h.a,{container:!0,justify:"center"},o.a.createElement(h.a,{item:!0,xs:3},o.a.createElement("h4",null,"Preheat"),o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement(qt.Consumer,null,(function(t){var a=t.setBedTarget,n=t.setNozzleTarget;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{color:"primary",variant:"contained",style:{margin:3,height:50},onClick:function(){e("M104 S220\nM140 S50"),a(50),n(220)}},"PLA"),o.a.createElement(b.a,{color:"primary",variant:"contained",style:{margin:3,height:50},onClick:function(){e("M104 S245\nM140 S70"),a(70),n(245)}},"PETG"),o.a.createElement(b.a,{color:"primary",variant:"contained",style:{margin:3,height:50},onClick:function(){e("M104 S230\nM140 S50"),a(50),n(230)}},"TPU"),o.a.createElement(b.a,{color:"primary",variant:"contained",style:{margin:3,height:50},onClick:function(){e("M104 S0\nM140 S0"),a(0),n(0)}},"Cooldown"))})))),o.a.createElement(h.a,{item:!0,xs:7},o.a.createElement(h.a,{container:!0,direction:"column",style:{marginTop:55}},o.a.createElement(h.a,{item:!0,style:{marginTop:40}},o.a.createElement("span",null,"Nozzle")),o.a.createElement(h.a,{item:!0,container:!0,justify:"center"},o.a.createElement(h.a,{item:!0,xs:9},o.a.createElement(qt.Consumer,null,(function(t){var a=t.nozzleTarget,n=t.setNozzleTarget;return o.a.createElement(ut.a,{defaultValue:0,color:"secondary",onChange:function(e,t){n(t)},onChangeCommitted:function(t,a){n(a),e("M104 S".concat(a,"\n"))},getAriaValueText:function(){return"".concat(a,"C")},valueLabelDisplay:"auto",step:5,min:0,max:260,style:{maxWidth:"200px"},value:a})}))),o.a.createElement(h.a,{item:!0},o.a.createElement(qt.Consumer,null,(function(e){var a=e.nozzle,n=e.nozzleTarget;return o.a.createElement("div",{className:t.tempOutputs},o.a.createElement("span",{style:{color:"#aaaaaa",width:30}},"".concat(a,"C")),o.a.createElement("span",{style:{color:"#ffffff",width:30}},"".concat(n,"C")))})))),o.a.createElement(h.a,{item:!0},o.a.createElement("span",null,"Bed")),o.a.createElement(h.a,{container:!0,justify:"center"},o.a.createElement(h.a,{item:!0,xs:9},o.a.createElement(qt.Consumer,null,(function(t){var a=t.bedTarget,n=t.setBedTarget;return o.a.createElement(ut.a,{defaultValue:0,color:"secondary",onChange:function(e,t){n(t)},onChangeCommitted:function(t,a){n(a),e("M140 S".concat(a,"\n"))},getAriaValueText:function(){return"".concat(a,"C")},valueLabelDisplay:"auto",step:5,min:0,max:100,style:{maxWidth:"200px"},value:a})}))),o.a.createElement(h.a,{item:!0},o.a.createElement(qt.Consumer,null,(function(e){var a=e.bed,n=e.bedTarget;return o.a.createElement("div",{className:t.tempOutputs},o.a.createElement("span",{style:{color:"#aaaaaa",width:30}},"".concat(a,"C")),o.a.createElement("span",{style:{color:"#ffffff",width:30}},"".concat(n,"C")))}))))))))},Aa=(a(150),a(261)),Na=a(262),za=function(e){Object(Se.a)(a,e);var t=Object(ke.a)(a);function a(){return Object(we.a)(this,a),t.apply(this,arguments)}return Object(xe.a)(a,[{key:"disableMotors",value:function(){var e=new Ut;e.addCommand("M18"),this.sendGcode(e.build()),this.context.setSteppersEnabled(!1)}},{key:"enableMotors",value:function(){var e=new Ut;e.addCommand("M17"),this.sendGcode(e.build()),this.context.setSteppersEnabled(!0)}},{key:"sendGcode",value:function(e){fetch("http://localhost:2127/api/v1/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gcode:e})})}},{key:"render",value:function(){var e=this;return this.context.steppersEnabled?o.a.createElement("div",{style:{width:"100%",textAlign:"center",marginTop:50}},o.a.createElement(Ba,{startIcon:o.a.createElement(Na.a,null),color:"primary",variant:"contained",onClick:function(){e.disableMotors()}},"Disable Motors")):o.a.createElement("div",{style:{width:"100%",textAlign:"center",marginTop:50}},o.a.createElement(Ma,{startIcon:o.a.createElement(Aa.a,null),color:"primary",variant:"contained",onClick:function(){e.enableMotors()}},"Enable Motors"))}}]),a}(o.a.Component);za.contextType=qt;var Ba=Object(Ft.a)({root:{width:200,height:50,backgroundColor:"#B01C34","&:hover":{backgroundColor:"#B01C34"}}})(b.a),Ma=Object(Ft.a)({root:{width:200,height:50,backgroundColor:"#679436","&:hover":{backgroundColor:"#679436"}}})(b.a),Pa=za,Ra=(a(151),function(e){var t=o.a.useState({x:0,y:0,z:0}),a=Object(p.a)(t,2),n=a[0],r=a[1],i=o.a.useState(0),s=Object(p.a)(i,2),l=s[0],c=s[1];return o.a.useEffect((function(){if("undefined"!==typeof e&&"undefined"!==typeof e.lastMessage&&e.lastMessage&&"undefined"!==typeof e.lastMessage.data&&e.lastMessage.data.length>1){var t=JSON.parse(e.lastMessage.data.substring(1));if(console.log(t),t[0].hasOwnProperty("current")&&t[0].current.temps[0]&&t[0].current.temps[0].hasOwnProperty("tool0")){var a=t[0].current.temps[0];c(parseInt(a.tool0.actual))}t[0].hasOwnProperty("event")&&t[0].event.hasOwnProperty("payload")&&t[0].event.payload&&r({x:t[0].event.payload.x,y:t[0].event.payload.y,z:t[0].event.payload.z})}}),[e]),o.a.createElement(o.a.Fragment,null,o.a.createElement(ja,{position:n,nozzleTemp:l}),o.a.createElement(_a,null),o.a.createElement(Pa,null))}),Ia=a(274),Fa=a(92),La=a.n(Fa),Da=Object(y.a)({componentContainer:{display:"flex",flex:1},drawerContainer:{width:"100%"},header:{display:"flex",alignItems:"center"},item:{height:"100px",padding:"0 22px"},text:{fontSize:"1.5em",fontWeight:"bold"}}),Ya=function(){Da();var e=Object(n.useState)(!0),t=Object(p.a)(e,2),a=(t[0],t[1]);return o.a.createElement(h.a,null,o.a.createElement(Mt,{fileLocation:"local",drawerOpen:!0,setDrawerOpen:a,manage:!0,update:!1}))},Ga=a(267),Za=a(268),Xa=a(263),Ua=a(264),Ka=a(265),Ha=a(266),Wa=a(269),Va=a(270),qa=a(271),Qa=a(272),$a={wifi:{name:"Wi-Fi",icon:o.a.createElement(Xa.a,null)},hotspot:{name:"Hotspot",icon:o.a.createElement(Ua.a,null)},ethernet:{name:"Ethernet",icon:o.a.createElement(Ka.a,null)},none:{name:"None",icon:o.a.createElement(Ha.a,null)}},Ja=Object(y.a)({}),en=function(e){var t=e.machineName,a=Object(n.useState)(!1),r=Object(p.a)(a,2),i=r[0],s=r[1],l=Object(n.useState)("none"),c=Object(p.a)(l,2),u=c[0],d=c[1],m=Object(n.useState)(""),y=Object(p.a)(m,2),v=y[0],w=y[1],x=Object(n.useState)(""),S=Object(p.a)(x,2),k=S[0],T=S[1],O=Object(n.useState)(!1),j=Object(p.a)(O,2),C=j[0],z=j[1],B=Object(n.useState)(!1),M=Object(p.a)(B,2),P=M[0],R=M[1],I=Object(n.useState)(!1),F=Object(p.a)(I,2),L=F[0],D=F[1],Y=Object(n.useState)(0),G=Object(p.a)(Y,2),Z=G[0],X=G[1],U=Object(n.useState)({}),K=Object(p.a)(U,2),W=K[0],V=K[1],q=Object(n.useState)(!1),Q=Object(p.a)(q,2),$=Q[0],J=Q[1],ee=Object(n.useState)(""),te=Object(p.a)(ee,2),ae=te[0],ne=te[1],oe=function(){J((function(){return!1})),ne("")},re=Ja();E((function(){_().then((function(){d((function(){var e=N("networkProfile");return e||"none"})),w((function(){return N("printerProfile")})),T((function(){return N("userMode")})),R(N("allowPrerelease")),D(N("allowAutoUpdate")),V(N("network"))}))}));var ie=function(e){var t=e.toLowerCase();d(t)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{container:!0,direction:"column",className:re.container},o.a.createElement(h.a,null,o.a.createElement(Ze.a,{subheader:o.a.createElement(Ga.a,null,"Network"),className:re.root},o.a.createElement(Xe.a,{button:!0,onClick:function(){"hotspot"===u&&z((function(e){return!e}))}},o.a.createElement(Ue.a,null,$a[u].icon||o.a.createElement(Xa.a,null)),o.a.createElement(He.a,{primary:$a[u].name+("Hotspot"!=$a[u].name?"None"!=$a[u].name&&"Ethernet"!=$a[u].name?W&&W.ssid?": "+W.ssid:": Not Connected":"":": "+t)}),o.a.createElement(Za.a,null,o.a.createElement(b.a,{variant:"contained",color:i?"secondary":"primary",onClick:function(){X(2)},size:i?"small":"medium"},i?"Select":"Change"))),W&&W.hostName&&o.a.createElement(Xe.a,null,o.a.createElement(Ue.a,null,o.a.createElement(Wa.a,null)),o.a.createElement(He.a,{primary:"Host Name: "+W.hostName})),W&&W.ip&&o.a.createElement(Xe.a,null,o.a.createElement(Ue.a,null,o.a.createElement(Va.a,null)),o.a.createElement(He.a,{primary:"IP Address: "+W.ip})),i&&o.a.createElement(o.a.Fragment,null,Object.entries($a).map((function(e){var t=e[1];return u!==e[0]?o.a.createElement(Xe.a,{key:"".concat(e[0],"-exanded-network")},o.a.createElement(Ue.a,null,t.icon),o.a.createElement(He.a,{primary:t.name}),o.a.createElement(Za.a,null,o.a.createElement(b.a,{variant:"contained",color:"secondary",onClick:function(){return function(e){var t=e.toLowerCase();s(!1),d(t),A("networkProfile",t),X(0)}(t.name)},size:"small"},"Select"))):o.a.createElement(o.a.Fragment,null)}))))),C&&o.a.createElement(h.a,{style:{marginLeft:16}},"Your SSID is",o.a.createElement(f.a,{color:"secondary",variant:"body1"},t),"Your password is",o.a.createElement(f.a,{color:"secondary",variant:"body1"},"makermade"),"ethernet"===u&&o.a.createElement(f.a,{variant:"body2"},"Don't forget to connect your cable!")),o.a.createElement(h.a,null,o.a.createElement(Ze.a,{subheader:o.a.createElement(Ga.a,null,"User Type"),className:re.root},o.a.createElement(Xe.a,null,o.a.createElement(Ue.a,null,o.a.createElement(qa.a,null)),o.a.createElement(He.a,{primary:"Experience Level"}),o.a.createElement(Be.a,{native:!0,value:k,onChange:function(e){e.target&&e.target.value&&(T(e.target.value),A("userMode",e.target.value))},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null}},o.a.createElement("option",{value:"beginner"},"Beginner"),o.a.createElement("option",{value:"advanced"},"Advanced"),o.a.createElement("option",{value:"expert"},"Expert"))))),o.a.createElement(h.a,null,o.a.createElement(Ze.a,{subheader:o.a.createElement(Ga.a,null,"Printer"),className:re.root},o.a.createElement(Xe.a,null,o.a.createElement(Ue.a,null,o.a.createElement(Qa.a,null)),o.a.createElement(He.a,{primary:"Classroom Mode"}),o.a.createElement(Za.a,null,o.a.createElement(Ie.a,{edge:"end",onChange:function(e){var t=e.target.checked?"classroom":"home";w((function(){return t})),A("printerProfile",t)},checked:"home"!==v}))),o.a.createElement(Xe.a,null,o.a.createElement(Ue.a,null,o.a.createElement(Qa.a,null)),o.a.createElement(He.a,{primary:"Printer Name: ".concat(t)}),o.a.createElement(Za.a,null,o.a.createElement(b.a,{variant:"contained",color:i?"secondary":"primary",onClick:function(){X(1)},size:i?"small":"medium"},i?"Select":"Change"))))),o.a.createElement(h.a,null,o.a.createElement(Ze.a,{subheader:o.a.createElement(Ga.a,null,"Software"),className:re.root},o.a.createElement(Xe.a,null,o.a.createElement(Ue.a,null,o.a.createElement(Qa.a,null)),o.a.createElement(He.a,{primary:"Allow Update Pre-Releases"}),o.a.createElement(Za.a,null,o.a.createElement(Ie.a,{edge:"end",onChange:function(e){R(e.target.checked),A("allowPrerelease",e.target.checked)},checked:P}))),o.a.createElement(Xe.a,null,o.a.createElement(Ue.a,null,o.a.createElement(Qa.a,null)),o.a.createElement(He.a,{primary:"Allow Software Auto-Updating"}),o.a.createElement(Za.a,null,o.a.createElement(Ie.a,{edge:"end",onChange:function(e){D(e.target.checked),A("allowAutoUpdate",e.target.checked)},checked:L}))))),o.a.createElement(g.a,{open:$,autoHideDuration:6e3,message:ae,onClose:oe})),2===Z&&o.a.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgb(66,66,66)",zIndex:8e3,paddingLeft:24,paddingRight:24}},o.a.createElement(pa,{setStep:X,setShowSnack:J,setSnackMessage:ne,handleSnackClose:oe,setNewType:function(e){ie(e)},settingsScreen:!0,machineName:t,setNetworkData:V})),1===Z&&o.a.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgb(66,66,66)",zIndex:8e3,paddingLeft:24,paddingRight:24}},o.a.createElement(H,{setStep:X,setShowSnack:J,setSnackMessage:ne,handleSnackClose:oe,settingsScreen:!0,setNewType:function(e){ie(e)}})))},tn=function(e){Object(Se.a)(a,e);var t=Object(ke.a)(a);function a(e){var n;return Object(we.a)(this,a),n=t.call(this,e),console.log(n.props.machineName),n.state={currentTutorial:null,machineName:n.props.machineName},n}return Object(xe.a)(a,[{key:"selectTutorial",value:function(e){this.setState({currentTutorial:e})}},{key:"closeTutorial",value:function(e){var t=this;this.setState({currentTutorial:null}),e&&"request-calibration"===e&&setTimeout((function(){t.selectTutorial("bedLevelSensorCalibration")}),1e3)}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,{className:t.tutorialContainer},Object.getOwnPropertyNames(Dt).map((function(a){return Dt[a].userVisable?o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{className:t.tutorialCard,onClick:function(){e.selectTutorial(a)}},o.a.createElement(x.a,null,o.a.createElement(f.a,{variant:"h6"},Dt[a].name),o.a.createElement(f.a,{variant:"body2"},Dt[a].description)))):o.a.createElement(o.a.Fragment,null)}))),this.state.currentTutorial&&o.a.createElement($t,{tutorialName:this.state.currentTutorial,showClose:!0,onTutorialClose:function(t){e.closeTutorial(t)},machineName:this.state.machineName}))}}]),a}(o.a.Component),an=Object(Ft.a)((function(e){return{tutorialContainer:{maxHeight:"950px",overflow:"auto"},tutorialCard:{backgroundColor:"rgb(46,46,46)",marginBottom:"8px"},updateContainer:{flex:3,"& h3":{fontSize:"28px",textAlign:"center"}}}}))(tn),nn=Object(y.a)({backdrop:{zIndex:1e4,color:"#fff"},buttonContainer:{display:"flex",width:"100%",justifyContent:"space-around",marginTop:"56px"},connecting:{display:"flex",flexDirection:"column",alignItems:"center","& h4":{marginBottom:"24px"}},container:{display:"flex",flexDirection:"column"},header:{display:"flex",alignItems:"center"},item:{padding:function(e){return e.settingsScreen?"10px":"30px 15px"},fontSize:function(e){return e.settingsScreen?"18px":"24px"},display:"flex",justifyContent:"space-between"},keyboard:{position:"fixed",bottom:0,left:0,right:0,color:"#000"}}),on=function(e){e.setStep,e.setShowSnack,e.setSnackMessage,e.settingsScreen;var t=nn(),a=Object(n.useState)(!1),r=Object(p.a)(a,2),i=r[0];r[1];return o.a.createElement(h.a,{container:!0,item:!0,spacing:6,direction:"column",alignItems:"center",className:t.container},o.a.createElement("div",null,o.a.createElement(h.a,{container:!0,item:!0,spacing:6,direction:"column",alignItems:"center",style:{paddingTop:140}},o.a.createElement(f.a,{variant:"h4",style:{textAlign:"center"}},"Warning!"),o.a.createElement(f.a,{variant:"h6",style:{textAlign:"center"}},"This will reset your printer to factory settings."),o.a.createElement(f.a,{variant:"h6",style:{textAlign:"center"}},"All gcode and stl files will be preserved.")),o.a.createElement(h.a,{container:!0,item:!0,spacing:6,direction:"column",alignItems:"center",style:{marginTop:100}},i?o.a.createElement(h.a,{container:!0,direction:"column",alignItems:"center"},o.a.createElement(h.a,{item:!0},o.a.createElement(G.a,{className:t.button,color:"secondary"})),o.a.createElement(h.a,{item:!0},o.a.createElement(f.a,{variant:"h5",style:{marginTop:60,textAlign:"center"}},"Rebooting printer to apply changes, this will take approximately 2 minutes.")),o.a.createElement(h.a,{item:!0},o.a.createElement(f.a,{variant:"h5",style:{marginTop:60,textAlign:"center"}},"DO NOT TURN OFF PRINTER UNTIL AFTER IT REBOOTS!"))):o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{color:"secondary",variant:"contained",className:t.button,style:{marginTop:10},onClick:function(){console.log("reset"),z().then((function(e){window.location.reload()}))}},"Reset")))))},rn=a(273),sn=a(109),ln=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],r=t[1];return E((function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:2127/api/v1/update/version/info",{method:"POST",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(e){console.log(e),e.success&&r(e.update_info)}))})),o.a.createElement(h.a,{container:!0,direction:"column"},o.a.createElement(Ze.a,{subheader:o.a.createElement(Ga.a,{style:{fontSize:"20px"}},"Software")},o.a.createElement(Xe.a,null,o.a.createElement(Ue.a,null,o.a.createElement(rn.a,null)),o.a.createElement(He.a,{primary:"Firmware Version",secondary:sn.version}))),a&&o.a.createElement(Ze.a,{subheader:o.a.createElement(Ga.a,{style:{fontSize:"20px"}},"Release Notes")},Object.entries(a).reverse().map((function(e,t){return o.a.createElement(Xe.a,{key:"version-".concat(t)},o.a.createElement(He.a,{primary:e[0],secondary:o.a.createElement("div",{dangerouslySetInnerHTML:{__html:e[1].replace(/(?:\r\n|\r|\n)/g,"<br>").replace(/(?:-)/g,"<b>&#9900;</b>")}})}))}))))},cn=Object(y.a)({componentContainer:{display:"flex",flex:1},drawerContainer:{width:"100%"},header:{display:"flex",alignItems:"center"},item:{height:"100px",padding:"0 22px"},text:{fontSize:"1.5em"}}),un=function(e){e.lastMessage;var t=e.machineName,a=e.fastTrackUpdate,r=e.setFastTrackUpdate,i=cn(),s=Object(n.useState)(!1),l=Object(p.a)(s,2),c=l[0],u=l[1],d=Object(n.useState)({}),h=Object(p.a)(d,2),b=h[0],g=h[1];E((function(){if(N("allowAutoUpdate")&&a){var e=v.find((function(e){return"Update"===e.name}));e&&y(e)}}));var y=function(e){g(e),u(!0)},v=[{name:"Tutorials",component:o.a.createElement(an,{machineName:t})},{name:"Settings",component:o.a.createElement(en,{machineName:t})},{name:"Storage",component:o.a.createElement(Ya,null)},{name:"Update",component:o.a.createElement(Rt,{firstBoot:!1,fastTrackUpdate:a,setFastTrackUpdate:r})},{name:"Reset",component:o.a.createElement(on,null)},{name:"About",component:o.a.createElement(ln,null)}];return o.a.createElement("div",null,o.a.createElement(Ze.a,null,v.map((function(e){return o.a.createElement(o.a.Fragment,{key:"".concat(e.name,"-item")},o.a.createElement(Xe.a,{button:!0,onClick:function(){return y(e)},className:i.item},o.a.createElement(He.a,{primary:o.a.createElement(f.a,{className:i.text},e.name)}),o.a.createElement(La.a,null)),o.a.createElement(Ia.a,null))}))),o.a.createElement(je.a,{anchor:"right",open:c,onClose:function(){return u(!1)},classes:{paper:i.drawerContainer}},o.a.createElement(Q.a,{position:"sticky"},o.a.createElement(f.a,{variant:"h6",style:{textAlign:"center"}},"Printer Name: ",t)),o.a.createElement("div",{className:i.header},o.a.createElement($.a,{"aria-label":"back",onClick:function(){return u(!1)}},o.a.createElement(na.a,null)),o.a.createElement(f.a,{variant:"h5"},b.name)),o.a.createElement(m.a,{className:i.componentContainer},b.component)))},pn=function(e){Object(Se.a)(a,e);var t=Object(ke.a)(a);function a(e){var n;return Object(we.a)(this,a),(n=t.call(this,e)).state={tutorialShown:!1},n}return Object(xe.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{className:t.tutorialCard,onClick:function(){e.setState({tutorialShown:!0})}},o.a.createElement(x.a,null,o.a.createElement(f.a,{variant:"h6"},Dt[this.props.tutorialName].name),o.a.createElement(f.a,{variant:"body2"},Dt[this.props.tutorialName].description))),this.state.tutorialShown&&o.a.createElement($t,{tutorialName:this.props.tutorialName,extruderTemp:this.props.extruderTemp,bedTemp:this.props.bedTemp,showClose:!0,onTutorialClose:function(t){e.setState({tutorialShown:!1})},machineName:this.props.machineName}))}}]),a}(n.Component),dn=Object(Ft.a)((function(e){return{tutorialContainer:{maxHeight:"950px",overflow:"auto"},tutorialCard:{backgroundColor:"rgb(46,46,46)",marginBottom:"8px"},updateContainer:{flex:3,"& h3":{fontSize:"28px",textAlign:"center"}}}}))(pn),mn=function(e){var t=e.lastMessage,a=e.machineName,r=Object(n.useState)(0),i=Object(p.a)(r,2),s=i[0],l=i[1],c=Object(n.useState)(0),u=Object(p.a)(c,2),d=u[0],m=u[1];return o.a.useEffect((function(){if("undefined"!==typeof t&&t&&"undefined"!==typeof t.data&&t.data.length>1){var e=JSON.parse(t.data.substring(1));if(console.log(e),e[0].hasOwnProperty("current")&&e[0].current.temps[0]&&e[0].current.temps[0]){var a=e[0].current.temps[0];l(parseInt(a.tool0.actual)),m(parseInt(a.bed.actual))}}}),[t]),o.a.createElement("div",null,o.a.createElement(dn,{tutorialName:"blTouchCalibration",extruderTemp:s,bedTemp:d,machineName:a}),o.a.createElement(dn,{tutorialName:"bedLevelCornerCalibration",extruderTemp:s,bedTemp:d,machineName:a}),o.a.createElement(dn,{tutorialName:"loadFilament",extruderTemp:s,bedTemp:d,machineName:a}),o.a.createElement(dn,{tutorialName:"unloadFilament",extruderTemp:s,bedTemp:d,machineName:a}))},hn=(a(152),Object(y.a)((function(e){return{appBar:{top:"auto",bottom:0,textAlign:"center",padding:0},okButton:{backgroundColor:"#0072CE",color:"white",marginRight:10,marginBottom:10}}})));function fn(){return(fn=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:2127/api/v1/check/internet/connection",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bn(){return(bn=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:2127/api/v1/update/software/check",{method:"POST",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gn=["Print","Control","Tune","Menu"],yn=function(e){var t=e.lastMessage,a=(e.mode,e.setActiveMode,e.machineName),r=Object(n.useContext)(qt),i=hn(),s=Object(n.useState)("Print"),l=Object(p.a)(s,2),c=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(p.a)(d,2),h=m[0],f=m[1],g=Object(n.useState)(!1),y=Object(p.a)(g,2),v=y[0],w=y[1],x=Object(n.useState)(!1),S=Object(p.a)(x,2),k=S[0],T=S[1],O=Object(n.useState)(!1),j=Object(p.a)(O,2),C=j[0],A=j[1];E((function(){_().then((function(){N("allowAutoUpdate")&&function(){return fn.apply(this,arguments)}().then((function(e){e.online&&function(){return bn.apply(this,arguments)}().then((function(e){console.log(e),e.update&&(w(e.message),T(e.releaseNotes))}))}))}))})),o.a.useEffect((function(){if("undefined"!==typeof t&&t&&"undefined"!==typeof t.data&&t.data.length>1){var e=JSON.parse(t.data.substring(1));if(e[0].hasOwnProperty("current")&&e[0].current.progress&&(e[0].current.progress&&e[0].current.job&&e[0].current.job.file.name&&e[0].current.progress.completion<100&&e[0].current.state&&"Operational"!==e[0].current.state.text?"Menu"!==c&&(u("Print"),f(!0)):f(!1)),e[0].hasOwnProperty("current")&&e[0].current.messages.length){var a=e[0].current.messages;for(var n in a)if(!a[n].includes("echo:")&&a[n].includes("Probe Offset")){var o=a[n].split(" "),i=o[o.length-1].substring(1);console.log(i),r.setZOffset(i)}}}}),[t]);var z={Print:o.a.createElement(Sa,{lastMessage:t,setDisabledNav:f,machineName:a}),Control:o.a.createElement(Ra,{lastMessage:t}),Menu:o.a.createElement(un,{lastMessage:t,machineName:a,fastTrackUpdate:C,setFastTrackUpdate:A}),Tune:o.a.createElement(mn,{lastMessage:t,machineName:a})};return o.a.createElement("div",{className:"home-container"},o.a.createElement(Q.a,{position:"fixed",color:"primary",className:i.appBar,disabled:!0},o.a.createElement(ha,{tabList:gn,handleTabClick:function(e,t){u(gn[t])},activeTab:gn.indexOf(c),disabledNav:h})),o.a.createElement("div",{className:"component-container"},z[c]),o.a.createElement(re.a,{open:v,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ie.a,{id:"alert-dialog-title",style:{textAlign:"center"}},v),o.a.createElement(se.a,{style:{textAlign:"left"}},o.a.createElement(le.a,{id:"alert-dialog-description"},o.a.createElement("b",null,"A new software version is available."),k&&o.a.createElement("div",{dangerouslySetInnerHTML:{__html:k.replace(/(?:\r\n|\r|\n)/g,"<br>").replace(/(?:-)/g,"<b>&#9900;</b>")}}),o.a.createElement("b",null,"Would you like to update now?"))),o.a.createElement(ce.a,null,o.a.createElement(b.a,{onClick:function(){A(!1),w(!1)},color:"primary",className:i.okButton,autoFocus:!0},"Cancel"),o.a.createElement(b.a,{onClick:function(){A(!0),u("Menu"),w(!1)},color:"primary",className:i.okButton,autoFocus:!0},"Update"))))},En=a(110),vn=a(275),wn=a(57),xn=a.n(wn),Sn=Object(En.a)({palette:{primary:{main:"#0071CE"},secondary:{main:"#CD6930"},background:{default:"#3A3A3A"},type:"dark"},overrides:{MuiAppBar:{root:{padding:"10px"}},MuiTab:{root:{"&$selected":{color:"#FFFFFF","background-color":"#0055a1"},"font-weight":300}},MuiPaper:{rounded:{"border-radius":"15px"}},MuiButton:{root:{"font-weight":300}},MuiButtonBase:{root:{"font-weight":300}},MuiIconButton:{root:{"font-weight":300}},MuiListItemText:{root:{"font-weight":300}},MuiDialogActions:{root:{"justify-content":"space-around"}},MuiTypography:{root:{"font-weight":300},h1:{"font-weight":300},h2:{"font-weight":300},h3:{"font-weight":300},h4:{"font-weight":300},h5:{"font-weight":300},h6:{"font-weight":300},body1:{"font-weight":300},body2:{"font-weight":300}}}}),kn=function(){var e,t=Object(n.useState)(null),a=Object(p.a)(t,2),r=a[0],i=a[1],s=Object(n.useState)(!0),m=Object(p.a)(s,2),h=m[0],b=m[1],g=Object(n.useState)(!0),y=Object(p.a)(g,2),v=y[0],w=y[1],x=Object(n.useState)(0),S=Object(p.a)(x,2),k=S[0],T=S[1],O=Object(n.useState)(0),j=Object(p.a)(O,2),C=j[0],z=j[1],B=Object(n.useState)(0),M=Object(p.a)(B,2),P=M[0],R=M[1],I=Object(n.useState)(0),F=Object(p.a)(I,2),L=F[0],D=F[1],Y=Object(n.useState)(0),G=Object(p.a)(Y,2),Z=G[0],X=G[1],U=Object(n.useState)(""),K=Object(p.a)(U,2),H=K[0],W=K[1],V=Object(n.useState)(!0),q=Object(p.a)(V,2),$=q[0],J=q[1],ee=Object(n.useState)(!1),te=Object(p.a)(ee,2),ae=te[0],ne=te[1],oe=Object(n.useState)(""),ce=Object(p.a)(oe,2),ue=ce[0],pe=ce[1],de=Object(n.useState)(""),me=Object(p.a)(de,2),he=me[0],fe=me[1],be=Object(n.useState)("ws://localhost:9000/sockjs/718/qerksnvm/websocket"),ge=Object(p.a)(be,1)[0],ye=Object(n.useRef)([]),Ee=xn()(ge,{shouldReconnect:function(e){return!0},reconnectAttempts:999999,reconnectInterval:0,onOpen:function(){console.log("socket opened")},onError:function(){console.log("socket error")},onClose:function(){console.log("socket closed")},onMessage:function(e){try{var t=JSON.parse(e.data.substring(1));if(t.length&&t.length>0){if(t[0].hasOwnProperty("current")&&t[0].current.temps[0]&&t[0].current.temps[0].hasOwnProperty("tool0")&&t[0].current.temps[0].hasOwnProperty("bed")){var a=t[0].current.temps[0];R(parseInt(a.tool0.actual)),T(parseInt(a.bed.actual)),D(parseInt(a.tool0.target)),z(parseInt(a.bed.target))}if(t[0].hasOwnProperty("event")&&"Error"==t[0].event.type){var n=t[0].event;console.log(n);var o="Error thrown by "+n.payload.reason,r=n.payload.error;pe(r),fe(o),ne(!0)}}}catch(n){}}}),we=Ee.sendMessage,xe=Ee.lastMessage,Se=Ee.readyState;ye.current=Object(n.useMemo)((function(){try{ye.current.concat(xe)}catch(e){}}),[xe]);var ke=(e={},Object(u.a)(e,wn.ReadyState.CONNECTING,"Connecting"),Object(u.a)(e,wn.ReadyState.OPEN,"Open"),Object(u.a)(e,wn.ReadyState.CLOSING,"Closing"),Object(u.a)(e,wn.ReadyState.CLOSED,"Closed"),Object(u.a)(e,wn.ReadyState.UNINSTANTIATED,"Uninstantiated"),e)[Se];function Te(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(c.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,a(),e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}E((function(){w(!0),_().then((function(){b(N("onboarded")),N("userMode")&&N("didUserMode")?i(N("userMode")):(A("didUserMode",!0),A("userMode","advanced"));var e=N("networkProfile"),t=N("printerName");v||"Open"!==ke||w(!0),"hotspot"===e&&Te("http://localhost:8990/hotspot/connect",(function(){"Open"===ke&&w(!1)})),"wifi"===e&&Te("http://localhost:8990/hotspot/disconnect",(function(){"Open"===ke&&w(!1)})),null===t||"300X"===t?(A("printerName","300x"),W("300x")):W(t)}))}));return o.a.useEffect((function(){console.log(ke),"Open"===ke&&(we('{ "auth": "E7BFE47F2DBF489B9E78A3D9D042874A" }'),we('{ "throttle": 2 }'),we('{ "current": "state" }'),w(!1))}),[ke,we]),o.a.createElement(vn.a,{theme:Sn},o.a.createElement(qt.Provider,{value:{bedTarget:C,bed:k,nozzleTarget:L,nozzle:P,zOffset:Z,setBedTarget:z,setNozzleTarget:D,setBed:T,setNozzle:R,steppersEnabled:$,setSteppersEnabled:J,setZOffset:X}},o.a.createElement(d.a,null),o.a.createElement(ka.a,{height:"100vh",display:"flex",flexDirection:"column"},h&&o.a.createElement(Q.a,{position:"sticky"},o.a.createElement(f.a,{variant:"h6",style:{textAlign:"center"}},"Printer Name: ",H)),v?o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{alt:"print",src:ve.a,style:{width:200,height:200,zIndex:99999999,position:"absolute",left:"calc(50% - 100px)",top:"calc(50% - 100px)"}}),o.a.createElement("h4",{style:{width:200,zIndex:99999999,position:"absolute",left:"calc(50% - 100px)",top:"calc(50% + 120px)",textAlign:"center"}},"Loading ...")):h?o.a.createElement(yn,{mode:r,lastMessage:xe,setActiveMode:i,machineName:H}):o.a.createElement(ma,{handleOnboarding:function(e){i(e),b(!0)},machineName:H}),o.a.createElement(re.a,{open:ae,disableBackdropClick:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",style:{textAlign:"center"}},o.a.createElement(ie.a,{id:"alert-dialog-title"},he),o.a.createElement(se.a,null,o.a.createElement(le.a,{id:"alert-dialog-description"},ue,o.a.createElement("br",null),"Turn off your printer and check to make sure you have no loose wire connections. Once you have checked all connections, turn your printer back on and try again."))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(kn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},48:function(e,t,a){e.exports=a.p+"static/media/mm-print.01cf77d4.svg"},93:function(e){e.exports=JSON.parse('[{"name":"BLTouchCalibrationTest.gcode"}]')}},[[127,1,2]]]);
//# sourceMappingURL=main.75d20b8e.chunk.js.map